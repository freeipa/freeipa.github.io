<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Managing User Accounts &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="Akrivoka.html" />
    <link rel="prev" title="Description" href="Active_Directory_trust_setup.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="managing-user-accounts">
<span id="id1"></span><h1>Managing User Accounts<a class="headerlink" href="#managing-user-accounts" title="Permalink to this heading">¶</a></h1>
<p>The primary activities associated with managing user accounts, such as
creating and deleting accounts, are performed by IPA Administrators.
Other activities, such as editing various user account attributes,
changing group membership, etc., can be delegated to other accounts.</p>
<p>Refer to <a class="reference external" href="#Delegating_Administrative_Privileges_Delegating_Administrative_Privileges">#Delegating_Administrative_Privileges Delegating
Administrative
Privileges</a>
for more information.</p>
<p>You can use either the Web interface or the command line to manage user
accounts. Each interface provides identical functionality, however the
Web interface displays a greater range of information for each user in
an easy to use format.</p>
<p>When you add new user accounts using the Web interface, mandatory fields
are shown in a different color. Certain other fields, such as Common
Name, Display Name, Initials, Login, and E-mail Address, are populated
automatically. You can change these values as required. The UID, GID,
and Home Directory are automatically generated by the server.</p>
<p>If you use the command line to add user accounts, you will be prompted
for any information that is required.</p>
<section id="creating-user-accounts">
<span id="id2"></span><h2>Creating User Accounts<a class="headerlink" href="#creating-user-accounts" title="Permalink to this heading">¶</a></h2>
<section id="using-the-web-interface">
<span id="id3"></span><h3>Using the Web Interface<a class="headerlink" href="#using-the-web-interface" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>On the IPA Home Page, click <strong>Add User</strong> in the Tasks list to display
the <strong>Add User</strong> page.</p></li>
<li><p>Enter the required details for the user.</p></li>
<li><p>If required, add the user account to a group. All users are
automatically added to the global group <em>ipausers</em>.</p></li>
<li><p>When you have entered the required account details, click <strong>Add
User</strong>.</p></li>
</ol>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>It is not essential to provide a password when you create an
account. For example, you might create an account for a service
(rather than a user), and such an account may not require a
password. For a user account, however, you need to provide an
initial password so that the user can log in to their account.
Users are required to change their initial password the first time
they log in.</p>
</div></blockquote>
</div></blockquote>
<p>The following is an example of adding the Identity and Account details
for a new user using the Web interface.</p>
<p><a class="reference external" href="image:AddUser.png">Using the Web interface to add a new user</a></p>
</section>
<section id="using-the-command-line">
<span id="id4"></span><h3>Using the Command Line<a class="headerlink" href="#using-the-command-line" title="Permalink to this heading">¶</a></h3>
<p>Use the <strong>ipa-adduser</strong> command to add users to IPA. You can pass
attributes directly to the command, or run the command with no
parameters to enter interactive mode.</p>
<p>For example, to create the user <em>jlamb</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-adduser -f John -l Lamb -p secret jlamb
</pre></div>
</div>
<p>The following is an example of using the <strong>ipa-adduser</strong> command in
interactive mode to create a user account:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-adduser
First name: Jinny
Last name: Pattanajee
Login name: jpattan
  Password:
  Password (again):
gecos[]: Jinny Pattanajee
home directory [/home/jpattan]:
shell [/bin/sh]:
jpattan successfully added
</pre></div>
</div>
<p>Press <strong>Enter</strong> to accept the default values (provided in square
brackets), or enter an alternative.</p>
<p>Refer to the <strong>ipa-adduser</strong> man page for more information.</p>
</section>
</section>
<section id="editing-user-accounts">
<span id="id5"></span><h2>Editing User Accounts<a class="headerlink" href="#editing-user-accounts" title="Permalink to this heading">¶</a></h2>
<p>Members of the IPA Administrators group can edit any of the details of
any user account. Other users may also be able to edit certain details
of user accounts, according to the delegations that have been
configured.</p>
<section id="using-the-web-interface-1">
<span id="id6"></span><h3>Using the Web Interface<a class="headerlink" href="#using-the-web-interface-1" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Click <strong>Find Users</strong> in the Tasks list to display the <strong>Find Users</strong>
page.</p></li>
<li><p>Enter the name or a key word of the user that you want to edit in the
search field, and click <strong>Find Users</strong>.</p></li>
<li><p>In the search results, click the name of the user that you want to
edit. The user is displayed on the <strong>View User</strong> page. If the user
does not appear in the search results, try using broader search
terms.</p></li>
<li><p>Click <strong>Edit User</strong> to display the <strong>Edit User</strong> page. This displays
the various fields where you can edit user attributes.</p></li>
<li><p>Edit the user attributes as required, and click <strong>Update User</strong>. Note
that not all fields are immediately editable; you need to select the
<strong>Edit Protected Fields</strong> checkbox to edit the <strong>Password</strong>, <strong>Home
Directory</strong>, and some other fields.</p></li>
</ol>
<blockquote>
<div><p><img alt="Caution.png" src="../../_images/Caution.png" /> <strong>Caution:</strong></p>
<blockquote>
<div><p>It is possible to edit the UID and GID of user accounts, however
this is not recommended. Changing these IDs will not cause
problems internally for IPA, but it can lead to other issues such
as changes to file ownership, security problems, etc.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="using-the-command-line-1">
<span id="id7"></span><h3>Using the Command Line<a class="headerlink" href="#using-the-command-line-1" title="Permalink to this heading">¶</a></h3>
<p>Use the <strong>ipa-moduser</strong> command to modify user account details, such as
adding, removing or changing attributes.</p>
<p><strong>To update the Zip code, Display Name, and Employee Type for the user
jsmith:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-moduser --set postalCode=50211 --set displayName=&quot;John Smith&quot; --set employeeType=permanent jsmith
</pre></div>
</div>
<p><strong>To remove the Pager and Home Phone attributes from the same user:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-moduser --del pager --del homePhone jsmith
</pre></div>
</div>
</section>
</section>
<section id="activating-and-inactivating-user-accounts">
<span id="id8"></span><h2>Activating and Inactivating User Accounts<a class="headerlink" href="#activating-and-inactivating-user-accounts" title="Permalink to this heading">¶</a></h2>
<p>IPA user accounts can be set to a status of <em>Active</em> or <em>Inactive</em>. If
you inactivate a user account, that user can no longer log in to IPA,
change their password, or perform any other functions. The account and
all associated information still exists, but is inaccessible by the
user.</p>
<section id="using-the-web-interface-2">
<span id="id9"></span><h3>Using the Web Interface<a class="headerlink" href="#using-the-web-interface-2" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Find the user that you want to inactivate as described
<a class="reference external" href="#Editing_User_Accounts">above.</a></p></li>
<li><p>Click <strong>Edit User</strong> to display the <strong>Edit User</strong> page. This displays
the various fields where you can edit user attributes.</p></li>
<li><p>In the <strong>Account Details</strong> section, select <strong>inactive</strong> in the
<strong>Account Status</strong> drop-down list, and then click <strong>Update User</strong>.</p></li>
</ol>
<p>The account will remain inactive and inaccessible to the user until
reactivated by an IPA Administrator.</p>
</section>
<section id="using-the-command-line-2">
<span id="id10"></span><h3>Using the Command Line<a class="headerlink" href="#using-the-command-line-2" title="Permalink to this heading">¶</a></h3>
<p>Use the <strong>ipa-lockuser</strong> command to activate or inactivate user
accounts.</p>
<p><strong>To lock (inactivate) the jsmith user account:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-lockuser jsmith
</pre></div>
</div>
<p><strong>To unlock (activate) the jsmith user account:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-lockuser -u jsmith
</pre></div>
</div>
</section>
</section>
<section id="deleting-user-accounts">
<span id="id11"></span><h2>Deleting User Accounts<a class="headerlink" href="#deleting-user-accounts" title="Permalink to this heading">¶</a></h2>
<p>If you delete a user account, all of the information for that identity
is lost. The actual user account, home directory and other information
still exists, be it on a server, local machine, or some other provider,
but it is no longer accessible via IPA.</p>
<p>Unlike with inactivation, if you delete a user account, it cannot be
retrieved. If you find that you need this user account again, you need
to recreate it and add all of the account details manually.</p>
<section id="using-the-web-interface-3">
<span id="id12"></span><h3>Using the Web Interface<a class="headerlink" href="#using-the-web-interface-3" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Find the user that you want to delete as described
<a class="reference external" href="#Editing_User_Accounts">above.</a></p></li>
<li><p>Click <strong>Edit User</strong> to display the <strong>Edit User</strong> page.</p></li>
<li><p>Click <strong>Delete User</strong>, and then click <strong>OK</strong>.</p></li>
</ol>
</section>
<section id="using-the-command-line-3">
<span id="id13"></span><h3>Using the Command Line<a class="headerlink" href="#using-the-command-line-3" title="Permalink to this heading">¶</a></h3>
<p>Use the <strong>ipa-deluser</strong> command to delete user accounts. For example, to
delete the <em>jsmith</em> user account:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-deluser jsmith
</pre></div>
</div>
</section>
</section>
</section>
<section id="managing-groups">
<span id="id14"></span><h1>Managing Groups<a class="headerlink" href="#managing-groups" title="Permalink to this heading">¶</a></h1>
<p>IPA uses groups to facilitate the management and administration of both
users and permissions. Three groups are created by default during the
installation process: <em>ipausers</em>, <em>admins</em>, and <em>editors</em>. The IPA
Administrator is a member of the <em>admins</em> group; you can not remove the
IPA Administrator from this group, nor can you remove the Administrator
or <em>admins</em> group. These are all required for IPA operation. All other
users belong to the global group <em>ipausers</em>, and you can create as many
additional groups as you require. The <em>editors</em> group is a special group
whose members have certain administrative permissions within IPA,
however these permissions are not as extensive as those of IPA
Administrators.</p>
<p>You can create groups based on the departments within your organization,
for example, Engineering, Finance, and HR. You can also create groups
based on the permissions, or <em>roles</em>, required to manage your
departmental or other groups.</p>
<p>You can also create nested groups. For example, you can create a group
called “Documentation”, within which you could create groups called
“Writers”, “Editors”, and “Translators”. You can add users to each of
the sub-groups to suit the needs of your organization.</p>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>Any users that you add to a sub-group automatically become members
of the parent group.</p>
</div></blockquote>
</div></blockquote>
<blockquote>
<div><p><img alt="Caution.png" src="../../_images/Caution.png" /> <strong>Caution:</strong></p>
<blockquote>
<div><p>You should avoid the creation of cyclic groups - groups whose
members include groups that contain their own parents - because it
can lead to unexpected behavior.</p>
</div></blockquote>
</div></blockquote>
<p>Refer to <a class="reference external" href="#Access_Control_and_Delegation">Access Control and
Delegation</a> for information on using
groups to define roles.</p>
<section id="creating-groups">
<span id="id15"></span><h2>Creating Groups<a class="headerlink" href="#creating-groups" title="Permalink to this heading">¶</a></h2>
<section id="using-the-web-interface-4">
<span id="id16"></span><h3>Using the Web Interface<a class="headerlink" href="#using-the-web-interface-4" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>On the IPA Home Page, click <strong>Add Group</strong> in the Tasks list to
display the <strong>Add Group</strong> page.</p></li>
<li><p>Enter a name and description for the group. The GID (Group ID) is
automatically generated by the IPA server.</p></li>
<li><p>If required, enter any users that you want to be members of this
group:</p>
<ol class="arabic simple">
<li><p>Enter the login name or other search term in the <strong>To Add</strong> field,
and click <strong>Find</strong>.</p></li>
<li><p>Locate the users that you want to be members of this group, and
click <strong>add</strong>.</p></li>
</ol>
</li>
<li><p>When you have finished adding members, click <strong>Add Group</strong>.</p></li>
</ol>
<p>If the group is successfully added, the server returns to the <strong>View
Group</strong> page, and displays details about the newly-added group.</p>
<p>The following diagram illustrates adding members to a new group.</p>
<p><a class="reference external" href="image:AddGroup.png">Adding members to a new group</a></p>
</section>
<section id="using-the-command-line-4">
<span id="id17"></span><h3>Using the Command Line<a class="headerlink" href="#using-the-command-line-4" title="Permalink to this heading">¶</a></h3>
<p>Use the <strong>ipa-addgroup</strong> command to add groups.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-addgroup
Group name: Engineering
Description: All members of engineering group
Engineering successfully added
</pre></div>
</div>
</section>
</section>
<section id="editing-groups">
<span id="id18"></span><h2>Editing Groups<a class="headerlink" href="#editing-groups" title="Permalink to this heading">¶</a></h2>
<p>You can edit any of the attributes that define a group, as well as add
or remove members. Some attributes are read-only by default, however you
can elect to edit these attributes if required.</p>
<section id="using-the-web-interface-5">
<span id="id19"></span><h3>Using the Web Interface<a class="headerlink" href="#using-the-web-interface-5" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Click <strong>Find Groups</strong> in the Tasks list to display the <strong>Find
Groups</strong> page.</p></li>
<li><p>Enter the name or a key word of the group that you want to edit in
the search field, and click <strong>Find Groups</strong>.</p></li>
<li><p>In the search results, click the name of the group that you want to
edit. The group is displayed on the <strong>View Group</strong> page. If the group
does not appear in the search results, try using broader search
terms.</p></li>
<li><p>Click <strong>Edit Group</strong> to display the <strong>Edit Group</strong> page. This
displays the various fields where you can edit group attributes.</p></li>
<li><p>Edit the group attributes as required, and click <strong>Update Group</strong>.
Note that if you want to change the Name or GID of the group, you
need to select the <strong>Edit Protected Fields</strong> checkbox.</p></li>
</ol>
<blockquote>
<div><p><img alt="Caution.png" src="../../_images/Caution.png" /> <strong>Caution:</strong></p>
<blockquote>
<div><p>You should not change the Group Name or GID unless absolutely
necessary, because it can have unexpected affects on permissions,
ACIs, and other aspects of IPA functionality.</p>
</div></blockquote>
<p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>You can click <strong>Cancel Edit</strong> at any time to cancel editing the
group and abandon any changes.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="using-the-command-line-5">
<span id="id20"></span><h3>Using the Command Line<a class="headerlink" href="#using-the-command-line-5" title="Permalink to this heading">¶</a></h3>
<p>Use the <strong>ipa-modgroup</strong> command to edit groups. Refer to the
<strong>ipa-modgroup</strong> man page for the various options available.</p>
</section>
</section>
<section id="activating-and-inactivating-groups">
<span id="id21"></span><h2>Activating and Inactivating Groups<a class="headerlink" href="#activating-and-inactivating-groups" title="Permalink to this heading">¶</a></h2>
<p>IPA groups can be set to a status of <em>Active</em> or <em>Inactive</em>. If you
inactivate a group, all of the members of that group are also
inactivated. This means that they cannot log in to IPA, change
passwords, or perform any other functions. The accounts within an
inactivated group still exist, but they are inaccessible.</p>
<p>This also applies to nested groups. If you inactivate a group, then any
groups within that group are also inactivated, as are their members. You
can override the cascading effect of inactivation by activating
individual users or groups.</p>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>You cannot inactivate the <em>admins</em> group.</p>
</div></blockquote>
</div></blockquote>
<section id="using-the-web-interface-6">
<span id="id22"></span><h3>Using the Web Interface<a class="headerlink" href="#using-the-web-interface-6" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Find the group that you want to edit as described
<a class="reference external" href="#Editing_Groups">above.</a></p></li>
<li><p>Click <strong>Edit Group</strong> to display the <strong>Edit Group</strong> page.</p></li>
<li><p>Select <strong>inactive</strong> in the <strong>Group Status</strong> drop-down list, and then
click <strong>Update Group</strong>.</p></li>
</ol>
</section>
<section id="using-the-command-line-6">
<span id="id23"></span><h3>Using the Command Line<a class="headerlink" href="#using-the-command-line-6" title="Permalink to this heading">¶</a></h3>
<p>Use the <strong>ipa-modgroup</strong> command to activate and inactivate groups.</p>
<p><strong>To inactivate the Engineering group:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-modgroup --set nsaccountlock=true Engineering
</pre></div>
</div>
<p><strong>To activate the Finance group:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-modgroup --set nsaccountlock=false Finance
</pre></div>
</div>
</section>
</section>
<section id="deleting-groups">
<span id="id24"></span><h2>Deleting Groups<a class="headerlink" href="#deleting-groups" title="Permalink to this heading">¶</a></h2>
<p>If you delete a group, only the immediate group is removed; members of
the group are not affected. That is, unlike inactivation, there is no
cascading effect when you delete a group.</p>
<p>Note that when you delete a group, any delegations that you might have
set up that rely on that group will also be removed. For example,
suppose you added an <em>Engineering Manager</em> group specifically to set up
delegations for the Engineering Manager. If you deleted the <em>Engineering
Manager</em> group, then those delegations would also be lost. Unlike with
inactivation, these cannot be retrieved. If you find that you need this
group and delegation again, you need to recreate them.</p>
<section id="using-the-web-interface-7">
<span id="id25"></span><h3>Using the Web Interface<a class="headerlink" href="#using-the-web-interface-7" title="Permalink to this heading">¶</a></h3>
<p><strong>To delete a group:</strong></p>
<ol class="arabic simple">
<li><p>Find the group that you want to delete as described
<a class="reference external" href="#Editing_Groups">above</a>.</p></li>
<li><p>Click <strong>Edit Group</strong> to display the <strong>Edit Group</strong> page.</p></li>
<li><p>Click <strong>Delete Group</strong>, and then click <strong>OK</strong>.</p></li>
</ol>
</section>
<section id="using-the-command-line-7">
<span id="id26"></span><h3>Using the Command Line<a class="headerlink" href="#using-the-command-line-7" title="Permalink to this heading">¶</a></h3>
<p>Use the <strong>ipa-delgroup</strong> command to delete groups.</p>
<p><strong>To delete the Engineering group:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /usr/sbin/ipa-delgroup Engineering
</pre></div>
</div>
</section>
</section>
</section>
<section id="managing-certificates-and-certificate-authorities">
<span id="id27"></span><h1>Managing Certificates and Certificate Authorities<a class="headerlink" href="#managing-certificates-and-certificate-authorities" title="Permalink to this heading">¶</a></h1>
<p>If you have your own or a preferred Certificate Authority (CA) and want
to use your own certificates, IPA provides the necessary tools to import
certificates for use by the Directory Server and HTTP Server. While not
a prerequisite for the correct operation of IPA, you should also save an
ASCII copy of your CA certificate as <code class="docutils literal notranslate"><span class="pre">/usr/share/ipa/html/ca.crt</span></code> to
ensure that customers download the correct certificate.</p>
<section id="installing-your-own-certificate">
<span id="id28"></span><h2>Installing Your Own Certificate<a class="headerlink" href="#installing-your-own-certificate" title="Permalink to this heading">¶</a></h2>
<p>Use the <strong>ipa-server-certinstall</strong> command to install your own
certificate. You can install the certificate for use by the Directory
Server, HTTP Server, or both.</p>
<p><strong>To install the certificate for use by the Directory Server:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># /usr/sbin/ipa-server-certinstall -d /path/to/pkcs12.p12</span>
</pre></div>
</div>
</section>
<section id="using-your-own-certificate-with-firefox">
<span id="id29"></span><h2>Using Your Own Certificate with Firefox<a class="headerlink" href="#using-your-own-certificate-with-firefox" title="Permalink to this heading">¶</a></h2>
<p>To continue using the Firefox auto-configuration feature, you need an
object-signing certificate, and you need to regenerate the
<code class="docutils literal notranslate"><span class="pre">/usr/share/ipa/html/configure.jar</span></code> file.</p>
<p><strong>Use the following series of commands to:</strong></p>
<ol class="arabic simple">
<li><p>Create a directory to host the certificate database.</p></li>
<li><p>Create the new certificate database.</p></li>
<li><p>Import the signing certificate.</p></li>
</ol>
<blockquote>
<div><figure class="align-default" id="id65">
<img alt="Note.png" src="../../_images/Note.png" />
<figcaption>
<p><span class="caption-text">Note.png</span><a class="headerlink" href="#id65" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Note:</strong> The following procedure assumes that the signing
certificate is provided as a PKCS#12 file.</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mkdir /tmp/signdb</span>
<span class="c1"># /usr/bin/certutil -N -d /tmp/signdb</span>
<span class="c1"># /usr/bin/pk12util -i /path/to/pkcs12.p12 -d /tmp/signdb</span>
</pre></div>
</div>
<p><strong>Use the following series of commands to:</strong></p>
<ol class="arabic simple">
<li><p>Make a temporary signing directory.</p></li>
<li><p>Copy the IPA javascript file to the temporary signing directory.</p></li>
<li><p>Use the certificate you created in the previous procedure to sign the
javascript and to regenerate the <code class="docutils literal notranslate"><span class="pre">configure.jar</span></code> file.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mkdir /tmp/sign</span>
<span class="c1"># cp /usr/share/ipa/html/preferences.html /tmp/sign</span>
<span class="c1"># /usr/bin/signtool -d /tmp/signdb -k Signing_cert_nickname -Z\</span>
 <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">ipa</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">configure</span><span class="o">.</span><span class="n">jar</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
</section>
</section>
<section id="managing-service-principals">
<span id="id30"></span><h1>Managing Service Principals<a class="headerlink" href="#managing-service-principals" title="Permalink to this heading">¶</a></h1>
<p>Apart from authenticating users, Kerberos can also provide
authentication for services that are accessed by users. For example, you
can use Kerberos to provide authentication for HTTP, SSH, and other
services. In this scenario, mutual authentication must occur between the
service and the KDC (rather than between the user and the KDC). That is,
each service must have a valid principal (the <em>service principal</em>) on
the server, and the service must use a shared secret to authenticate
against the KDC. This is true if the service is provided on the same
machine as the KDC, or on a separate machine.</p>
<section id="service-principals-and-key-tables-keytabs">
<span id="id31"></span><h2>Service Principals and Key Tables (keytabs)<a class="headerlink" href="#service-principals-and-key-tables-keytabs" title="Permalink to this heading">¶</a></h2>
<p>Clients use the service principal to tell the KDC which service they
need a ticket for. The KDC uses the service principal to provide a
secret key to the service when the service principal is created. Service
principals and their associated keys are stored in a <em>keytab</em> file.
Without an appropriate keytab the service has no way of authenticating a
client, and the KDC has no way of providing the client with a ticket.</p>
<p>It is important to understand the critical role that service principals
and their associated keys play, especially when those services are
accessed by multiple users. While a valid ticket exists for a specific
service, users can access that service using their Kerberos credentials.
For example, if a user tries to mount an NFS directory using Kerberos,
then both the NFS server and the user require a valid principal, and
share a secret key with the KDC. This is established during the IPA NFS
configuration on the server. If the secret key is replaced on the
server, for example, by getting a new keytab, then you need to ensure
that the new keytab is exported to any clients that need NFS mount
access to the server. Failure to export an updated keytab can cause
problems that are difficult to isolate. For example, existing service
connections may continue to function, but no new connections may be
possible.</p>
<blockquote>
<div><p><img alt="Caution.png" src="../../_images/Caution.png" /> <strong>Caution:</strong></p>
<blockquote>
<div><p>Clients attempting to mount NFS exports rely on the existence of a
valid principal and secret key on both the NFS server and the
client machine.</p>
</div></blockquote>
</div></blockquote>
<p>Service principals are typically released per service, although it is
possible for one service principal to be used for more than one service.</p>
</section>
<section id="creating-and-using-service-principals">
<span id="id32"></span><h2>Creating and Using Service Principals<a class="headerlink" href="#creating-and-using-service-principals" title="Permalink to this heading">¶</a></h2>
<p>You can use the WebUI to search for any issued service principals, and
also to create new service principals. For security and other reasons,
however, it is not possible to retrieve a keytab using the WebUI. This
has to be done either on the command line on the system where the
service is accessed, or on the IPA server itself, and the keytab then
exported to the client machine.</p>
<p>The following example demonstrates creating a service principal and
keytab on a client machine for the SSH service. The client machine is
<em>ipaclient.example.com</em> and the IPA server is <em>ipaserver.example.com</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># kinit admin</span>
<span class="c1"># ipa-addservice host/ipaclient.example.com@EXAMPLE.COM</span>
<span class="c1"># ipa-getkeytab -s ipaserver.example.com -p host/ipaclient.example.com -k /etc/krb5.keytab</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Notes:</strong></p>
<ul class="simple">
<li><p>The realm name is optional. The IPA server automatically appends
the Kerberos realm for which it is configured. You cannot specify
a different realm.</p></li>
<li><p>The hostname must resolve to a DNS A record in order to ensure
that it will work with Kerberos. You can use the <strong>–force</strong> flag
to force the creation of a principal should this prove necessary.</p></li>
<li><p>The <strong>ipa-getkeytab</strong> command is part of the <strong>``ipa-client``</strong>
package, which is only available for clients running Red Hat
Enterprise Linux 4 or 5, Fedora 7, 8, or 9. For other clients, you
need to use this procedure on the server and manually copy the
keytab to the client.</p></li>
<li><p>You can use the <strong>-e</strong> flag to include a comma-separated list of
encryption types to include in the keytab. This supercedes any
default encryption type. Refer to the <strong>ipa-getkeytab</strong> man page
for more information.</p></li>
</ul>
<p><img alt="Caution.png" src="../../_images/Caution.png" /> <strong>Caution:</strong></p>
<blockquote>
<div><p>The <strong>ipa-getkeytab</strong> command resets the secret for the specified
principal. This means that all other keytabs for that principal
are rendered invalid.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="configuring-nfs-on-the-ipa-server">
<span id="id33"></span><h2>Configuring NFS on the IPA Server<a class="headerlink" href="#configuring-nfs-on-the-ipa-server" title="Permalink to this heading">¶</a></h2>
<p>The following procedure describes how to configure NFS on the IPA server
and to set up an NFS service principal.</p>
<ol class="arabic simple">
<li><p>Configure the export directory.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mkdir /export</span>
<span class="c1"># chmod 777 /export</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Configure the <code class="docutils literal notranslate"><span class="pre">/etc/exports</span></code> file as follows:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">export</span>  <span class="o">*</span><span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">fsid</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">insecure</span><span class="p">,</span><span class="n">no_subtree_check</span><span class="p">)</span>
<span class="o">/</span><span class="n">export</span>  <span class="n">gss</span><span class="o">/</span><span class="n">krb5</span><span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">fsid</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">insecure</span><span class="p">,</span><span class="n">no_subtree_check</span><span class="p">)</span>
<span class="o">/</span><span class="n">export</span>  <span class="n">gss</span><span class="o">/</span><span class="n">krb5i</span><span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">fsid</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">insecure</span><span class="p">,</span><span class="n">no_subtree_check</span><span class="p">)</span>
<span class="o">/</span><span class="n">export</span>  <span class="n">gss</span><span class="o">/</span><span class="n">krb5p</span><span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">fsid</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">insecure</span><span class="p">,</span><span class="n">no_subtree_check</span><span class="p">)</span>
</pre></div>
</div>
<p>3. To enable secure NFS, add the following line to
<code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/nfs</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SECURE_NFS</span><span class="o">=</span><span class="n">yes</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Add a service principal and keytab for NFS.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-addservice nfs/ipaserver.example.com</span>
<span class="c1"># ipa-getkeytab -s ipaserver.example.com -p nfs/ipaserver.example.com -k /etc/krb5.keytab</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>The Linux NFS implementation still has limited encryption type
support. You may need to use the <strong>-e des-cbc-crc</strong> to the
<strong>ipa-getkeytab</strong> command for any <strong>nfs/&lt;FQDN&gt;</strong> service keytab
you want to set up, both on the server and on all clients. This
will instruct the KDC to generate only DES keys.</p>
</div></blockquote>
</div></blockquote>
<p>5. Run the following series of commands to reload the NFS configuration
and restart the required services:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># exportfs -a</span>
<span class="c1"># restart services</span>
<span class="c1"># service nfs restart</span>
<span class="c1"># service rpcgssd restart</span>
</pre></div>
</div>
</section>
</section>
<section id="access-control-and-delegation">
<span id="id34"></span><h1>Access Control and Delegation<a class="headerlink" href="#access-control-and-delegation" title="Permalink to this heading">¶</a></h1>
<p>IPA supports access control using a process known as <em>delegation</em>. This
provides a means of assigning different permissions to the various users
and groups that you create.</p>
<p>When the IPA server is initially configured, it creates an
administrative account named <strong>admin</strong>. You use this initial account to
create any further administrative or other accounts required by your
deployment.</p>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>The <strong>admin</strong> account cannot be deleted or renamed, nor can it be
removed from the <strong>admins</strong> group.</p>
</div></blockquote>
</div></blockquote>
<p>Normally you would delegate access control to a group, or <em>role</em>. For
example, you might create one group called “Engineering Manager” and
another called “Office Manager”. These would be dedicated groups for the
Engineering Manager and Office Manager respectively.</p>
<p>You would then create a delegation to specify the permissions associated
with each group. An Engineering Manager might be able to modify the
attributes of everyone in the Engineering group, and the Office Manager
would be able to change details related to the office, such as fax
numbers, office contacts, etc.</p>
<p>When you add the Engineering Manager to the Engineering Manager group,
they automatically gain all of the associated permissions. If the person
holding that position changes, you simply change the groups that that
user belongs to. There is no need to modify any other values.</p>
<section id="delegating-administrative-privileges">
<span id="id35"></span><h2>Delegating Administrative Privileges<a class="headerlink" href="#delegating-administrative-privileges" title="Permalink to this heading">¶</a></h2>
<p><strong>To delegate administrative privileges:</strong></p>
<ol class="arabic simple">
<li><p>Create the group to which you want to delegate administrative
privileges (the <em>source</em>).</p></li>
<li><p>Create the group over which this group should have administrative
privileges (the <em>target</em>).</p></li>
<li><p>On the IPA home page, click <strong>Delegations</strong> in the Tasks list to open
the <strong>Delegations</strong> page.</p></li>
<li><p>Click <strong>Add New Delegation</strong> to open the <strong>Add Delegation</strong> page.</p></li>
<li><p>In the <strong>Delegation Name</strong> field, type a descriptive name for the
delegation.</p></li>
<li><p>In the <strong>People in Group</strong> field, enter the CN of the group or type a
suitable search term and click <strong>Find</strong>. This is to determine the
<em>source</em>, or the group that will <em>receive</em> the delegation.</p></li>
<li><p>In the search results, click the required group name. If the required
group does not appear in the search results, try a different search
term to widen your search.</p></li>
<li><p>In the <strong>Can Modify</strong> list, select the appropriate check boxes for
the delegations that you want to apply. For example, you can specify
that this group can modify the home directory, login shell, and org
unit of its subjects.</p></li>
<li><p>In the <strong>For People in Group</strong> field, enter the CN of the group or
type a suitable search term and click <strong>Find</strong>. This is to determine
the group that will be subject to the delegation.</p></li>
<li><p>Click <strong>Add Delegation</strong> to create the delegation.</p></li>
</ol>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>You can only create a delegation for one target at a time. If you
require that a source have administrative control over several
targets, you need to create a separate delegation for each target.</p>
</div></blockquote>
</div></blockquote>
<p>The following diagram illustrates creating a delegation for the
Engineering Manager over the Engineering group.</p>
<p><a class="reference external" href="image:AddDelegation.png">Adding a delegation to a group</a></p>
</section>
<section id="configuring-host-based-access-control">
<span id="id36"></span><h2>Configuring Host-Based Access Control<a class="headerlink" href="#configuring-host-based-access-control" title="Permalink to this heading">¶</a></h2>
<p>You can configure Red Hat Enterprise Linux and Fedora to allow or deny
access to IPA resources and services based on the configuration of the
host from which access is attempted. This requires modification to the
<code class="docutils literal notranslate"><span class="pre">/etc/security/access.conf</span></code> and <code class="docutils literal notranslate"><span class="pre">/etc/pam.d/system-auth</span></code> files, as
described below:</p>
<p>1. Modify the <code class="docutils literal notranslate"><span class="pre">/etc/security/access.conf</span></code> file to include the
following lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="p">:</span> <span class="n">root</span> <span class="p">:</span> <span class="n">ALL</span>
<span class="o">+</span> <span class="p">:</span> <span class="n">ipausers</span> <span class="p">:</span> <span class="n">ALL</span>
<span class="o">-</span> <span class="p">:</span> <span class="n">ALL</span> <span class="p">:</span> <span class="n">ALL</span>
</pre></div>
</div>
<p>2. Modify the <code class="docutils literal notranslate"><span class="pre">/etc/pam.d/system-auth</span></code> file to include the following
line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">account</span> <span class="n">required</span> <span class="n">pam_access</span><span class="o">.</span><span class="n">so</span>
</pre></div>
</div>
<p>This configuration specifies that:</p>
<ul class="simple">
<li><p>The root user can log in.</p></li>
<li><p>All IPA users can log in.</p></li>
<li><p>IPA admins can not log in.</p></li>
</ul>
</section>
</section>
<section id="managing-ipa-policy">
<span id="id37"></span><h1>Managing IPA Policy<a class="headerlink" href="#managing-ipa-policy" title="Permalink to this heading">¶</a></h1>
<p>The IPA policy specifies various constraints on the way that users can
interact with IPA system as a whole. This affects their user accounts,
the details that they can view and edit, minimum password requirements,
etc., and also the range of searches that they can perform.</p>
<section id="specifying-search-settings">
<span id="id38"></span><h2>Specifying Search Settings<a class="headerlink" href="#specifying-search-settings" title="Permalink to this heading">¶</a></h2>
<p>You can configure various aspects of the IPA search functionality to
suit your deployment. For example, you can restrict the number of fields
that a user can base a search on, or limit the number of records
returned for any particular search.</p>
<p>IPA supports the following search configuration attributes:</p>
<ul class="simple">
<li><p><strong>Search Time Limit:</strong> The maximum time, in seconds, that a search
will run before failing.</p></li>
<li><p><strong>Search Records Limit:</strong> The maximum number of records that a search
can return. Set this value to zero (0) to specify no limit. The
directory server limit (the default value is 2000) still applies.</p></li>
<li><p><strong>User Search Fields:</strong> This specifies the fields to search within
user details for the values entered by a user.</p></li>
<li><p><strong>Group Search Fields:</strong> This specifies the fields to search within
group details for the values entered by a user.</p></li>
</ul>
</section>
<section id="specifying-the-password-policy">
<span id="id39"></span><h2>Specifying the Password Policy<a class="headerlink" href="#specifying-the-password-policy" title="Permalink to this heading">¶</a></h2>
<section id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h3>
<p>IPA supports the specification of various password attributes that help
to ensure the security of your system, and also that of individual user
accounts. You can specify the password lifetime, length, and the types
of characters required in a password, all as part of the IPA Password
Policy.</p>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>In IPA 1.0, the password policy is enforced by the KDC. Only a
limited number of attributes are currently supported, however this
will be extended in later versions.</p>
<p>Because the password policy is enforced by the KDC, any further
policy specifications that you implement as part of the Directory
Server password policy will not be visible in IPA, and neither
will they be enforced.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="exceptions-to-the-password-policy">
<span id="id40"></span><h3>Exceptions to the Password Policy<a class="headerlink" href="#exceptions-to-the-password-policy" title="Permalink to this heading">¶</a></h3>
<p>Different rules apply to changing passwords, depending on your login
credentials.</p>
<section id="changing-passwords-as-the-directory-manager">
<span id="id41"></span><h4>Changing Passwords as the Directory Manager<a class="headerlink" href="#changing-passwords-as-the-directory-manager" title="Permalink to this heading">¶</a></h4>
<p>If you reset a password using “cn=Directory Manager” credentials (only
possible if you manually perform an LDAP password change operation) then
you override any checks and the password is set to whatever you specify.
The IPA password policy is ignored.</p>
</section>
<section id="changing-passwords-as-the-ipa-administrator">
<span id="id42"></span><h4>Changing Passwords as the IPA Administrator<a class="headerlink" href="#changing-passwords-as-the-ipa-administrator" title="Permalink to this heading">¶</a></h4>
<p>If you reset a password using “admin” credentials (that is, as part of
the <strong>admins</strong> group), the IPA password policy is ignored, but the
expiration date is set to “now”. This means that the user is forced to
change their password immediately, and the password policy is then
enforced. This is also true for users who have had password changing
rights delegated to them.</p>
<p>This is done so that the administrator can easily create users with
“default” passwords and reset user’s passwords, but will not know the
actual, final password entered by the user. Further, any password that
is trasmitted from the administrator to the user, even over insecure
channels, is a temporary password. Consequently, it is not critical if
it is accidentally disclosed, provided that the user promptly resets it.</p>
</section>
<section id="changing-passwords-as-a-regular-user">
<span id="id43"></span><h4>Changing Passwords as a Regular User<a class="headerlink" href="#changing-passwords-as-a-regular-user" title="Permalink to this heading">¶</a></h4>
<p>If you are logged in as a regular user (that is, you are not part of the
<strong>admins</strong> group, or possessed of any elevated privileges), then you can
only change your own password, and these changes are always subject to
the IPA password policy.</p>
</section>
</section>
<section id="editing-the-password-policy">
<span id="id44"></span><h3>Editing the Password Policy<a class="headerlink" href="#editing-the-password-policy" title="Permalink to this heading">¶</a></h3>
<p>You can use either the Web interface or the command-line to edit the IPA
password policy. However, you can only edit those attributes supported
by IPA.</p>
<section id="using-the-web-interface-8">
<span id="id45"></span><h4>Using the Web Interface<a class="headerlink" href="#using-the-web-interface-8" title="Permalink to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>Click <strong>Manage Policy</strong> in the Tasks list, and then click <strong>IPA
Policy</strong> to display the <strong>Manage IPA Policy</strong> page.</p></li>
<li><p>Click <strong>Edit Policy</strong> to display the <strong>Edit IPA Policy</strong> page. This
displays the various fields where you can edit different aspects of
the IPA policy.</p></li>
<li><p>In the <strong>Password Policy</strong> section, edit the password attributes as
required, and click <strong>Update Policy</strong>.</p></li>
</ol>
</section>
<section id="using-the-command-line-8">
<span id="id46"></span><h4>Using the Command-Line<a class="headerlink" href="#using-the-command-line-8" title="Permalink to this heading">¶</a></h4>
<p>Use the <strong>ipa-pwpolicy</strong> command to modify IPA password policy details.
This command uses the following syntax:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">ipa-pwpolicy</span> <span class="pre">[--maxlife</span> <span class="pre">days]</span> <span class="pre">[--minlife</span> <span class="pre">hours]</span> <span class="pre">[--history</span> <span class="pre">number]</span> <span class="pre">[--minclasses</span> <span class="pre">number]</span> <span class="pre">[--minlength</span> <span class="pre">number]</span></code></p>
</div></blockquote>
<p>For example, to update the minimum password length to 10 characters, and
to specify that no history of passwords be kept:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">/usr/sbin/ipa-pwpolicy</span> <span class="pre">--minlength</span> <span class="pre">10</span> <span class="pre">--history</span> <span class="pre">0</span></code></p>
</div></blockquote>
<p>Refer to the next section for information on password policy attributes.</p>
<p>Refer to the <strong>ipa-pwpolicy</strong> man page for more information on this
command.</p>
</section>
</section>
<section id="password-policy-attributes">
<span id="id47"></span><h3>Password Policy Attributes<a class="headerlink" href="#password-policy-attributes" title="Permalink to this heading">¶</a></h3>
<p>The password policy is enforced by the <strong>pwd_extop slapi</strong> plug-in. IPA
1.0 supports the following password policy attributes:</p>
<ul>
<li><p><strong>Minimum Password Lifetime (krbMinPwdLife):</strong> The minimum period of
time, in hours, that a user’s password must be in effect before the
user can change it. The default value is one hour.</p>
<p>You can use this attribute to prevent users from changing their
password to a “temporary” value and then immediately changing it back
to the original value.</p>
</li>
<li><p><strong>Maximum Password Lifetime (krbMaxPwdLife):</strong> The maximum period of
time, in days, that a user’s password can be in effect before it must
be changed. The default value is 90 days.</p></li>
<li><p><strong>Minimum Number of Character Classes (krbPwdMinDiffChars):</strong> The
minimum number of different classes, or types, of character that must
exist in a password before it is considered valid. The default value
is zero (0).</p>
<p>For example, setting <strong>krbPwdMinDiffChars = 3</strong> requires that
passwords contain at least one character from three of the supported
classes.
The following character classes are supported:</p>
<ul class="simple">
<li><p>Upper-case characters</p></li>
<li><p>Lower-case characters</p></li>
<li><p>Digits</p></li>
<li><p>Special characters (for example, punctuation)</p></li>
</ul>
<p>The following special classes also exist:</p>
<ul>
<li><p>Number of repeated characters</p>
<p>This weights in the opposite direction, so that if you have too
many repeated characters you will not meet the quorum to satisfy
the “level” expressed by <strong>krbPwdMinDiffChars</strong></p>
</li>
</ul>
</li>
<li><p><strong>Minimum Length of Password (krbPwdMinLength):</strong> The minimum number
of characters that must exist in a password before it is considered
valid. The default value is eight characters.</p></li>
<li><p><strong>Password History Size (krbPwdHistoryLength):</strong> The number of
previous passwords that IPA stores, and which a user is prevented
from using. For example, if you set this value to 10, the IPA server
prevents a user from reusing any of their previous 10 passwords. The
default value is zero (0) (disable password history).</p></li>
</ul>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>If password history checking is enabled, and a user attempts to
use one of the passwords in the history list, the error message
returned by the system may be misleading. For example, you may see
the following error:</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>A database error occurred: Constraint violation: Password fails to meet minimum strength criteria

This is because ``python-ldap`` prevents the retrieval of extended
information on password policy failures over LDAP. There is
currently no workaround for this limitation.
</pre></div>
</div>
</div></blockquote>
<p>Refer to <a class="reference external" href="http://www.redhat.com/docs/manuals/enterprise/RHEL-5-manual/en-US/RHEL510/Deployment_Guide/s1-wstation-pass.html">Password
Security</a>
on <a class="reference external" href="http://www.redhat.com/docs/">http://www.redhat.com/docs/</a> for information on implementing a sound
password security policy for your organization.</p>
</section>
<section id="notifying-users-of-password-expiration">
<span id="id48"></span><h3>Notifying Users of Password Expiration<a class="headerlink" href="#notifying-users-of-password-expiration" title="Permalink to this heading">¶</a></h3>
<p>Future versions of IPA will support the concept of automatic user
notification when passwords are due to expire. This feature is not
available in IPA 1.0. You can, however, manually search for passwords
that are due to expire by a specified date.</p>
<p>For example, to retrieve all user entries whose password is due to
expire before March 1st, 2008, run the following command:</p>
<blockquote>
<div><p>$ ldapsearch -Y GSSAPI -b “cn=users,cn=accounts,dc=example,dc=com”
‘(krbPasswordExpiration&lt;=20080301000000Z)’</p>
</div></blockquote>
</section>
<section id="using-password-authentication">
<span id="id49"></span><h3>Using Password Authentication<a class="headerlink" href="#using-password-authentication" title="Permalink to this heading">¶</a></h3>
<p>If you use password authentication (no GSSAPI authentication, no ticket
on the client) with a new user or a user whose password has expired, you
need to enable Challenge-Response authentication. Otherwise, the
password changing dialog will not display.</p>
<p>This is not enabled by default because some older SSH clients may not
support Challenge-Response authentication, and it is needed only if the
password has expired.</p>
<p><strong>To enable Challenge-Response authentication:</strong></p>
<ul class="simple">
<li><p>Set ChallengeResponseAuthentication to “yes” in
<code class="docutils literal notranslate"><span class="pre">/etc/ssh/sshd_config</span></code></p></li>
</ul>
</section>
<section id="using-local-logins">
<span id="id50"></span><h3>Using Local Logins<a class="headerlink" href="#using-local-logins" title="Permalink to this heading">¶</a></h3>
<p>The default settings specified by the IPA installation script include
timeout settings that still allow local logins to succeed if the client
cannot access the IPA server. These settings are specified in the
<code class="docutils literal notranslate"><span class="pre">/etc/ldap.conf</span></code> file, and can be tuned to suit your particular
deployment. A typical deployment would normally include two or more
servers for redundancy, and so this would not normally be a problem.</p>
<blockquote>
<div><p><img alt="Caution.png" src="../../_images/Caution.png" /> <strong>Caution:</strong></p>
<blockquote>
<div><p>These timeout settings are only set on operating systems that
support the IPA installation script. On other operating systems,
you need to specify these values manually. Failure to do so can
result in the inability to log in to the machine if no IPA servers
are available.</p>
</div></blockquote>
</div></blockquote>
</section>
</section>
<section id="specifying-user-settings">
<span id="id51"></span><h2>Specifying User Settings<a class="headerlink" href="#specifying-user-settings" title="Permalink to this heading">¶</a></h2>
<p>You can specify a range of attributes that are automatically applied to
each new user account that you create. Any changes that you make to the
default settings only apply to newly created accounts; existing accounts
are not affected.</p>
<section id="using-the-web-interface-9">
<span id="id52"></span><h3>Using the Web Interface<a class="headerlink" href="#using-the-web-interface-9" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Click <strong>Manage Policy</strong> in the Tasks list, and then click <strong>IPA
Policy</strong> to display the <strong>Manage IPA Policy</strong> page.</p></li>
<li><p>Click <strong>Edit Policy</strong> to display the <strong>Edit IPA Policy</strong> page. This
displays the various fields where you can edit different aspects of
the IPA policy.</p></li>
<li><p>In the <strong>User Settings</strong> section, edit the user setting attributes as
required, and then click <strong>Update Policy</strong>.</p></li>
</ol>
<figure class="align-default" id="id66">
<img alt="Editing the default user settings for the IPA Policy" src="../../_images/EditUserSettings.png" />
<figcaption>
<p><span class="caption-text">Editing the default user settings for the IPA Policy</span><a class="headerlink" href="#id66" title="Permalink to this image">¶</a></p>
<div class="legend">
<p><strong>Editing the default user settings for the IPA Policy.</strong></p>
</div>
</figcaption>
</figure>
</section>
<section id="user-setting-attributes">
<span id="id53"></span><h3>User Setting Attributes<a class="headerlink" href="#user-setting-attributes" title="Permalink to this heading">¶</a></h3>
<p>IPA supports the following User Setting attributes:</p>
<ul class="simple">
<li><p><strong>Max. Username Length:</strong> Maximum length of any username. Default is
8.</p></li>
<li><p><strong>Root for Home Directories:</strong> The root directory for all users’ home
directories. Default is <code class="docutils literal notranslate"><span class="pre">/home</span></code></p></li>
<li><p><strong>Default Shell:</strong> The default shell for all user accounts. Default
is <code class="docutils literal notranslate"><span class="pre">/bin/sh</span></code></p></li>
<li><p><strong>Default User Group:</strong> The default group to which all newly created
accounts are added. The default is <strong>ipausers</strong>, which is
automatically created during IPA server installation process.</p></li>
<li><p><strong>Default E-mail Domain:</strong> The default domain used to create e-mail
addresses for all newly created accounts. The default is the domain
to which the IPA server belongs.</p></li>
<li><p><strong>Default User Object Classes:</strong> The default list of object classes
that can be used to add attributes to user accounts.</p></li>
<li><p><strong>Default Group Object Classes:</strong> The default list of object classes
that can be used to add attributes to groups.</p></li>
</ul>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>The default root directory for users’ home directories is
<code class="docutils literal notranslate"><span class="pre">/home</span></code>, but it is the responsibility of the system
administrator to ensure that whatever value is specified for this
attribute is actually available.</p>
<p>Red Hat Enterprise Linux and most other Linux distributions
include a pam module called <em>pam_mkhomedir</em> that can be used to
automatically create a home directory if one does not exist for
the user authenticating against the system. IPA does not force the
use of this module because it may try to create home directories
even when the shared storage is simply not available. It is the
responsibility of the system administrator to activate this module
on the clients if needed.</p>
<p>If a suitable directory and mechanism are not available for the
creation of home directories, users may not be able to log in
successfully.</p>
</div></blockquote>
</div></blockquote>
</section>
</section>
</section>
<section id="managing-ipa-replicas">
<span id="id54"></span><h1>Managing IPA Replicas<a class="headerlink" href="#managing-ipa-replicas" title="Permalink to this heading">¶</a></h1>
<p>Refer to <a class="reference external" href="Obsolete:InstallAndDeploy#Managing_Multi-Master_Replication">Managing Multi-Master
Replication</a>
for information on this topic.</p>
</section>
<section id="configuring-automount">
<span id="id55"></span><h1>Configuring automount<a class="headerlink" href="#configuring-automount" title="Permalink to this heading">¶</a></h1>
<p>This chapter was developed from the information provided in the
<a class="reference external" href="http://directory.fedoraproject.org/wiki/Howto:Automount">Automount
Howto</a> on
the Fedora Directory Server project page. It is a work in progress and
should not be considered authoritative.</p>
<p>Some preliminary testing has been done on Fedora 9 and Solaris 10 x86
clients with a freeIPA 1.2 server.</p>
<section id="automount-issues">
<span id="id56"></span><h2>Automount Issues<a class="headerlink" href="#automount-issues" title="Permalink to this heading">¶</a></h2>
<section id="additional-schema-required-for-some-systems">
<span id="id57"></span><h3>Additional Schema Required for Some Systems<a class="headerlink" href="#additional-schema-required-for-some-systems" title="Permalink to this heading">¶</a></h3>
<p>If you are supporting Solaris clients, you will need the 2307bis style
automount schema, although Sun’s version is NOT identical to the one at
<a class="reference external" href="http://people.redhat.com/nalin/schema/autofs.schema">http://people.redhat.com/nalin/schema/autofs.schema</a>.</p>
<p>This is the recommended schema for IPA:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>dn: cn=schema
attributeTypes:
  ( 1.3.6.1.1.1.1.31 NAME &#39;automountMapName&#39;
    DESC &#39;automount Map Name&#39;
    EQUALITY caseExactIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE
    X-ORIGIN &#39;RFC 2307bis&#39; )
attributeTypes:
  ( 1.3.6.1.1.1.1.32 NAME &#39;automountKey&#39;
    DESC &#39;Automount Key value&#39;
    EQUALITY caseExactIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE
    X-ORIGIN &#39;RFC 2307bis&#39; )
attributeTypes:
  ( 1.3.6.1.1.1.1.33 NAME &#39;automountInformation&#39;
    DESC &#39;Automount information&#39;
    EQUALITY caseExactIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE
    X-ORIGIN &#39;RFC 2307bis&#39; )
objectClasses:
  ( 1.3.6.1.1.1.2.16 NAME &#39;automountMap&#39;
    DESC &#39;Automount Map information&#39; SUP top
    STRUCTURAL MUST automountMapName MAY description
    X-ORIGIN &#39;RFC 2307bis&#39; )
objectClasses:
  ( 1.3.6.1.1.1.2.17 NAME &#39;automount&#39;
    DESC &#39;Automount information&#39; SUP top STRUCTURAL
    MUST ( automountKey $ automountInformation ) MAY description
    X-ORIGIN &#39;RFC 2307bis&#39; )
</pre></div>
</div>
</section>
</section>
<section id="configuration-steps-in-detail">
<span id="id58"></span><h2>Configuration Steps in Detail<a class="headerlink" href="#configuration-steps-in-detail" title="Permalink to this heading">¶</a></h2>
<p>The following sections provide instructions on how to create the autofs
mount entries for LDAP that will work in at least Linux and Solaris
clients.</p>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">¶</a></h3>
<p>Before you begin, ensure that:</p>
<ul>
<li><p>The IPA server is up and running.</p></li>
<li><p>Your domain is example.com.</p></li>
<li><p>You have root access to the server where you want autofs to work.
(For the purposes of this exercise, this server is called
nfsserver.example.com)</p></li>
<li><p>The nfsserver.example.com server can communicate with the ldap server
for users/groups.</p></li>
<li><p>The NFS service is running on nfsserver.example.com. Configuring NFS
is beyond the scope of this document, but an entry in the
<code class="docutils literal notranslate"><span class="pre">/etc/exports</span></code> file looks something like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">/home</span> <span class="pre">192.168.1.0/16(rw,fsid=0,insecure,no_subtree_check,sync,anonuid=65534,anongid=65534)</span></code></p>
</li>
</ul>
<p>Test from the command line that you can mount the <code class="docutils literal notranslate"><span class="pre">/home</span></code> directory.
This helps to eliminate suspects if the configuration does not work.</p>
</section>
<section id="install-the-schema">
<span id="id59"></span><h3>Install the Schema<a class="headerlink" href="#install-the-schema" title="Permalink to this heading">¶</a></h3>
<p>Put the above schema into the file
<code class="docutils literal notranslate"><span class="pre">/etc/dirsrv/slapd-INSTANCE/schema/75autofs.ldif</span></code> and restart your
server.</p>
<p>For this to apply to any future Directory Server instances you may
create also put this into <code class="docutils literal notranslate"><span class="pre">/etc/dirsrv/schema</span></code>.</p>
<p>Alternatively you can load the schema with ldapmodify.</p>
<p>Restart the Directory Server to pick up this file.</p>
</section>
<section id="creating-auto-master">
<span id="id60"></span><h3>Creating auto.master<a class="headerlink" href="#creating-auto-master" title="Permalink to this heading">¶</a></h3>
<p>Now that the schema is loaded you can create the auto.master map. On
Solaris this is referred to as auto_master but we can map that name
later.</p>
<p>The first step is to create the top-level entry to store automount maps.</p>
<p>These entries can be added with:
<code class="docutils literal notranslate"><span class="pre">ldapmodify</span> <span class="pre">-D</span> <span class="pre">&quot;cn=Directory</span> <span class="pre">Manager&quot;</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dn</span><span class="p">:</span> <span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">nsContainer</span>
<span class="n">cn</span><span class="p">:</span> <span class="n">automount</span>
</pre></div>
</div>
<p>Now create the auto.master map:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dn</span><span class="p">:</span> <span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">master</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">automountMap</span>
<span class="n">automountmapname</span><span class="p">:</span> <span class="n">auto</span><span class="o">.</span><span class="n">master</span>
</pre></div>
</div>
<p>Now create an automount map under auto.master for <code class="docutils literal notranslate"><span class="pre">/home</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dn</span><span class="p">:</span> <span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">home</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">automountMap</span>
<span class="n">automountMapName</span><span class="p">:</span> <span class="n">auto</span><span class="o">.</span><span class="n">home</span>
</pre></div>
</div>
<p>This entry informs autofs where to get the mount information for
<code class="docutils literal notranslate"><span class="pre">/home</span></code></p>
</section>
<section id="creating-auto-home">
<span id="id61"></span><h3>Creating auto.home<a class="headerlink" href="#creating-auto-home" title="Permalink to this heading">¶</a></h3>
<p>Create an automount key for auto.home:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dn</span><span class="p">:</span> <span class="n">automountkey</span><span class="o">=*</span><span class="p">,</span><span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">home</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">automount</span>
<span class="n">automountKey</span><span class="p">:</span> <span class="o">*</span>
<span class="n">automountInformation</span><span class="p">:</span> <span class="n">nfsserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/&amp;</span>

<span class="n">dn</span><span class="p">:</span> <span class="n">automountkey</span><span class="o">=/</span><span class="n">home</span><span class="p">,</span><span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">master</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">automount</span>
<span class="n">automountKey</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span>
<span class="n">automountInformation</span><span class="p">:</span> <span class="n">auto</span><span class="o">.</span><span class="n">home</span>
</pre></div>
</div>
<p>This creates a wild-card map so that any user that logs in will have
<code class="docutils literal notranslate"><span class="pre">/home/username</span></code> mounted for them.</p>
</section>
<section id="linux-autofs">
<span id="id62"></span><h3>Linux autofs<a class="headerlink" href="#linux-autofs" title="Permalink to this heading">¶</a></h3>
<p>Edit the <code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/autofs</span></code> file and enable the following lines
to tell autofs what attributes to search for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># Other common LDAP nameing</span>
<span class="c1">#</span>
<span class="n">MAP_OBJECT_CLASS</span><span class="o">=</span><span class="s2">&quot;automountMap&quot;</span>
<span class="n">ENTRY_OBJECT_CLASS</span><span class="o">=</span><span class="s2">&quot;automount&quot;</span>
<span class="n">MAP_ATTRIBUTE</span><span class="o">=</span><span class="s2">&quot;automountMapName&quot;</span>
<span class="n">ENTRY_ATTRIBUTE</span><span class="o">=</span><span class="s2">&quot;automountKey&quot;</span>
<span class="n">VALUE_ATTRIBUTE</span><span class="o">=</span><span class="s2">&quot;automountInformation&quot;</span>
</pre></div>
</div>
<p>You’ll also need to tell it which LDAP server to use and what the search
basedn is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LDAP_URI</span><span class="o">=</span><span class="s2">&quot;ldap://ipa.example.com&quot;</span>

<span class="n">SEARCH_BASE</span><span class="o">=</span><span class="s2">&quot;cn=automount,dc=example,dc=com&quot;</span>
</pre></div>
</div>
<p>Save the file and restart autofs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@remote_system</span> <span class="o">~</span><span class="p">]</span><span class="c1"># service autofs restart</span>
</pre></div>
</div>
<p>Test the configuration by getting a directory listing of a user:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@remote_system</span> <span class="o">~</span><span class="p">]</span><span class="c1"># ls /home/someuser</span>
</pre></div>
</div>
<p>If this does not mount the remote filesystem check the
<code class="docutils literal notranslate"><span class="pre">/var/log/messages</span></code> file for errors or other indications of what the
problem might be. You can also increase the debug level in the
<code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/autofs</span></code> file by setting LOGGING to debug.</p>
</section>
<section id="solaris-automount">
<span id="id63"></span><h3>Solaris automount<a class="headerlink" href="#solaris-automount" title="Permalink to this heading">¶</a></h3>
<p>If the NFS server is a Linux server, first tell Solaris that the maximum
supported NFS version is 3 by editing <code class="docutils literal notranslate"><span class="pre">/etc/default/nfs</span></code> and setting
<code class="docutils literal notranslate"><span class="pre">NFS_CLIENT_VERSMAX=3</span></code></p>
<p>You will be using the native nss_ldap to do the automount mapping.</p>
<p>We will be doing an anonymous bind to the IPA Directory Server. The Sun
automount server needs access to the VLV control so anonymous access is
needed. This command comes from
<a class="reference external" href="http://docs.sun.com/app/docs/doc/819-5201/6n7a588i7?l=ja&amp;a=view">http://docs.sun.com/app/docs/doc/819-5201/6n7a588i7?l=ja&amp;a=view</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ldapmodify -D &quot;cn=Directory Manager&quot; ipa.example.com</span>
<span class="n">dn</span><span class="p">:</span> <span class="n">oid</span><span class="o">=</span><span class="mf">2.16.840.1.113730.3.4.9</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">features</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">config</span>
<span class="n">changetype</span><span class="p">:</span> <span class="n">modify</span>
<span class="n">add</span><span class="p">:</span> <span class="n">aci</span>
<span class="n">aci</span><span class="p">:</span> <span class="p">(</span><span class="n">targetattr</span> <span class="o">!=</span><span class="s2">&quot;aci&quot;</span><span class="p">)</span> <span class="p">(</span><span class="n">version</span> <span class="mf">3.0</span><span class="p">;</span> <span class="n">acl</span> <span class="s2">&quot;VLV Request Control&quot;</span><span class="p">;</span> <span class="n">allow</span> <span class="p">(</span><span class="n">compare</span><span class="p">,</span><span class="n">read</span><span class="p">,</span><span class="n">search</span><span class="p">)</span> <span class="n">userdn</span> <span class="o">=</span> <span class="s2">&quot;ldap:///anyone&quot;</span><span class="p">;</span> <span class="p">)</span>
</pre></div>
</div>
<p>Configure your machine to use LDAP manually with ldapclient:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ldapclient -v manual -a authenticationMethod=none \
 -a defaultSearchBase=dc=example,dc=com \
 -a defaultServerList=ipa.example.com \
 -a serviceSearchDescriptor=passwd:cn=users,cn=accounts,dc=example,dc=com \
 -a serviceSearchDescriptor=group:cn=groups,cn=compat,dc=example,dc=com \
 -a serviceSearchDescriptor=auto_master:automountMapName=auto.master,cn=automoun
t,dc=example,dc=com?one \
 -a serviceSearchDescriptor=auto_home:automountMapName=auto.home,cn=automount,dc
=example,dc=com?one \
 -a objectClassMap=shadow:shadowAccount=posixAccount \
 -a searchTimelimit=15 \
 -a bindTimeLimit=5
</pre></div>
</div>
<p>Now enable automount:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># svcadm enable svc:/system/filesystem/autofs</span>
</pre></div>
</div>
<p>You can test if things are working first with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ldaplist -l auto_master</span>
<span class="n">dn</span><span class="p">:</span> <span class="n">automountkey</span><span class="o">=/</span><span class="n">home</span><span class="p">,</span><span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">master</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
        <span class="n">objectClass</span><span class="p">:</span> <span class="n">automount</span>
        <span class="n">objectClass</span><span class="p">:</span> <span class="n">top</span>
        <span class="n">automountKey</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span>
        <span class="n">automountInformation</span><span class="p">:</span> <span class="n">auto</span><span class="o">.</span><span class="n">home</span>
</pre></div>
</div>
<p>And then with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ls /home/someuser</span>
</pre></div>
</div>
<p>Assuming you don’t already have a filesystem on /home then a directory
listing of /home/someuser should appear.</p>
<p>Running <code class="docutils literal notranslate"><span class="pre">automount</span> <span class="pre">-v</span></code> will show if there are any conflicts such as
already mounted directories.</p>
</section>
<section id="auto-direct">
<h3>auto.direct<a class="headerlink" href="#auto-direct" title="Permalink to this heading">¶</a></h3>
<p>To add a direct mount configuration, add the following entries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dn</span><span class="p">:</span> <span class="n">automountkey</span><span class="o">=/-</span><span class="p">,</span><span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">master</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">automount</span>
<span class="n">automountKey</span><span class="p">:</span> <span class="s1">&#39;/-&#39;</span>
<span class="n">automountInformation</span><span class="p">:</span> <span class="n">auto</span><span class="o">.</span><span class="n">direct</span>

<span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">direct</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">automountMap</span>
<span class="n">automountMapName</span><span class="p">:</span> <span class="n">auto</span><span class="o">.</span><span class="n">direct</span>
</pre></div>
</div>
<p>To add a mount to this direct map for the directory /share you’d add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dn</span><span class="p">:</span> <span class="n">automountkey</span><span class="o">=/</span><span class="n">share</span><span class="p">,</span><span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">direct</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">automount</span>
<span class="n">automountKey</span><span class="p">:</span> <span class="o">/</span><span class="n">share</span>
<span class="n">automountInformation</span><span class="p">:</span> <span class="n">nfsserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="o">/</span><span class="n">share</span>
</pre></div>
</div>
<p>On Solaris you’d need to augment the ldapclient command with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-a serviceSearchDescriptor=auto_direct:automountMapName=auto.direct,cn=automount,dc=example,dc=com?one \
</pre></div>
</div>
</section>
<section id="indirect-maps">
<span id="id64"></span><h3>indirect maps<a class="headerlink" href="#indirect-maps" title="Permalink to this heading">¶</a></h3>
<p>Here is an example of an indirect map for /usr/man. We provide one map,
/usr/man/man1.</p>
<p>These three entries provide:</p>
<ol class="arabic simple">
<li><p>A new automount map named auto.man</p></li>
<li><p>Adds auto.man to auto.master on the mount point /usr/man</p></li>
<li><p>Adds an indirect mount of man1 to auto.man</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dn</span><span class="p">:</span> <span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">man</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">automountMap</span>
<span class="n">automountMapName</span><span class="p">:</span> <span class="n">auto</span><span class="o">.</span><span class="n">man</span>

<span class="n">dn</span><span class="p">:</span> <span class="n">automountkey</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">man</span><span class="p">,</span><span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">master</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">automount</span>
<span class="n">automountKey</span><span class="p">:</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">man</span>
<span class="n">automountInformation</span><span class="p">:</span> <span class="n">auto</span><span class="o">.</span><span class="n">man</span>

<span class="n">dn</span><span class="p">:</span> <span class="n">automountkey</span><span class="o">=</span><span class="n">man1</span><span class="p">,</span><span class="n">automountmapname</span><span class="o">=</span><span class="n">auto</span><span class="o">.</span><span class="n">man</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">automount</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">automount</span>
<span class="n">automountKey</span><span class="p">:</span> <span class="n">man1</span>
<span class="n">automountInformation</span><span class="p">:</span> <span class="n">nfsserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="o">/</span><span class="n">export</span><span class="o">/</span><span class="n">manpages</span><span class="o">/</span><span class="n">man1</span>
</pre></div>
</div>
<p>On Solaris you’d need to augment the ldapclient command with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-a serviceSearchDescriptor=auto_man:automountMapName=auto.man,cn=automount,dc=example,dc=com?one \
</pre></div>
</div>
</section>
<section id="links">
<h3>Links<a class="headerlink" href="#links" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The following pages were used as references for this work:</div>
<div class="line"><a class="reference external" href="http://efod.se/blog/archive/2006/06/27/autofs-and-ldap">http://efod.se/blog/archive/2006/06/27/autofs-and-ldap</a></div>
<div class="line"><a class="reference external" href="http://www.linuxjournal.com/article/6266">http://www.linuxjournal.com/article/6266</a></div>
<div class="line"><a class="reference external" href="http://forums.fedoraforum.org/showthread.php?t=138992">http://forums.fedoraforum.org/showthread.php?t=138992</a></div>
<div class="line"><a class="reference external" href="http://forums.fedoraforum.org/forum/showthread.php?t=135635&amp;highlight=autofs+ldap">http://forums.fedoraforum.org/forum/showthread.php?t=135635&amp;highlight=autofs+ldap</a>
<a class="reference external" href="http://blogs.sun.com/rohanpinto/entry/nis_to_ldap_migration_guide">http://blogs.sun.com/rohanpinto/entry/nis_to_ldap_migration_guide</a></div>
</div>
<p><a class="reference external" href="Category:Obsolete">Category:Obsolete</a> <a class="reference external" href="Category:System_administration_documentation">Category:System
administration
documentation</a>
<a class="reference external" href="Category:How_to">Category:How to</a> <a class="reference external" href="Category:Administrators_Guide">Category:Administrators
Guide</a></p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/archive/pages/Administrators_Guide.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>