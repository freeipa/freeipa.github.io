

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>RFC_2818_certificate_compliance &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/V4/RFC_2818_certificate_compliance';</script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="/_static/freeipa-logo-small.png" class="logo__image only-light" alt="Logo image" />
</a>
<div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/page/V4/RFC_2818_certificate_compliance.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>RFC_2818_certificate_compliance</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-cases">Use Cases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#design">Design</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#copying-cn-to-san-dnsname">Copying CN to SAN dNSName</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caveats">Caveats</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#san-only-certificate-support">SAN-only certificate support</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#subjectnamefieldsdefault-profile-policy-component"><code class="docutils literal notranslate"><span class="pre">SubjectNameFieldsDefault</span></code> profile policy component</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#marking-the-san-extension-as-critical">Marking the SAN extension as critical</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-cert-request-changes"><code class="docutils literal notranslate"><span class="pre">ipa</span> <span class="pre">cert-request</span></code> changes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#wildcard-certificates">Wildcard certificates</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-management">Feature Management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade">Upgrade</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-test">How to Test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-plan">Test Plan</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="rfc-2818-certificate-compliance">
<h1>RFC_2818_certificate_compliance<a class="headerlink" href="#rfc-2818-certificate-compliance" title="Permalink to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p><a class="reference external" href="http://tools.ietf.org/html/rfc2818#section-3.1">RFC 2818 - HTTP Over
TLS</a> deprecates the
practice of carrying the subject hostname in the Subject DN Common Name
(CN) field. Pursuant to RFC 2818 some TLS libraries now issue warnings
when they encounter certificates that do not have the DNS name at which
the service was accessed in the subjectAltName (SAN) extension. FreeIPA
currently does not take measures to ensure that host or service
certificates it issues are compliant with RFC 2818. This design proposes
a measure to, where appropriate, copy the contents of the CN into the
subjectAltName extension as a dNSName, resulting in an RFC
2818-compliant certificate.</p>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc6125">RFC 6125 - Best Practices for Checking of Server Identities in the
Context of Transport Layer Security
(TLS)</a> further clarifies that
certificates SHOULD include a DNS-ID and that CAs SHOULD NOT issue
certificates with a CN-ID unless another specification explicitly
requires or encourages it. RFC 6125 has greater scope than this design,
all work for this design should comply with RFC 6125.</p>
<p><a class="reference external" href="http://tools.ietf.org/html/rfc5280#section-4.1.2.6">RFC 5280</a>
defines the maximum length of the CN to be 64 characters (the maximum
size in bytes depends on the string encoding used). It is now common to
encounter DNS names longer than 64 characters, particularly in cloud
infrastructure (see ticket
<a class="reference external" href="https://fedorahosted.org/freeipa/ticket/4415">#4415</a> for an example
of an issue caused by hostnames exceeding this limit). To support
service and host certificates where the hostname is longer than 64
characters, FreeIPA must support carrying the subject information in the
subjectAltName extension <em>only</em> (the subjectAltName extension must be
marked <em>critical</em> in this scenario).</p>
</section>
<section id="use-cases">
<h2>Use Cases<a class="headerlink" href="#use-cases" title="Permalink to this heading">#</a></h2>
<p>Per the overview, the goal of this design is to avoid deprecated ways of
providing subject naming information in a certificate (which some TLS
libraries are now warning about) and to support subject DNS names longer
than 64 characters.</p>
</section>
<section id="design">
<h2>Design<a class="headerlink" href="#design" title="Permalink to this heading">#</a></h2>
</section>
<section id="copying-cn-to-san-dnsname">
<h2>Copying CN to SAN dNSName<a class="headerlink" href="#copying-cn-to-san-dnsname" title="Permalink to this heading">#</a></h2>
<p>This measure involves the creation of a new Dogtag profile component
that, on profiles that enable it, performs the following steps:</p>
<ol class="arabic simple">
<li><p>Retrieve the Subject Common Name from the certificate data.</p></li>
<li><p>Retrieve the subjectAltName extension from the certificate data, or
create an empty subjectAltName extension if it does not exist.</p></li>
<li><p>Search the subjectAltName extension for a dNSName value that matches
the Common Name. If not found, add the Common Name to the
subjectAltName extension as a dNSName.</p></li>
</ol>
<p>The component shall be called <code class="docutils literal notranslate"><span class="pre">SubjectAltNameCopyCNDefault</span></code>. Its
instantiation shall be called <code class="docutils literal notranslate"><span class="pre">subjectAltNameCopyCNDefaultImpl</span></code>. The
<code class="docutils literal notranslate"><span class="pre">caIPAserviceCert</span></code> profile shall be updated to use this profile
component.</p>
<section id="caveats">
<h3>Caveats<a class="headerlink" href="#caveats" title="Permalink to this heading">#</a></h3>
<p>The profile component that performs these steps must execute after other
profile components that add or modify the Common Name and subjectAltName
extension. It is preferable that this condition be encoded as part of
the definition of the component itself, such that Dogtag can enforce it.
However, if this is not possible, it would be required that the profile
configuration introduce the component after the other components which
must run first; any such requirement must be clearly documented.</p>
</section>
</section>
<section id="san-only-certificate-support">
<h2>SAN-only certificate support<a class="headerlink" href="#san-only-certificate-support" title="Permalink to this heading">#</a></h2>
<p>Let’s first clarify the requirement for SAN-only certificates:</p>
<ol class="arabic">
<li><p>A DNS name longer than 64 characters <em>cannot</em> be carried in the CN
but can (and therefore must) be carried as a dNSName value in the
subjectAltName extension.</p></li>
<li><p>In the absense of other distinguishing data in the Subject DN, the
entire Subject DN must be the empty sequence, because RFC 5280
states:</p>
<blockquote>
<div><p>Where it is non-empty, the subject field MUST contain an X.500
distinguished name (DN). The DN MUST be unique for each subject
entity certified by the one CA as defined by the issuer field.</p>
</div></blockquote>
</li>
<li><p>If the Subject DN is empty, the subjectAltName extension must be
marked <em>critical</em>.</p></li>
</ol>
<p>The existing subject name profile policy component,
<code class="docutils literal notranslate"><span class="pre">SubjectNameDefault</span></code>, does not offer enough flexibility to handle
either the presence or absense of a Subject DN field (e.g. CN). For
example, the <code class="docutils literal notranslate"><span class="pre">caIPAserviceCert</span></code> profile configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>policyset.serverCertSet.1.default.class_id=subjectNameDefaultImpl
policyset.serverCertSet.1.default.name=Subject Name Default
policyset.serverCertSet.1.default.params.name=CN=$request.req_subject_name.cn$,O=IPA.LOCAL
</pre></div>
</div>
<p>shows that:</p>
<ul class="simple">
<li><p>The “substituted” Subject DN will be invalid if there is no CN in the
CSR. (The <code class="docutils literal notranslate"><span class="pre">&quot;CN=&quot;</span></code> key is an immutable part of the template string),
and;</p></li>
<li><p>There is no mechanism that provides for “optional” fields in the
Subject DN. (A separate profile would be needed).</p></li>
</ul>
<section id="subjectnamefieldsdefault-profile-policy-component">
<h3><code class="docutils literal notranslate"><span class="pre">SubjectNameFieldsDefault</span></code> profile policy component<a class="headerlink" href="#subjectnamefieldsdefault-profile-policy-component" title="Permalink to this heading">#</a></h3>
<p>It is clear that a new Subject Name profile policy component is needed
to handle the case of possibly-absent Subject DN fields. This component
would need to support configuration that allows a profile to define:</p>
<ul class="simple">
<li><p>Which Subject DN fields, if any, are optional (if any)</p></li>
<li><p>Which Subject DN fields, if absent, cause the final Subject DN to be
the empty sequence (i.e. fields that <em>distinguish</em> the subject).</p></li>
</ul>
<p>With these requirements in mind, a configuration suitable to replace the
above configuration would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>policyset.serverCertSet.1.default.class_id=subjectNameFieldsDefaultImpl
policyset.serverCertSet.1.default.name=Subject Name Fields Default
policyset.serverCertSet.1.default.params.cn=$request.req_subject_name.cn$
policyset.serverCertSet.1.default.params.o=IPA.LOCAL
policyset.serverCertSet.1.default.params.excludeIfEmpty=cn
policyset.serverCertSet.1.default.params.emptySubjectIfFieldEmpty=cn
policyset.serverCertSet.1.default.params.order=cn,o
</pre></div>
</div>
<p>Breaking this configuration down:</p>
<ul class="simple">
<li><p>A template is provided for each field (<code class="docutils literal notranslate"><span class="pre">cn</span></code>, <code class="docutils literal notranslate"><span class="pre">o</span></code>, etc.) that
<em>may</em> be included in the final Subject DN. The existing template
substitution mechanism is used to format the value for each field.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">excludeIfEmpty</span></code> parameter is a (possibly empty)
comma-separated list of fields that shall be omitted from the final
Subject DN if their values (after substitution) are empty. It is an
error if a field that is <em>not</em> included in the list is empty (after
substitution). This parameter is <strong>optional</strong> and defaults to the
empty list.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">emptySubjectIfFieldEmpty</span></code> parameter is a (possibly empty)
comma-separated list of fields that if empty (after substitution)
cause the final Subject DN to be the empty list. This parameter is
<strong>optional</strong> and defaults to the empty list.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">order</span></code> parameter is a comma-separated list defining the order
(from “most specific” to “least specific”) of the RDNs in the final
Subject DN. This parameter is <strong>required</strong>. Each listed field must
have a corresponding template in the configuration.</p></li>
</ul>
<p>The profile policy component shall be called
<code class="docutils literal notranslate"><span class="pre">SubjectNameFieldsDefault</span></code>. Its instantiation shall be called
<code class="docutils literal notranslate"><span class="pre">subjectNameFieldsDefaultImpl</span></code>. The <code class="docutils literal notranslate"><span class="pre">caIPAserviceCert</span></code> profile shall
be updated to use this component instead of <code class="docutils literal notranslate"><span class="pre">SubjectNameDefault</span></code>.</p>
</section>
<section id="marking-the-san-extension-as-critical">
<h3>Marking the SAN extension as critical<a class="headerlink" href="#marking-the-san-extension-as-critical" title="Permalink to this heading">#</a></h3>
<p>The SAN extension must be marked critical when subject naming
information is present only the subjectAltName extension.</p>
<p><strong>TODO</strong> need to define mechanism to achieve this. It would definitely
be possible with another profile component to run at the end, but a less
intrusive mechanism would be better.</p>
</section>
<section id="ipa-cert-request-changes">
<h3><code class="docutils literal notranslate"><span class="pre">ipa</span> <span class="pre">cert-request</span></code> changes<a class="headerlink" href="#ipa-cert-request-changes" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ipa</span> <span class="pre">cert-request</span></code> command must be updated to handle CSRs where no
subject information is carried in CSR Subject DN (CN field in
particular). This will be achieved with the following changes.</p>
<ul class="simple">
<li><p>Initialise an empty <em>DNS names</em> list.</p></li>
<li><p>The existing “CN matches principal name” check is deferred for
certificate requests where the target principal is a <em>host</em> or
<em>service</em>. (The check is retained for <em>user</em> principals).</p></li>
<li><p>For hosts and services, the CN, if present, is appended to the list
of <em>DNS names</em>.</p></li>
<li><p>For each dNSName in the subjectAltName extension, ensure that the
name corresponds to a principal that is <em>managed by</em> the target
principal, then append the name to the list of <em>DNS names</em>.</p></li>
<li><p>For hosts and services, after processing of the SAN extension is
complete, ensure that one name in the <em>DNS names</em> list matches the
target principal. This is to prevent issuance of a certificate that
omits the target principal.</p></li>
</ul>
</section>
</section>
<section id="wildcard-certificates">
<h2>Wildcard certificates<a class="headerlink" href="#wildcard-certificates" title="Permalink to this heading">#</a></h2>
<p>FreeIPA currently does not support wildcard certificates, although
<a class="reference external" href="https://fedorahosted.org/freeipa/ticket/3475">ticket #3475</a> is an
RFE to support them. It should also be noted that <a class="reference external" href="https://tools.ietf.org/html/rfc6125">RFC
6125</a> essentially deprecates the
issuance of wildcard certificates, but several established use cases
still require them.</p>
<p>Regarding this design, no special handling of names containing wildcards
is required. Enforcement of restrictions on where wildcards may appear
in names is assumed. The <code class="docutils literal notranslate"><span class="pre">SubjectAltNameCopyCNDefault</span></code> component, if
used, will copy a CN whether or not it contains a wildcard. Wildcards
are also allowed in SAN dNSNames, so there is no bearing on SAN-only
certificates.</p>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this heading">#</a></h2>
</section>
<section id="feature-management">
<h2>Feature Management<a class="headerlink" href="#feature-management" title="Permalink to this heading">#</a></h2>
<p>No UI or CLI is required to manage these features.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">certutil</span></code> instructions “New certificate for Host/Service” dialog
in the Web UI should be updated to indicate how to add a DNS names to
the subjectAltName request extension, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># certutil -R -d &amp;lt;database path&amp;gt; -a -g &amp;lt;key size&amp;gt;</span>
  <span class="o">-</span><span class="n">s</span> <span class="s1">&#39;CN=f23-2.ipa.local,O=IPA.LOCAL&#39;</span> <span class="o">-</span><span class="mi">8</span> <span class="s1">&#39;f23-2.ipa.local&#39;</span>
</pre></div>
</div>
<p>The new Dogtag profile policy components must be documented so that
administrators can understand their purpose and how to use them in
custom profiles.</p>
</section>
<section id="upgrade">
<h2>Upgrade<a class="headerlink" href="#upgrade" title="Permalink to this heading">#</a></h2>
<p>Each CA clone has the file <code class="docutils literal notranslate"><span class="pre">/etc/pki/pki-tomcat/ca/registry.cfg</span></code>,
which defines the name and class of each profile policy component to
instantiate. This file must be updated to instantiate the new profile
policy components. This should be done as part of Dogtag’s upgrade
procedure.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">caIPAserviceCert</span></code> profile configuration must be updated to use
the new profile policy components. Because FreeIPA now owns its
profiles, this shall be done as part of the FreeIPA upgrade procedure.</p>
</section>
<section id="how-to-test">
<h2>How to Test<a class="headerlink" href="#how-to-test" title="Permalink to this heading">#</a></h2>
</section>
<section id="test-plan">
<h2>Test Plan<a class="headerlink" href="#test-plan" title="Permalink to this heading">#</a></h2>
<p><a class="reference external" href="V4/RFC_2818_certificate_compliance/Test_Plan">RFC 2818 certificate compliance V4.4 test
plan</a></p>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-cases">Use Cases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#design">Design</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#copying-cn-to-san-dnsname">Copying CN to SAN dNSName</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caveats">Caveats</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#san-only-certificate-support">SAN-only certificate support</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#subjectnamefieldsdefault-profile-policy-component"><code class="docutils literal notranslate"><span class="pre">SubjectNameFieldsDefault</span></code> profile policy component</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#marking-the-san-extension-as-critical">Marking the SAN extension as critical</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-cert-request-changes"><code class="docutils literal notranslate"><span class="pre">ipa</span> <span class="pre">cert-request</span></code> changes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#wildcard-certificates">Wildcard certificates</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-management">Feature Management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade">Upgrade</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-test">How to Test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-plan">Test Plan</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>