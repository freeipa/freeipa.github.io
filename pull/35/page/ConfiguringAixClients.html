
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ConfiguringAixClients &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/ConfiguringAixClients';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="https://raw.githubusercontent.com/freeipa/freeipa.github.io/main/src/_static/freeipa-logo-small.png" class="logo__image" alt="Logo image" />
</a>
<div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Documentation.html">Documentation</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Troubleshooting.html">Troubleshooting</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/page/ConfiguringAixClients.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>ConfiguringAixClients</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">ConfiguringAixClients</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-the-ipa-client-on-aix-5-3">Configuring the IPA Client on AIX 5.3</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-kerberos-and-ldap">Configuring Kerberos and LDAP</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-client-ssh-access">Configuring Client SSH Access</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#system-login">System Login</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#netgroup">netgroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-help">Additional help</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="configuringaixclients">
<h1>ConfiguringAixClients<a class="headerlink" href="#configuringaixclients" title="Link to this heading">#</a></h1>
<p>Back to <a class="reference external" href="FreeIPAv1:Client_Configuration_Guide">FreeIPAv1:Client Configuration
Guide</a></p>
</section>
<section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h1>
<p>This document describes the procedures required to configure AIX 5.3 as
an IPA client, hints for later AIX versions are also included.</p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">#</a></h2>
<p>Before you begin the configuration phase, you need to ensure that the
following software is installed and up to date on your system. This can
be installed from your AIX media:</p>
<ul class="simple">
<li><p>v5.3 OS</p></li>
<li><p>v5.3 Updates</p></li>
<li><p>krb5 client packages</p></li>
<li><p>openssh</p></li>
<li><p>wget</p></li>
<li><p>bash</p></li>
<li><p>ldap.client (idsldap)</p></li>
<li><p>openssl</p></li>
<li><p>modcrypt.base (for gssd)</p></li>
</ul>
</section>
</section>
<section id="configuring-the-ipa-client-on-aix-5-3">
<h1>Configuring the IPA Client on AIX 5.3<a class="headerlink" href="#configuring-the-ipa-client-on-aix-5-3" title="Link to this heading">#</a></h1>
<p>The following instructions describe how to configure AIX 5.3 as an IPA
client. The following hostnames are used as examples only; you need to
replace these with the hostnames that apply to your deployment.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>REALM = EXAMPLE.COM
IPA server = ipaserver.example.com
IPA client = ipaclient.example.com
</pre></div>
</div>
<section id="configuring-kerberos-and-ldap">
<h2>Configuring Kerberos and LDAP<a class="headerlink" href="#configuring-kerberos-and-ldap" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Configure the krb5 client settings as follows:</p></li>
</ol>
<p>``   # mkkrb5clnt -r EXAMPLE.COM -d example.com -c ipaserver.example.com -s ipaserver.example.com``</p>
<ol class="arabic simple" start="2">
<li><p>Get a Kerberos ticket.</p></li>
</ol>
<p>``       # kinit  admin``</p>
<ol class="arabic simple" start="3">
<li><p>Configure the LDAP client settings as follows:</p></li>
</ol>
<p>``       # mksecldap -c -h ipaserver.example.com -d cn=accounts,dc=example,dc=com -a uid=nss,cn=sysaccounts,cn=etc,dc=example,dc=com -p secret``</p>
<ol class="arabic simple" start="4">
<li><p>Add custom settings for the LDAP client.</p></li>
</ol>
<p>Under /etc/security/ldap create 2 new map files:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>#IPAuser.map file
keyobjectclass  SEC_CHAR        posixaccount            s

# The following attributes are required by AIX to be functional
username        SEC_CHAR        uid                     s
id              SEC_INT         uidnumber               s
pgrp            SEC_CHAR        gidnumber               s
home            SEC_CHAR        homedirectory           s
shell           SEC_CHAR        loginshell              s
gecos           SEC_CHAR        gecos                   s
spassword       SEC_CHAR        userpassword            s
lastupdate      SEC_INT         shadowlastchange        s
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>#IPAgroup.map file
groupname       SEC_CHAR    cn                    s
id              SEC_INT     gidNumber             s
users           SEC_LIST    member                m
</pre></div>
</div>
<div class="line-block">
<div class="line">Change the /etc/security/ldap/ldap.cfg file and set the relevant
options as follow.</div>
<div class="line">In this example the RELAM name is EXAMPLE.COM and the basedn is
dc=example,dc=com</div>
<div class="line">Change all basedns values to conform to your installation realm name.</div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>userbasedn:cn=users,cn=accounts,dc=example,dc=com
groupbasedn:cn=groups,cn=accounts,dc=example,dc=com

userattrmappath:/etc/security/ldap/IPAuser.map
groupattrmappath:/etc/security/ldap/IPAgroup.map

userclasses:posixaccount
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Start the ldap client daemon.</p></li>
</ol>
<p>``       # start-secldapclntd``</p>
<ol class="arabic simple" start="6">
<li><p>Test the LDAP client connection to the IPA server.</p></li>
</ol>
<p>``       # lsldap -a passwd``</p>
<ol class="arabic simple" start="7">
<li><p>Configure the system login to use Krberos and LDAP</p></li>
</ol>
<p>Add the following sections to the file /usr/lib/security/methods.cfg</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>KRB5A:
        program = /usr/lib/security/KRB5A
        program_64 = /usr/lib/security/KRB5A_64
        options = authonly

KRB5ALDAP:
        options = auth=KRB5A,db=LDAP
</pre></div>
</div>
<p>For AIX 6.1 the line</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>options = authonly
</pre></div>
</div>
<p>should be changed into</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>options = authonly,kadmind=no
</pre></div>
</div>
<div class="line-block">
<div class="line">Edit the file /etc/security/user</div>
<div class="line">In the default section change the options ‘SYSTEM’ and ‘registry’ to
look like this:</div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SYSTEM = &quot;KRB5ALDAP&quot;
regisrty = LDAP
</pre></div>
</div>
<p>Please note: due to these changes to /etc/security/user LDAP is
configured, leading to local users with no individual entry not beeing
able to login. According to previous testing not setting registry to
LDAP is not preventing IPA users to login, but is preventing them to
change passwords.</p>
</section>
<section id="configuring-client-ssh-access">
<h2>Configuring Client SSH Access<a class="headerlink" href="#configuring-client-ssh-access" title="Link to this heading">#</a></h2>
<p>You can configure the IPA client to accept incoming SSH requests and
authenticate with the user’s Kerberos credentials. After configuring the
IPA client, use the following procedure to configure the IPA client for
SSH connections. Remember to replace the example host and domain names
with your own host and domain names:</p>
<ol class="arabic simple">
<li><p>SSH syslog Configuration</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>auth.info       /var/log/sshd.log
auth.info       /var/log/sshd.log
auth.crit       /var/log/sshd.log
auth.warn       /var/log/sshd.log
auth.notice     /var/log/sshd.log
auth.err        /var/log/sshd.log
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>SSH Logging Configuration</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SyslogFacility AUTH
LogLevel INFO
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Configure sshd for GSSAPI (<code class="docutils literal notranslate"><span class="pre">/etc/ssh/sshd_config</span></code>)</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># GSSAPI options
GSSAPIAuthentication yes
#GSSAPICleanupCredentials yes
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Restart sshd</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># stopsrc -s sshd
# startsrc -s sshd
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Restart syslogd</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># stopsrc -s syslogd
# startsrc -s syslogd
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>The <strong>ipa-admintools</strong> package is not available for AIX.
Consequently, you need to perform the following commands on the
IPA server.</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Add a host service principal on IPA v2:</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># ipa service-add host/ipaclient.example.com
</pre></div>
</div>
<p>Please note: adding the service principal should no longer be required,
but host-add and a host-add-managedby should be enough:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># ipa host-add ipaclient.example.com
# ipa host-add-managedby --hosts=ipaserver.example.com ipaclient.example.com
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Retrieve the host keytab.</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># ipa-getkeytab -s ipaserver -p host/ipaclient.example.com -k /tmp/krb5.keytab
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>Copy the keytab from the server to the client.</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># scp /tmp/krb5.keytab root@ipaclient.example.com:/tmp/krb5.keytab
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li><p>On the IPA client, use the <strong>ktutil</strong> command to import the keytab.</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># ktutil
ktutil: read_kt /tmp/krb5.keytab
ktutil: write_kt /etc/krb5/krb5.keytab
ktutil: q
</pre></div>
</div>
<p>10. Add a user that is only used for authentication. (This can be
substituted with krb5 authentication if that works from the ldap
client). Otherwise go to the IPA server and use <strong>ldapmodify</strong>, bind as
<strong>Directory Manager</strong> and create this user.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>dn: uid=nss,cn=sysaccounts,cn=etc,dc=example,dc=com
objectClass: account
objectClass: simplesecurityobject
objectClass: top
uid: nss
userPassword: Your own shared password here
</pre></div>
</div>
<ol class="arabic simple" start="11">
<li><p>On the IPA server, get a ticket for the <strong>admin</strong> user.</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># kinit admin
</pre></div>
</div>
<p>You should be able to log in as <strong>admin</strong> using ssh without providing a
password.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># ssh admin@ipaclient.example.com
</pre></div>
</div>
</section>
<section id="system-login">
<h2>System Login<a class="headerlink" href="#system-login" title="Link to this heading">#</a></h2>
<p>On the AIX machine console, enter the admin username and password. You
should be able to log in.</p>
<p>Use the <strong>id</strong> command to verify user and group information.</p>
<blockquote>
<div><p><img alt="Note.png" src="../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>By default, <strong>admin</strong> is given <strong>/bin/bash</strong> as the shell to use
and <code class="docutils literal notranslate"><span class="pre">/home/admin</span></code> as the home directory. You may need to install
<strong>bash</strong> (or link <strong>sh</strong> to <strong>/bin/bash</strong> or modify <strong>admin</strong> to
use <strong>/bin/sh</strong> or a shell available in all of your systems) to be
able to log in.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="netgroup">
<h2>netgroup<a class="headerlink" href="#netgroup" title="Link to this heading">#</a></h2>
<p>Some words of caution. The comment-line in most of these files in * and
not # as is usual for *nix configuration files. I found that deleting
values rather than trying to comment then out was more helpful.</p>
<p>The order in some files seems to be important for some reason. Simply
moving SYSTEM and registry in <code class="docutils literal notranslate"><span class="pre">/etc/security/user</span></code> once solved getting
netgroup working. My advice would be to maintain the existing formatting
and order as much as possible.</p>
<p>This example assumes we are going to be granting access to the machine
to users in the netgroup mygroup. To add this group to IPA and allow the
user admin do the following on the IPA server:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ kinit admin
$ ipa netgroup-add --desc=&#39;AIX users&#39; mygroup
$ ipa netgroup-add-member --users=admin mygroup
</pre></div>
</div>
<p>1. On the AIX client, add the netgroup basedn to
<code class="docutils literal notranslate"><span class="pre">/etc/security/ldap/ldap.cfg</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>netgroupbasedn: cn=ng,cn=compat,dc=example,dc=com
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Restart the LDAP client:</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># /usr/sbin/restart-secldapclntd
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Test that a netgroup is visible</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># lsldap -a netgroup mygroup
</pre></div>
</div>
<p>4. Add the netgroup option to LDAP and KRB5ALDAP in
/usr/lib/security/methods.cfg:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>LDAP:
        program = /usr/lib/security/LDAP
        program_64 =/usr/lib/security/LDAP64
        options = netgroup
...
KRB5ALDAP:
        options = auth=KRB5A,db=LDAP,netgroup
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Configure <code class="docutils literal notranslate"><span class="pre">/etc/irs.conf</span></code> for netgroups:</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># cat /etc/irs.conf
netgroup nis_ldap
</pre></div>
</div>
<p>6. Either modify the default user in <code class="docutils literal notranslate"><span class="pre">/etc/security/user</span></code> to use
<code class="docutils literal notranslate"><span class="pre">SYSTEM</span> <span class="pre">=</span> <span class="pre">compat</span></code> and <code class="docutils literal notranslate"><span class="pre">registry</span> <span class="pre">=</span> <span class="pre">compat</span></code> or create a user <code class="docutils literal notranslate"><span class="pre">admin</span></code>
entry and configure that for compat:</p>
<p>This is what it looks like if you create a separate user:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>default:
        ...
        SYSTEM = compat
        registry = compat
        ...
</pre></div>
</div>
<p>OR</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>admin:
    SYSTEM = compat
    registry = compat
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Add our netgroup to <code class="docutils literal notranslate"><span class="pre">/etc/passwd</span></code>:</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>echo &quot;+@mygroup&quot; &gt;&gt; /etc/passwd
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>Configure <code class="docutils literal notranslate"><span class="pre">/etc/group</span></code> for netgroups:</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># echo &quot;+:&quot; &gt;&gt; /etc/group
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li><p>Test the admin user:</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># lsuser -R compat admin
admin id=155000000 pgrp=admins groups=admins home=/home/admin...
</pre></div>
</div>
<ol class="arabic simple" start="10">
<li><p>A full test is to su to the user or log in via ssh.</p></li>
</ol>
<p>For users not found in the netgroup you’ll get a log entry like this in
<code class="docutils literal notranslate"><span class="pre">/var/log/sshd.log</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Aug</span> <span class="pre">24</span> <span class="pre">10:38:29</span> <span class="pre">ipaaix</span> <span class="pre">auth|security:info</span> <span class="pre">sshd[348394]:</span> <span class="pre">Invalid</span> <span class="pre">user</span> <span class="pre">admin</span> <span class="pre">from</span> <span class="pre">x.x.x.x</span></code>
<code class="docutils literal notranslate"><span class="pre">Aug</span> <span class="pre">24</span> <span class="pre">10:38:30</span> <span class="pre">ipaaix</span> <span class="pre">auth|security:info</span> <span class="pre">syslog:</span> <span class="pre">ssh:</span> <span class="pre">failed</span> <span class="pre">login</span> <span class="pre">attempt</span> <span class="pre">for</span> <span class="pre">UNKNOWN_USER</span> <span class="pre">from</span> <span class="pre">x.x.x.x</span></code>
<code class="docutils literal notranslate"><span class="pre">Aug</span> <span class="pre">24</span> <span class="pre">10:38:30</span> <span class="pre">ipaaix</span> <span class="pre">auth|security:info</span> <span class="pre">sshd[348394]:</span> <span class="pre">Failed</span> <span class="pre">none</span> <span class="pre">for</span> <span class="pre">invalid</span> <span class="pre">user</span> <span class="pre">admin</span> <span class="pre">from</span> <span class="pre">x.x.x.x</span> <span class="pre">port</span> <span class="pre">34085</span> <span class="pre">ssh2</span></code></p>
</section>
<section id="additional-help">
<h2>Additional help<a class="headerlink" href="#additional-help" title="Link to this heading">#</a></h2>
<p>Some additional AIX configuration pages that may be relevant and
helpful.</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ibm.com/developerworks/aix/library/au-aixadsupport.html">http://www.ibm.com/developerworks/aix/library/au-aixadsupport.html</a></p></li>
<li><p><a class="reference external" href="http://www.ibm.com/developerworks/aix/library/au-netgroup/">http://www.ibm.com/developerworks/aix/library/au-netgroup/</a></p></li>
<li><p><a class="reference external" href="http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.security/doc/security/krb_bind_ldap_client.htm">http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.security/doc/security/krb_bind_ldap_client.htm</a></p></li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">ConfiguringAixClients</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-the-ipa-client-on-aix-5-3">Configuring the IPA Client on AIX 5.3</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-kerberos-and-ldap">Configuring Kerberos and LDAP</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-client-ssh-access">Configuring Client SSH Access</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#system-login">System Login</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#netgroup">netgroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-help">Additional help</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>