
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Certmonger &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/Certmonger';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="https://raw.githubusercontent.com/freeipa/freeipa.github.io/main/src/_static/freeipa-logo-small.png" class="logo__image" alt="Logo image" />
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Documentation.html">Documentation</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Troubleshooting.html">Troubleshooting</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/page/Certmonger.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Certmonger</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#commands">Commands</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-usage">Common Usage</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-a-list-of-currently-tracked-certificates">Get a list of currently tracked certificates</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#certmonger-cas">Certmonger “CAs”</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#anatomy-of-a-tracked-certificate">Anatomy of a tracked certificate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#all-tracked-certificates">All tracked certificates</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#all-ipa-issued-certificate">All IPA-issued certificate</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#request-a-new-certificate">Request a new certificate</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#openssl">OpenSSL</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nss">NSS</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manually-renew-a-certificate">Manually renew a certificate</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stop-tracking-a-certificate">Stop tracking a certificate</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#issue-a-certificate-with-specific-properties">Issue a certificate with specific properties</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#external-documentation">External Documentation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-certmonger-finds-an-ipa-ca">How Certmonger finds an IPA CA</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="certmonger">
<h1>Certmonger<a class="headerlink" href="#certmonger" title="Link to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>The certmonger daemon monitors certificates for impending expiration,
and can optionally refresh soon-to-be-expired certificates with the help
of a CA. If told to, it can drive the entire enrollment process from key
generation through enrollment and refresh.</p>
<p>It can work with either flat files, like those used by OpenSSL, or with
NSS databases.</p>
</section>
<section id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Link to this heading">#</a></h2>
<p>The certmonger command-line tool, <code class="docutils literal notranslate"><span class="pre">getcert</span></code> is a very generic tool
that can manage the certificates you are tracking. A superset of this
tool, <code class="docutils literal notranslate"><span class="pre">ipa-getcert</span></code> works specifically with an IPA CA. ipa-getcert is
equivalent to <code class="docutils literal notranslate"><span class="pre">getcert</span> <span class="pre">-c</span> <span class="pre">IPA</span></code></p>
</section>
<section id="common-usage">
<h2>Common Usage<a class="headerlink" href="#common-usage" title="Link to this heading">#</a></h2>
<p>For the NSS cases this assumes there is no password associated with the
NSS database. If there is then the key must be in a file readable by
certmonger and passed in using the -p or -P options.</p>
</section>
<section id="get-a-list-of-currently-tracked-certificates">
<h2>Get a list of currently tracked certificates<a class="headerlink" href="#get-a-list-of-currently-tracked-certificates" title="Link to this heading">#</a></h2>
<p>The difference between “all” and “IPA-issued” is subtle. An IPA-issued
certificate means it was issued using the API provided by IPA. It does
not refer to any certificate issued by the IPA CA. There are some
certificates, such as some subsystem certificates of the CA itself, than
can be tracked by certmonger but are not issued by the API.</p>
</section>
<section id="certmonger-cas">
<h2>Certmonger “CAs”<a class="headerlink" href="#certmonger-cas" title="Link to this heading">#</a></h2>
<p>Certmonger uses helpers to communicate with CAs. These are listed and
defined using the command <code class="docutils literal notranslate"><span class="pre">getcert-list-cas</span></code> and <code class="docutils literal notranslate"><span class="pre">getcert-add-ca</span></code>
commands. Each defined CA in certmonger has a name. It’s perfectly legal
to have multiple certmonger CA entries pointing to the same helper but
defined differently.</p>
<p>For the case of an IPA installation there are two relevant certmonger
CAs:</p>
<ul class="simple">
<li><p>IPA</p></li>
<li><p>dogtag-ipa-ca-renew-agent</p></li>
</ul>
<p>IPA uses a CA helper that uses the host keytab entry to authenticate to
the IPA API in order to obtain certificates.</p>
<p>The dogtag-ipa-ca-renew-agent is used to directly authenticate to the CA
(dogtag) backend. This is used to manage the certificates that the CA
itself requires.</p>
<p>And this is why <code class="docutils literal notranslate"><span class="pre">getcert</span> <span class="pre">list</span></code> returns more certificates that
<code class="docutils literal notranslate"><span class="pre">ipa-getcert</span> <span class="pre">list</span></code></p>
<section id="anatomy-of-a-tracked-certificate">
<h3>Anatomy of a tracked certificate<a class="headerlink" href="#anatomy-of-a-tracked-certificate" title="Link to this heading">#</a></h3>
<p>A typical OpenSSL certificate looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Request</span> <span class="n">ID</span> <span class="s1">&#39;20120912211542&#39;</span><span class="p">:</span>
       <span class="n">status</span><span class="p">:</span> <span class="n">MONITORING</span>
       <span class="n">stuck</span><span class="p">:</span> <span class="n">no</span>
       <span class="n">key</span> <span class="n">pair</span> <span class="n">storage</span><span class="p">:</span> <span class="nb">type</span><span class="o">=</span><span class="n">FILE</span><span class="p">,</span><span class="n">location</span><span class="o">=</span><span class="s1">&#39;/etc/ssl/private.key&#39;</span>
       <span class="n">certificate</span><span class="p">:</span> <span class="nb">type</span><span class="o">=</span><span class="n">FILE</span><span class="p">,</span><span class="n">location</span><span class="o">=</span><span class="s1">&#39;/etc/ssl/server.crt&#39;</span>
       <span class="n">CA</span><span class="p">:</span> <span class="n">IPA</span>
       <span class="n">issuer</span><span class="p">:</span> <span class="n">CN</span><span class="o">=</span><span class="n">Certificate</span> <span class="n">Authority</span><span class="p">,</span><span class="n">O</span><span class="o">=</span><span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
       <span class="n">subject</span><span class="p">:</span> <span class="n">CN</span><span class="o">=</span><span class="n">edsel</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">O</span><span class="o">=</span><span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
       <span class="n">expires</span><span class="p">:</span> <span class="mi">2014</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">13</span> <span class="mi">21</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">44</span> <span class="n">UTC</span>
       <span class="n">eku</span><span class="p">:</span> <span class="nb">id</span><span class="o">-</span><span class="n">kp</span><span class="o">-</span><span class="n">serverAuth</span><span class="p">,</span><span class="nb">id</span><span class="o">-</span><span class="n">kp</span><span class="o">-</span><span class="n">clientAuth</span>
       <span class="n">pre</span><span class="o">-</span><span class="n">save</span> <span class="n">command</span><span class="p">:</span>
       <span class="n">post</span><span class="o">-</span><span class="n">save</span> <span class="n">command</span><span class="p">:</span>
       <span class="n">track</span><span class="p">:</span> <span class="n">yes</span>
       <span class="n">auto</span><span class="o">-</span><span class="n">renew</span><span class="p">:</span> <span class="n">yes</span>
</pre></div>
</div>
<p>You’ll need the Request ID when running other certmonger commands. This
will be a number if an ID is not provided when the request is originally
made.</p>
<p>The status MONITORING means that the certificate is valid and being
tracked by certmonger.</p>
<p>The key and certificate values indicate where the OpenSSL private key
and certificate are stored in the filesystem.</p>
<p>The CA type is IPA. This was passed in as the -c option of getcert, or
automatically set to IPA by ipa-getcert.</p>
<p>The issuer is the subject of the CA that issued the certificate.</p>
<p>The subject is the subject of the certificate in the certificate file.</p>
<p>The expiration date is UTC. By default certmonger will start trying to
renew the certificate 28 days before it expires by default.</p>
<p>eku lists the Enhanced Key Usage (EKU) extensions of the certificate. By
default IPA certificates are usable both as server and client
certificates.</p>
<p>The pre and post-save commands define commands that are executed before
and after the renewal process. This can be used, for example, to restart
a service when a certificate is renewed.</p>
</section>
<section id="all-tracked-certificates">
<h3>All tracked certificates<a class="headerlink" href="#all-tracked-certificates" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">getcert</span> <span class="pre">list</span></code></p>
</section>
<section id="all-ipa-issued-certificate">
<h3>All IPA-issued certificate<a class="headerlink" href="#all-ipa-issued-certificate" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">ipa-getcert</span> <span class="pre">list</span></code></p>
<p>This is the equivalent of:</p>
<p>`` # getcert list -c IPA``</p>
<p>The difference is that ipa-getcert sets the value of the CA (-c). It’s
just a shortcut.</p>
</section>
</section>
<section id="request-a-new-certificate">
<h2>Request a new certificate<a class="headerlink" href="#request-a-new-certificate" title="Link to this heading">#</a></h2>
<p>This will generate a new key pair, create a CSR and request a
certificate from the IPA server configured in <code class="docutils literal notranslate"><span class="pre">/etc/ipa/default.conf</span></code>,
authenticating using the machine’s host service principal in
<code class="docutils literal notranslate"><span class="pre">/etc/krb5.keytab</span></code>.</p>
<p>A certificate needs to be associated with an object in IPA so the -K
option is required in order to set that. Other useful options are:</p>
<p>-A to add an IPaddress Subject Alternative name (SAN) to the request -D
to add DNS Subject Alternative Name (SAN) to the request -g to set the
RSA key size -I to set the ID of the certmonger request</p>
<p>By default all certmonger requests are set to auto-renew. The -R option
will disable this.</p>
<section id="openssl">
<h3>OpenSSL<a class="headerlink" href="#openssl" title="Link to this heading">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``#  ipa-getcert request -f /path/to/server.crt -k /path/to/private.key -K ``
</pre></div>
</div>
</section>
<section id="nss">
<h3>NSS<a class="headerlink" href="#nss" title="Link to this heading">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``# ipa-getcert request -d /path/to/database -n &#39;Test&#39; -K ``
</pre></div>
</div>
</section>
</section>
<section id="manually-renew-a-certificate">
<h2>Manually renew a certificate<a class="headerlink" href="#manually-renew-a-certificate" title="Link to this heading">#</a></h2>
<p>If you want to manually renew a certificate prior to its expiration
date, run:</p>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">ipa-getcert</span> <span class="pre">resubmit</span> <span class="pre">-i</span> <span class="pre">REQUEST_ID</span></code></p>
</section>
<section id="stop-tracking-a-certificate">
<h2>Stop tracking a certificate<a class="headerlink" href="#stop-tracking-a-certificate" title="Link to this heading">#</a></h2>
<p>To tell certmonger to forget about a certificate and stop tracking it
run:</p>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">ipa-getcert</span> <span class="pre">stop-tracking</span> <span class="pre">-i</span> <span class="pre">REQUEST_ID</span></code></p>
<p>This does <strong>not</strong> touch the certificate or keys, it merely tells
certmonger to not track it for for rewnewals.</p>
</section>
<section id="issue-a-certificate-with-specific-properties">
<h2>Issue a certificate with specific properties<a class="headerlink" href="#issue-a-certificate-with-specific-properties" title="Link to this heading">#</a></h2>
<p>To issue a certificate with specific CN or other properties, specify
additional options to the utility. <code class="docutils literal notranslate"><span class="pre">getcert</span></code> has a lot of flexibility
with options described in its manual page. For example, to issue a
certificate for Nginx to use a specific fully qualified hostname on a
host without it, use following sequence:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd /etc/nginx/ssl</span>
<span class="c1"># fqdn=$(hostname -f); REALM=(hostname -d|tr &#39;[:lower:]&#39; &#39;[:upper:]&#39;);</span>
<span class="c1"># ipa-getcert request -f $fqdn.crt -k $fqdn.key -r -K HTTP/$fqdn@$REALM -N $fqdn</span>
</pre></div>
</div>
<p>The CA has the final say on what the subject will be in the certificate
it issues.</p>
</section>
<section id="external-documentation">
<h2>External Documentation<a class="headerlink" href="#external-documentation" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System-Level_Authentication_Guide/certmongerX.html">Certmonger user guide in RHEL
documentation</a></p></li>
</ul>
</section>
<section id="how-certmonger-finds-an-ipa-ca">
<h2>How Certmonger finds an IPA CA<a class="headerlink" href="#how-certmonger-finds-an-ipa-ca" title="Link to this heading">#</a></h2>
<p>Certmonger will first look in <code class="docutils literal notranslate"><span class="pre">/etc/ipa/default.conf</span></code> for the value of
<code class="docutils literal notranslate"><span class="pre">xmlrpc_uri</span></code> and use that to make the certificate request for IPA.</p>
<p>Any IPA Master, even those that do not have a CA locally installed, can
handle a certificate request by proxying the request to a master that
does have a CA.</p>
<p>If the request fails due to a connect error Certmonger will next look
for a value of <code class="docutils literal notranslate"><span class="pre">server</span></code> in <code class="docutils literal notranslate"><span class="pre">/etc/ipa/default.conf</span></code>. If one is found
then a similar request is made to the value of <code class="docutils literal notranslate"><span class="pre">server</span></code> plus
<code class="docutils literal notranslate"><span class="pre">/ipa/xm</span></code>.</p>
<p>If there is no <code class="docutils literal notranslate"><span class="pre">server</span></code> defined, and there likely will not be given
this directive is deprecated, then an LDAP search will be done using the
default LDAP search values in <code class="docutils literal notranslate"><span class="pre">/etc/openldap/ldap.conf</span></code> for the list
of IPA servers that have a CA. One of these servers, if any, will be
picked by certmonger and the request will be made again. If this request
fails then certmonger will give up.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#commands">Commands</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-usage">Common Usage</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-a-list-of-currently-tracked-certificates">Get a list of currently tracked certificates</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#certmonger-cas">Certmonger “CAs”</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#anatomy-of-a-tracked-certificate">Anatomy of a tracked certificate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#all-tracked-certificates">All tracked certificates</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#all-ipa-issued-certificate">All IPA-issued certificate</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#request-a-new-certificate">Request a new certificate</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#openssl">OpenSSL</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nss">NSS</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manually-renew-a-certificate">Manually renew a certificate</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stop-tracking-a-certificate">Stop tracking a certificate</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#issue-a-certificate-with-specific-properties">Issue a certificate with specific properties</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#external-documentation">External Documentation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-certmonger-finds-an-ipa-ca">How Certmonger finds an IPA CA</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>