
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DNS &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/DNS';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="https://raw.githubusercontent.com/freeipa/freeipa.github.io/main/src/_static/freeipa-logo-small.png" class="logo__image" alt="Logo image" />
</a>
<div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Documentation.html">Documentation</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Troubleshooting.html">Troubleshooting</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/page/DNS.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>DNS</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initial-considerations">Initial Considerations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assumptions">Assumptions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#goals-category-goals">Goals `Category:Goals`_.</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#benefits-of-integrated-dns">Benefits of integrated DNS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#caveats">Caveats</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-only-domains">Internal-only domains</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dns-views-split-horizon-dns">DNS views / split-horizon DNS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture">Architecture</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#security">Security</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging">Debugging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bug-reporting">Bug reporting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-documentation">Additional Documentation</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="dns">
<h1>DNS<a class="headerlink" href="#dns" title="Link to this heading">#</a></h1>
<p>FreeIPA DNS integration allows administrator to manage and serve DNS
records in a domain using the same CLI or Web UI as when managing
identities and policies. At the same time, administrator can benefit
from the tight DNS integration in FreeIPA management framework and have
configuration changes in FreeIPA server covered by automatic DNS updates
(see next chapters for more detailed list of benefits).</p>
<section id="initial-considerations">
<h2>Initial Considerations<a class="headerlink" href="#initial-considerations" title="Link to this heading">#</a></h2>
<p>The DNS component in FreeIPA was designed and built about several basic
assumptions and goals that should be always considered when assessing
enhancements or other requests to this component.</p>
</section>
<section id="assumptions">
<h2>Assumptions<a class="headerlink" href="#assumptions" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>DNS is hard to manage and lot of admins who want to deploy FreeIPA
would have difficulties setting up DNS properly.</p></li>
<li><p>DNS is central to have a decent Kerberos experience.</p></li>
<li><p>Single-master DNS is error prone, especially for inexperienced
admins.</p></li>
</ul>
</section>
<section id="goals-category-goals">
<h2>Goals <a href="#id3"><span class="problematic" id="id4">`Category:Goals`_</span></a>.<a class="headerlink" href="#goals-category-goals" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Provide an integrated DNS server which can be used to ease FreeIPA
deployment (“get you going”).</p>
<ul>
<li><p>Provide ability to standup and tear down replicas without caring
for the special “master” DNS server.</p></li>
</ul>
</li>
<li><p>Provide an alternative option for users with existing DNS
infrastructure: Provide means for integrating FreeIPA with existing
DNS infrastructure.</p></li>
<li><p>Goal is <strong>NOT</strong> to provide general-purpose DNS server. Features
beyond easing FreeIPA deployment and maintenance are explicitly out
of scope.</p></li>
</ul>
</section>
<section id="benefits-of-integrated-dns">
<h2>Benefits of integrated DNS<a class="headerlink" href="#benefits-of-integrated-dns" title="Link to this heading">#</a></h2>
<p>DNS component in FreeIPA is optional and user may choose to manage all
DNS records manually in other third party DNS server.</p>
<p>Please consider the following benefits of integrated DNS in FreeIPA
before enrolling a custom DNS solution:</p>
<ul class="simple">
<li><p>Clients can be configured to automatically run DNS updates
(<em>nsupdate</em>) when their IP address changes and thus keeping its DNS
record up-to-date. DNS zones can be configured to synchronize
client’s reverse (PTR) record along with the forward (A, AAAA) DNS
record.</p></li>
<li><p>FreeIPA domain has automatically maintained LDAP and Kerberos SRV
records allowing an easy autodiscovery in FreeIPA clients</p></li>
<li><p>FreeIPA domain has automatically maintained Microsoft Windows service
records required for <a class="reference external" href="Trusts">Trusts</a> configuration.</p></li>
<li><p>Automatic management of <em>ipa-ca.example.com</em> DNS record keeping
forward (A, AAAA) records to all FreeIPA servers with a Certificate
Authority configured. This DNS record is used in all certificates
issued by FreeIPA as a general point to obtain certificate validation
either via OCSP responder or CRL.</p></li>
</ul>
</section>
<section id="caveats">
<h2>Caveats<a class="headerlink" href="#caveats" title="Link to this heading">#</a></h2>
<p>Caveats applicable to DNS apply as usual. It is extremely hard to change
DNS domain in existing installations so it is better to think ahead.</p>
<p>Most importantly, <strong>do not shadow or hijack other DNS names!</strong> You
should only use names which are delegated to you by the parent domain.</p>
<p>For example, if your company <em>Example, Inc.</em> bought domain
<code class="docutils literal notranslate"><span class="pre">example.com.</span></code> you can use any domain in this sub-tree, e.g.
<code class="docutils literal notranslate"><span class="pre">whatever.example.com.</span></code>.</p>
<p><strong>Not respecting this rule will cause problems sooner or later!</strong> (This
caveat includes inventing your own top-level domain like <code class="docutils literal notranslate"><span class="pre">int.</span></code>)</p>
<ul class="simple">
<li><p>Generally you will have problems with DNSSEC validation. This
situation will be detected as domain hijacking.</p></li>
<li><p>Even without DNSSEC, you will have problems if the same name is used
by multiple parties at the same time, especially when new top-level
domains are delegated or during company mergers.</p></li>
</ul>
</section>
<section id="internal-only-domains">
<h2>Internal-only domains<a class="headerlink" href="#internal-only-domains" title="Link to this heading">#</a></h2>
<p>It is perfectly fine to configure certain DNS zones to respond only to
clients in certain subnets or to apply other kinds of access control.
For internal names you can use arbitrary sub-domain in a DNS sub-tree
you own, e.g. <code class="docutils literal notranslate"><span class="pre">int.example.com.</span></code>. <strong>Always respect rules from the
previous section.</strong></p>
</section>
<section id="dns-views-split-horizon-dns">
<h2>DNS views / split-horizon DNS<a class="headerlink" href="#dns-views-split-horizon-dns" title="Link to this heading">#</a></h2>
<p>General advice about DNS views is <strong>do not use them</strong> because views make
DNS deployment harder to maintain and security benefits are questionable
(when compared with ACL).</p>
<p>Problems:</p>
<ul class="simple">
<li><p>Using one name for multiple different machines (e.g. public vs.
internal) is confusing.</p></li>
<li><p>DNS caching on clients causes problems for machines roaming between
different DNS views.</p></li>
<li><p>DNSSEC deployment is harder to maintain when views are involved.</p></li>
</ul>
<p>Technically it is much cleaner to put all internal names in a sub-domain
like <code class="docutils literal notranslate"><span class="pre">int.example.com.</span></code> (while <code class="docutils literal notranslate"><span class="pre">example.com.</span></code> is the public-facing
domain) and restrict access to this sub-domain using ACL as described in
the previous section.</p>
</section>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Link to this heading">#</a></h2>
<p>The DNS integration is based on the
<a class="reference external" href="https://fedorahosted.org/bind-dyndb-ldap/">bind-dyndb-ldap</a> project,
which enhances BIND name server to be able to use FreeIPA server LDAP
instance as a data backend (data are stored in <em>cn=dns</em> entry, using
<a class="reference external" href="http://git.fedorahosted.org/cgit/bind-dyndb-ldap.git/tree/doc/schema">schema defined by
bind-dyndb-ldap</a>.</p>
</section>
<section id="security">
<h2>Security<a class="headerlink" href="#security" title="Link to this heading">#</a></h2>
<p>FreeIPA LDAP directory information tree is by default accessible to any
user in the network, or (if anonymous search is disabled) to any
authenticated user. As DNS data are often considered as sensitive and as
having access to <em>cn=dns</em> tree would be basically equal to being able to
run zone transfer to all FreeIPA managed DNS zones, contents of this
tree in LDAP are hidden by default.</p>
<p>Only the following users have read access to the DNS tree:</p>
<ul class="simple">
<li><p>bind-dyndb-ldap service principal itself</p></li>
<li><p>Members of the <em>admins</em> group</p></li>
<li><p>Users with <em>Read DNS Entries</em> attributes</p></li>
<li><p>Users with per-zone permission have read access to the permitted zone
(these permissions can be created with <em>dnszone-add-permission</em>
command)</p></li>
</ul>
</section>
<section id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Link to this heading">#</a></h2>
<p>When there is a suspicion that the DNS component is not behaving
correctly, standard system log (<em>/var/log/messages</em> or system journal)
can be consulted if there are any errors logged by BIND.</p>
<p>If the error is more subtle, BIND configuration (<em>/etc/named.conf</em>) can
be updated to produce a more detailed log. Standard <a class="reference external" href="https://bind9.readthedocs.io/en/v9.18.18/reference.html#configuration-file-named-conf">BIND
documentation</a>
can be consulted for help.</p>
<p>Most common problems are caused by mis-configuration. Please see
<a class="reference external" href="https://fedorahosted.org/bind-dyndb-ldap/#Documentationandsupport">bind-dyndb-ldap documentation
page</a>
and <a class="reference external" href="Troubleshooting#DNS_Issues">FreeIPA troubleshooting DNS page</a>.</p>
</section>
<section id="bug-reporting">
<h2>Bug reporting<a class="headerlink" href="#bug-reporting" title="Link to this heading">#</a></h2>
<p>Please follow <a class="reference external" href="https://fedorahosted.org/bind-dyndb-ldap/wiki/BugReporting">instructions published by bind-dyndb-ldap
project</a>.</p>
</section>
<section id="additional-documentation">
<h2>Additional Documentation<a class="headerlink" href="#additional-documentation" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://fedorahosted.org/bind-dyndb-ldap/">bind-dyndb-ldap project
pages</a></p>
<ul>
<li><p><a class="reference external" href="https://fedorahosted.org/bind-dyndb-ldap/wiki/Maintainability">Maintainability analysis affecting the design
goals</a></p></li>
</ul>
</li>
</ul>
<p><a href="#id1"><span class="problematic" id="id2">:ref:`Category:Goals &lt;Category:Goals&gt;`__</span></a></p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initial-considerations">Initial Considerations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assumptions">Assumptions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#goals-category-goals">Goals `Category:Goals`_.</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#benefits-of-integrated-dns">Benefits of integrated DNS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#caveats">Caveats</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-only-domains">Internal-only domains</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dns-views-split-horizon-dns">DNS views / split-horizon DNS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture">Architecture</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#security">Security</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging">Debugging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bug-reporting">Bug reporting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-documentation">Additional Documentation</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>