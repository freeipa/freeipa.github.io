
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>API_Compatiblity &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/V4/API_Compatiblity';</script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="https://raw.githubusercontent.com/freeipa/freeipa.github.io/main/src/_static/freeipa-logo-small.png" class="logo__image" alt="Logo image" />
</a>
<div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Documentation.html">Documentation</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Troubleshooting.html">Troubleshooting</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/page/V4/API_Compatiblity.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>API_Compatiblity</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-cases">Use Cases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#design">Design</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backward-compatibility-with-old-servers">Backward compatibility with old servers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#forward-compatibility">Forward compatibility</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#versioned-commands">Versioned commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#thin-client">Thin client</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caching">Caching</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Backward compatibility with old servers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Forward compatibility</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Versioned commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Thin client</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Caching</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-management">Feature Management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration">Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#client">Client</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#server">Server</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade">Upgrade</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-use">How to Use</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Backward compatibility with old servers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Forward compatibility</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Versioned commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Thin client</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Caching</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-plan">Test Plan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#regression-testing">Regression testing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-testing">Feature testing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Test Plan</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="api-compatiblity">
<h1>API_Compatiblity<a class="headerlink" href="#api-compatiblity" title="Link to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>The purpose of this feature is to make the IPA CLI tool (IPA client) as
simple as possible and develop a way to maintain compatibility among
various versions of servers and clients.</p>
</section>
<section id="use-cases">
<h2>Use Cases<a class="headerlink" href="#use-cases" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>be able to use a new IPA client to run commands on an old IPA server</p></li>
<li><p>be able to use an old IPA client to run commands on a new IPA server
after incompatible changes were made to the commands</p></li>
</ul>
</section>
<section id="design">
<h2>Design<a class="headerlink" href="#design" title="Link to this heading">#</a></h2>
</section>
<section id="backward-compatibility-with-old-servers">
<h2>Backward compatibility with old servers<a class="headerlink" href="#backward-compatibility-with-old-servers" title="Link to this heading">#</a></h2>
<p>Current server code check client version and rejects requests from
clients newer than the server. In order to allow the client to talk to
old servers, interface definitions for supported old API versions will
be bundled with the client.</p>
<p>The client will use interface definition appropriate for the API version
on the server - if it has interface definition for the exact API
version, it will use that, otherwise it will use the closest lower API
version interface definition available.</p>
<p>Interface definitions for the following API versions will be included:</p>
<ul class="simple">
<li><p>2.49 (RHEL and CentOS 6.5+)</p></li>
<li><p>2.114 (Fedora 22)</p></li>
<li><p>2.156 (RHEL and CentOS 7.2, Fedora 23)</p></li>
<li><p>2.164 (Fedora 24)</p></li>
</ul>
<p>When an API version becomes unsupported, its interface definition can be
removed from the client.</p>
<p>Additionaly, the client will no longer send argument default values with
each request, in order not to trigger an invocation error because of
unknown arguments.</p>
</section>
<section id="forward-compatibility">
<h2>Forward compatibility<a class="headerlink" href="#forward-compatibility" title="Link to this heading">#</a></h2>
<p>Current server is backward compatible with old clients, except when an
incompatible change is made to the API. To allow backward incompatible
changes in commands, it will be made possible to provide additional
versions of a command.</p>
<p>In order to avoid having to deal with API compatibility on a per-version
basis in the future, a thin client approach will be used for the client.
The server will provide API schema describing commands, their arguments
and output fields available over its API. The client will fetch the
schema from the server and will dynamically generate and provide the
commands to user.</p>
<section id="versioned-commands">
<h3>Versioned commands<a class="headerlink" href="#versioned-commands" title="Link to this heading">#</a></h3>
<p>The client will use the highest version of command known to it at build
time by default, or version 1 for unknown commands. Users will be able
to explicitly specify the version of command in each request. The server
will use version 1 by default, in order not to break old and 3rd party
clients.</p>
</section>
<section id="thin-client">
<h3>Thin client<a class="headerlink" href="#thin-client" title="Link to this heading">#</a></h3>
<p>Server and client side plugins needs to be split to allow separation.
Module <code class="docutils literal notranslate"><span class="pre">ipalib.plugins</span></code> will be split into <code class="docutils literal notranslate"><span class="pre">ipaserver.plugins</span></code> and
<code class="docutils literal notranslate"><span class="pre">ipaclient.plugins</span></code>.</p>
<p>On the server, API schema will be generated from modules and commands in
<code class="docutils literal notranslate"><span class="pre">ipaserver.plugins</span></code>. This schema will be provided to the client.
Documentation for plugins and commands will be part of the schema.</p>
<p>On client, proxy objects of server side plugins will be created using
the schema fetched from server. Client will be then able to display
command signature and help, perform basic validation of provided
arguments (data type check), forward the command call to the server and
display returned result. Also client side plugins will be available and
usually will preprocess user input, call one or more of server side
plugins, and possibly postprocess the result.</p>
<p>Due to security considerations there can’t be executable code in
metadata. To allow commands to have arguments with dynamic default
values separate server command to retrieve them will be provided.</p>
<p>For the same reason validation of arguments that require normalization
or rely on server-side information will be done on the server and
clients must send such arguments as plain strings.</p>
<p>When type of an argument is unknown to the client it must be sent as
plain string. Server will convert and validate the value.</p>
</section>
<section id="caching">
<h3>Caching<a class="headerlink" href="#caching" title="Link to this heading">#</a></h3>
<p>IPA client can cache downloaded API schema to reduce traffic and reduce
start up time. IPA client can send fingerprints of known schemata on API
initialization. When new API schema is available server will return the
full schema. When no new API schema is available server will add warning
to the response containing the current API version and schema
fingerprint.</p>
<p>API schema fingerprint is calculated on the server and must not change
for given schema. Client can’t interpret or calculate the fingerprint.</p>
</section>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Link to this heading">#</a></h2>
</section>
<section id="id1">
<h2>Backward compatibility with old servers<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>The interface definitions for old API versions are bundled in
ipaclient.remote_plugins.compat.major_minor
Python packages. They look like normal command and object plugin
definitions, except they contain no code, only parameter definitions.</p>
</section>
<section id="id2">
<h2>Forward compatibility<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<section id="id3">
<h3>Versioned commands<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>Command version is specified as part of the command name throughout the
framework, e.g. <code class="docutils literal notranslate"><span class="pre">user-show/1</span></code>. If not specified, the default version
is used.</p>
<p>In order to add new versions of a command, use the following pattern:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyCommandBase</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="c1"># put param definitions common to both versions here</span>
    <span class="o">...</span>
<span class="nd">@register</span><span class="p">()</span>
<span class="k">class</span> <span class="nc">my_command</span><span class="p">(</span><span class="n">MyCommandBase</span><span class="p">):</span>
    <span class="c1"># this is the current and main version of the command</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s1">&#39;2&#39;</span>
    <span class="o">...</span>
<span class="nd">@register</span><span class="p">()</span>
<span class="k">class</span> <span class="nc">my_command_1</span><span class="p">(</span><span class="n">MyCommandBase</span><span class="p">):</span>
    <span class="c1"># this is the old compatibility version 1</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;my_command&#39;</span>
    <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="id4">
<h3>Thin client<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<p>TBD</p>
</section>
<section id="id5">
<h3>Caching<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p>TBD</p>
</section>
</section>
<section id="feature-management">
<h2>Feature Management<a class="headerlink" href="#feature-management" title="Link to this heading">#</a></h2>
<p>UI</p>
<p>Not applicable - UI currently uses <code class="docutils literal notranslate"><span class="pre">json_metadata</span></code> API call to
retrieve information about objects, commands and parameters from server.
It’s reflecting current version and changing this is not in a scope of
this design.</p>
<p>CLI</p>
<p>TBD</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">#</a></h2>
<section id="client">
<h3>Client<a class="headerlink" href="#client" title="Link to this heading">#</a></h3>
<p>TBD</p>
</section>
<section id="server">
<h3>Server<a class="headerlink" href="#server" title="Link to this heading">#</a></h3>
<p>No new configuration.</p>
</section>
</section>
<section id="upgrade">
<h2>Upgrade<a class="headerlink" href="#upgrade" title="Link to this heading">#</a></h2>
<p>Not applicable - There is no change to the LDAP schema nor the stored
data.</p>
</section>
<section id="how-to-use">
<h2>How to Use<a class="headerlink" href="#how-to-use" title="Link to this heading">#</a></h2>
</section>
<section id="id6">
<h2>Backward compatibility with old servers<a class="headerlink" href="#id6" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ipa</span></code> command line tool will now work on new clients enrolled
against old server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>client$ rpm -q freeipa-client
freeipa-client-4.4.1-1.fc25.x86_64
client$ ipa ping
------------------------------------------
IPA server version 3.0.0. API version 2.49
------------------------------------------
</pre></div>
</div>
<p>On clients without this feature, this would fail:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>client$ rpm -q freeipa-client
freeipa-client-4.3.2-2.fc24.x86_64
client$ ipa ping
ipa: ERROR: 2.164 client incompatible with 2.49 server at &#39;https://ipa.example.com/ipa/xml&#39;
</pre></div>
</div>
</section>
<section id="id7">
<h2>Forward compatibility<a class="headerlink" href="#id7" title="Link to this heading">#</a></h2>
<section id="id8">
<h3>Versioned commands<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p>New client will request the highest available version of a command by
default:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>client$ ipa -v  ping
ipa: INFO: trying https://ipa.example.com/ipa/session/json
ipa: INFO: Forwarding &#39;ping/1&#39; to server &#39;https://ipa.example.com/ipa/session/json&#39;
------------------------------------------
IPA server version 4.4.1. API version 2.212
------------------------------------------
</pre></div>
</div>
<p>It is possible to explicitly request a specific command version instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>client$ ipa -v  ping/1
ipa: INFO: trying https://ipa.example.com/ipa/session/json
ipa: INFO: Forwarding &#39;ping/1&#39; to server &#39;https://ipa.example.com/ipa/session/json&#39;
------------------------------------------
IPA server version 4.4.1. API version 2.212
------------------------------------------
</pre></div>
</div>
<p>Requesting an unknown version of a command will result in an error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>client$ ipa -v  ping/2
ipa: INFO: trying https://ipa.example.com/ipa/session/json
ipa: INFO: Forwarding &#39;ping/2&#39; to server &#39;https://ipa.example.com/ipa/session/json&#39;
ipa: ERROR: unknown command &#39;ping/2&#39;
</pre></div>
</div>
</section>
<section id="id9">
<h3>Thin client<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>Thin client is transparent to the user, i.e. everything will work the
same as on clients without this feature.</p>
<p>It is possible to inspect the API schema using the new API introspection
commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>client$ ipa command-show hostgroup-add
  Name: hostgroup_add
  Version: 1
  Full name: hostgroup_add/1
  Documentation: Add a new hostgroup.
  Help topic: hostgroup/1
  Method of: hostgroup/1
  Method name: add
client$ ipa param-find hostgroup-add
  Name: cn
  Documentation: Name of host-group
  Type: str
  CLI name: hostgroup_name
  Label: Host-group
  Convert on server: True
  Name: description
  Documentation: A description of this host-group
  Type: str
  Required: False
  CLI name: desc
  Label: Description
  Name: setattr
  Documentation: Set an attribute to a name/value pair. Format is attr=value.
For multi-valued attributes, the command replaces the values already present.
  Exclude from: webui
  Type: str
  Required: False
  Multi-value: True
  CLI name: setattr
  Name: addattr
  Documentation: Add an attribute/value pair. Format is attr=value. The attribute
must be part of the schema.
  Exclude from: webui
  Type: str
  Required: False
  Multi-value: True
  CLI name: addattr
  Name: all
  Documentation: Retrieve and print all attributes from the server. Affects command output.
  Exclude from: webui
  Type: bool
  CLI name: all
  Default: False
  Positional argument: False
  Name: raw
  Documentation: Print entries as stored on the server. Only affects output format.
  Exclude from: webui
  Type: bool
  CLI name: raw
  Default: False
  Positional argument: False
  Name: no_members
  Documentation: Suppress processing of membership attributes.
  Exclude from: webui
  Type: bool
  Default: False
  Positional argument: False
----------------------------
Number of entries returned 7
----------------------------
client$ ipa class-show hostgroup
  Name: hostgroup
  Version: 1
  Full name: hostgroup/1
client$ ipa param-find hostgroup
  Name: cn
  Documentation: Name of host-group
  Type: str
  Label: Host-group
  Name: description
  Documentation: A description of this host-group
  Type: str
  Required: False
  Label: Description
  Name: member_host
  Type: str
  Required: False
  Label: Member hosts
  Name: member_hostgroup
  Type: str
  Required: False
  Label: Member host-groups
  Name: memberof_hostgroup
  Type: str
  Required: False
  Label: Member of host-groups
  Name: memberof_netgroup
  Type: str
  Required: False
  Label: Member of netgroups
  Name: memberof_sudorule
  Type: str
  Required: False
  Label: Member of Sudo rule
  Name: memberof_hbacrule
  Type: str
  Required: False
  Label: Member of HBAC rule
  Name: memberindirect_host
  Type: str
  Required: False
  Label: Indirect Member hosts
  Name: memberindirect_hostgroup
  Type: str
  Required: False
  Label: Indirect Member host-groups
  Name: memberofindirect_hostgroup
  Type: str
  Required: False
  Label: Indirect Member of host-group
  Name: memberofindirect_sudorule
  Type: str
  Required: False
  Label: Indirect Member of Sudo rule
  Name: memberofindirect_hbacrule
  Type: str
  Required: False
  Label: Indirect Member of HBAC rule
-----------------------------
Number of entries returned 13
-----------------------------
client$ ipa output-find hostgroup-add
  Name: summary
  Documentation: User-friendly description of action performed
  Type: str
  Required: False
  Name: result
  Type: dict
  Name: value
  Documentation: The primary_key value of the entry, e.g. &#39;jdoe&#39; for a user
  Type: str
----------------------------
Number of entries returned 3
----------------------------
client$ ipa topic-show hostgroup
  Name: hostgroup
  Version: 1
  Full name: hostgroup/1
  Documentation: Groups of hosts.
Manage groups of hosts. This is useful for applying access control to a
number of hosts by using Host-based Access Control.
EXAMPLES:
 Add a new host group:
   ipa hostgroup-add --desc=&quot;Baltimore hosts&quot; baltimore
 Add another new host group:
   ipa hostgroup-add --desc=&quot;Maryland hosts&quot; maryland
 Add members to the hostgroup (using Bash brace expansion):
   ipa hostgroup-add-member --hosts={box1,box2,box3} baltimore
 Add a hostgroup as a member of another hostgroup:
   ipa hostgroup-add-member --hostgroups=baltimore maryland
 Remove a host from the hostgroup:
   ipa hostgroup-remove-member --hosts=box2 baltimore
 Display a host group:
   ipa hostgroup-show baltimore
 Delete a hostgroup:
   ipa hostgroup-del baltimore
</pre></div>
</div>
</section>
<section id="id10">
<h3>Caching<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<p>API schema is cached on the client for an hour. During this interval,
the client will not try to contact the server about the schema:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipa -v ping
ipa: INFO: trying https://ipa.example.com/ipa/session/json
ipa: INFO: Forwarding &#39;ping/1&#39; to json server &#39;https://ipa.example.com/ipa/session/json&#39;
-------------------------------------------------------------------
IPA server version 4.4.1. API version 2.212
-------------------------------------------------------------------
</pre></div>
</div>
<p>To refresh the cache (e.g. if you want the client to immediately use an
up-to-date API schema after server upgrade), use the
<code class="docutils literal notranslate"><span class="pre">force_schema_check</span></code> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipa -v -eforce_schema_check=1 ping
ipa: INFO: trying https://ipa.example.com/ipa/session/json
    ipa: INFO: Forwarding &#39;schema&#39; to json server &#39;https://ipa.example.com/ipa/session/json&#39;
ipa: INFO: trying https://ipa.example.com/ipa/session/json
ipa: INFO: Forwarding &#39;ping/1&#39; to json server &#39;https://ipa.example.com/ipa/session/json&#39;
-------------------------------------------------------------------
IPA server version 4.4.1. API version 2.212
-------------------------------------------------------------------
</pre></div>
</div>
</section>
</section>
<section id="test-plan">
<h2>Test Plan<a class="headerlink" href="#test-plan" title="Link to this heading">#</a></h2>
</section>
<section id="regression-testing">
<h2>Regression testing<a class="headerlink" href="#regression-testing" title="Link to this heading">#</a></h2>
<p>New IPA client (resp. server) MUST behave exactly the same as the old
IPA client (resp. server) when communicating with the old IPA server
(resp. client).</p>
</section>
<section id="feature-testing">
<h2>Feature testing<a class="headerlink" href="#feature-testing" title="Link to this heading">#</a></h2>
<p>TBD</p>
</section>
<section id="id11">
<h2>Test Plan<a class="headerlink" href="#id11" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="V4/Thin_Client/Test_Plan">Thin Client V4.4 test plan</a></p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-cases">Use Cases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#design">Design</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backward-compatibility-with-old-servers">Backward compatibility with old servers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#forward-compatibility">Forward compatibility</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#versioned-commands">Versioned commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#thin-client">Thin client</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caching">Caching</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Backward compatibility with old servers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Forward compatibility</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Versioned commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Thin client</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Caching</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-management">Feature Management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration">Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#client">Client</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#server">Server</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade">Upgrade</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-use">How to Use</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Backward compatibility with old servers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Forward compatibility</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Versioned commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Thin client</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Caching</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-plan">Test Plan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#regression-testing">Regression testing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-testing">Feature testing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Test Plan</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>