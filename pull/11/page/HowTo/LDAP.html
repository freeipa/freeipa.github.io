

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>LDAP &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/HowTo/LDAP';</script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="/_static/freeipa-logo-small.png" class="logo__image only-light" alt="Logo image" />
</a>
<div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/page/HowTo/LDAP.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>LDAP</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">LDAP</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ldap-overview">LDAP Overview</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-layout-dit">Data layout (DIT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#system-accounts">System Accounts</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#handy-helper-for-system-accounts-management">Handy helper for system accounts management</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ssl-starttls">SSL/startTLS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tool-configuration">Tool configuration</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#unix-clients">Unix clients</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="ldap">
<h1>LDAP<a class="headerlink" href="#ldap" title="Permalink to this heading">#</a></h1>
</section>
<section id="ldap-overview">
<h1>LDAP Overview<a class="headerlink" href="#ldap-overview" title="Permalink to this heading">#</a></h1>
<p>This guide is meant to provide general guidance on configuring an LDAP
client to connect to IPA. There are specific guides/Howtos for some
clients/servers.</p>
</section>
<section id="data-layout-dit">
<h1>Data layout (DIT)<a class="headerlink" href="#data-layout-dit" title="Permalink to this heading">#</a></h1>
<p>The basedn in an IPA installation consists of a set of domain components
(dc) for the initial domain that IPA was configured with. If you
installed IPA with the domain example.com then your basedn is
<code class="docutils literal notranslate"><span class="pre">dc=example,dc=com</span></code>. We often refer to this as $SUFFIX. Don’t confuse
this with DNS domains. You will only ever have one basedn, the one
defined during installation.</p>
<p>You can find your basedn, and other interesting things, in
<code class="docutils literal notranslate"><span class="pre">/etc/ipa/default.conf</span></code></p>
<p>IPA uses a flat structure, storing like objects in what we call
containers. Some container examples are:</p>
<ul class="simple">
<li><p>Users: <code class="docutils literal notranslate"><span class="pre">cn=users,cn=accounts,$SUFFIX</span></code></p></li>
<li><p>Groups: <code class="docutils literal notranslate"><span class="pre">cn=groups,cn=accounts,$SUFFIX</span></code></p></li>
</ul>
</section>
<section id="system-accounts">
<h1>System Accounts<a class="headerlink" href="#system-accounts" title="Permalink to this heading">#</a></h1>
<p>There are some LDAP clients that need a pre-configured account. Some
examples are the LDAP autofs client and sudo. Using a user’s credentials
is generally preferable to creating a shared system account but that is
not always possible. Do <strong>not</strong> use the Directory Manager account to
authenticate remote services to the IPA LDAP server. Use a system
account, created like this:.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ldapmodify -x -D &#39;cn=Directory Manager&#39; -W</span>
<span class="n">dn</span><span class="p">:</span> <span class="n">uid</span><span class="o">=</span><span class="n">system</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">sysaccounts</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">etc</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">changetype</span><span class="p">:</span> <span class="n">add</span>
<span class="n">objectclass</span><span class="p">:</span> <span class="n">account</span>
<span class="n">objectclass</span><span class="p">:</span> <span class="n">simplesecurityobject</span>
<span class="n">uid</span><span class="p">:</span> <span class="n">system</span>
<span class="n">userPassword</span><span class="p">:</span> <span class="n">secret123</span>
<span class="n">passwordExpirationTime</span><span class="p">:</span> <span class="mi">20380119031407</span><span class="n">Z</span>
<span class="n">nsIdleTimeout</span><span class="p">:</span> <span class="mi">0</span>
<span class="o">&lt;</span><span class="n">blank</span> <span class="n">line</span><span class="o">&gt;</span>
<span class="o">^</span><span class="n">D</span>
</pre></div>
</div>
<p>Be sure to change the password to something more secure, and the uid to
something reasonable.</p>
<p>The reason to use an account like this rather than creating a normal
user account in IPA and using that is that the system account exists
only for binding to LDAP. It is not a real POSIX user, can’t log into
any systems and doesn’t own any files.</p>
<p>This use also has no special rights and is unable to write any data in
the IPA LDAP server, only read.</p>
<p>Note: IPA 4.0 is going to change the default stance on data from nearly
everything is readable to nothing is readable, by default. You will
eventually need to add some Access Control Instructions (ACI’s) to grant
read access to the parts of the LDAP tree you will need.</p>
<section id="handy-helper-for-system-accounts-management">
<h2>Handy helper for system accounts management<a class="headerlink" href="#handy-helper-for-system-accounts-management" title="Permalink to this heading">#</a></h2>
<p>Noah Bliss
<a class="reference external" href="https://lists.fedorahosted.org/archives/list/freeipa-devel&#64;lists.fedorahosted.org/message/AI4WSAMPKF4OSV6DFMKKTDEK4P7Y33SF/">created</a>
a shell helper to manage system accounts:
<a class="reference external" href="https://github.com/noahbliss/freeipa-sam">freeipa-sam</a>.</p>
</section>
</section>
<section id="ssl-starttls">
<h1>SSL/startTLS<a class="headerlink" href="#ssl-starttls" title="Permalink to this heading">#</a></h1>
<p>When possible, configure your LDAP client to communicate over SSL/TLS.
You can either use port 389 and enable startTLS in the client or
configure to use the ldaps port, 636. The IPA CA certificate can be
found in /etc/ipa/ca.crt on all enrolled hosts.</p>
</section>
<section id="tool-configuration">
<h1>Tool configuration<a class="headerlink" href="#tool-configuration" title="Permalink to this heading">#</a></h1>
<p>Since IPA 3.0 we’ve configured /etc/openldap/ldap.conf with some bare
defaults:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">URI</span> <span class="n">ldaps</span><span class="p">:</span><span class="o">//</span><span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">BASE</span> <span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">TLS_CACERT</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ipa</span><span class="o">/</span><span class="n">ca</span><span class="o">.</span><span class="n">crt</span>
</pre></div>
</div>
<p>Setting these defaults means you don’t need to pass as many options to
tools like ldapsearch.</p>
<p>So you can do this:</p>
<p><code class="docutils literal notranslate"><span class="pre">$ ldapsearch -x uid=admin</span></code></p>
<p>Rather than:</p>
<p><code class="docutils literal notranslate"><span class="pre">$ ldapsearch -x -h ipa.example.com  -b dc=example,dc=com uid=admin</span></code></p>
</section>
<section id="unix-clients">
<h1>Unix clients<a class="headerlink" href="#unix-clients" title="Permalink to this heading">#</a></h1>
<p>For specific information on configuring Unix clients to authenticate
against IPA, see <a class="reference external" href="ConfiguringUnixClients">ConfiguringUnixClients</a></p>
<p>As a general rule, we recommend using RFC 2307bis when possible. If this
is not possible, we provide a compatibility layer that provides the same
information in an RFC 2307-compatible way. The only change you need to
make is to set the <code class="docutils literal notranslate"><span class="pre">basedn</span></code> to <code class="docutils literal notranslate"><span class="pre">cn=compat,$SUFFIX</span></code></p>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">LDAP</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ldap-overview">LDAP Overview</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-layout-dit">Data layout (DIT)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#system-accounts">System Accounts</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#handy-helper-for-system-accounts-management">Handy helper for system accounts management</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ssl-starttls">SSL/startTLS</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tool-configuration">Tool configuration</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#unix-clients">Unix clients</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>