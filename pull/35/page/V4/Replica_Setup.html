
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Replica_Setup &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/V4/Replica_Setup';</script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="https://raw.githubusercontent.com/freeipa/freeipa.github.io/main/src/_static/freeipa-logo-small.png" class="logo__image" alt="Logo image" />
</a>
<div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Documentation.html">Documentation</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Troubleshooting.html">Troubleshooting</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/page/V4/Replica_Setup.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Replica_Setup</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-server-configuration">IPA server configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-replica-configuration">IPA replica configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-replica-server-in-ipaservers-group">IPA replica server in ipaservers group</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-client-enrolled-and-promoted-to-replica-with-one-time-password-in-one-step">IPA client enrolled and promoted to replica with One Time Password in one step</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="replica-setup">
<h1>Replica_Setup<a class="headerlink" href="#replica-setup" title="Link to this heading">#</a></h1>
<p>This text should be straightforward guide to users who want to setup and
test FreeIPA replica feature.</p>
<ul class="simple">
<li><p>Please note that used host names (ipa-server.example.test,
replica1.example.test, replica2.example.test) are only for better
orientation and these names do not take effect on setup.</p></li>
</ul>
<section id="ipa-server-configuration">
<h2>IPA server configuration<a class="headerlink" href="#ipa-server-configuration" title="Link to this heading">#</a></h2>
<p>First of all we need to install FreeIPA server to one of our machines.
This should be easily done with command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>dnf install -y freeipa-server freeipa-server-dns
</pre></div>
</div>
<p>The <em>freeipa-server-dns</em> is recommended to install but you will <strong>not</strong>
be notified until the <code class="docutils literal notranslate"><span class="pre">ipa-server-install</span></code> command has been run and
you will try to configure integrated DNS. You can try to set up entire
FreeIPA server but before installation process it will most likely fail
with <em>missing freeipa-server-dns</em> message. We will predict this and
install freeipa-server-dns too.</p>
<hr class="docutils" />
<p>After this we can set up our server defaults using command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa-server-install --domain=example.test --realm=EXAMPLE.TEST
</pre></div>
</div>
<p>This installation will ask for some additional information including
server administrator and Directory Manager password which you can see
down below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Do you want to configure DNS forwarders? [yes]: yes
Following DNS servers are configured in /etc/resolv.conf: 10.10.160.1, 10.16.101.41, 10.11.5.19
Do you want to configure these servers as DNS forwarders? [yes]: yes
All DNS servers from /etc/resolv.conf were added. You can enter additional addresses now:
Enter an IP address for a DNS forwarder, or press Enter to skip:
Checking DNS forwarders, please wait ...
Do you want to search for missing reverse zones? [yes]: yes

The IPA Master Server will be configured with:
Hostname:       ipa-server.example.test
IP address(es): 10.16.4.23
Domain name:    example.test
Realm name:     EXAMPLE.TEST

BIND DNS server will be configured to serve IPA domain with:
Forwarders:    10.10.160.1, 10.16.101.41, 10.11.5.19
Reverse zone(s):  No reverse zone

Continue to configure the system with these values? [no]: yes

The following operations may take some minutes to complete.
...
</pre></div>
</div>
<p>At this point we can say that we have basic FreeIPA server installation
done.</p>
<hr class="docutils" />
<p>Now we could get credentials as server administrator to test and later
configure ipa-server</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>kinit admin
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="ipa-replica-configuration">
<h2>IPA replica configuration<a class="headerlink" href="#ipa-replica-configuration" title="Link to this heading">#</a></h2>
<p>There are three ways to get it done. First is to use <em>admin’s</em> account
and enroll host using it, but we do not want to and we should not use
this administrator’s account or password like this. Instead we can
create user with privileges to enrol host and promote it with one time
password to replica so only his password will be used in configuration
(or even installation scripts) and second one is to add another host
into special hostgroup <em>ipaservers</em> and promote client into replica
without any password needed. We will try both of them.</p>
</section>
<hr class="docutils" />
<section id="ipa-replica-server-in-ipaservers-group">
<h2>IPA replica server in ipaservers group<a class="headerlink" href="#ipa-replica-server-in-ipaservers-group" title="Link to this heading">#</a></h2>
<p>This is may be the easiest way to get it done. The “only” thing to be
done is to have already enrolled replica machine added into
<code class="docutils literal notranslate"><span class="pre">ipaservers</span></code> group on main IPA server. To get it done you have to
enroll machine to IPA server first (if you had one please skip this
step). <strong>On the replica1 machine run:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>dnf install -y ipa-server
</pre></div>
</div>
<p>Configure client side components and use admin’s password:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa-client-install --domain=example.test --realm=EXAMPLE.TEST --server=ipa-server.example.test
...
Proceed with fixed values and no DNS discovery? [no]: yes
Client hostname: replica1.example.test
Realm: EXAMPLE.TEST
DNS Domain: example.test
IPA Server: ipa-server.example.test
BaseDN: dc=example,dc=test

Continue to configure the system with these values? [no]: yes
Skipping synchronizing time with NTP server.
User authorized to enroll computers: admin
Password for admin@EXAMPLE.TEST:
Successfully retrieved CA cert
    Subject:     CN=Certificate Authority,O=EXAMPLE.TEST
    Issuer:      CN=Certificate Authority,O=EXAMPLE.TEST
    Valid From:  Tue Aug 23 10:24:58 2016 UTC
    Valid Until: Sat Aug 23 10:24:58 2036 UTC

Enrolled in IPA realm EXAMPLE.TEST
...
</pre></div>
</div>
<ul class="simple">
<li><p>Please note that if host is already IPA enrolled and have client side
components installed we can skip these steps</p></li>
</ul>
<hr class="docutils" />
<p><strong>On the ipa-server</strong> we should now add our replica1 host into
ipaservers group with command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa hostgroup-add-member ipaservers --hosts replica1.example.test
  Host-group: ipaservers
  Description: IPA server hosts
  Member hosts: ipa-server.example.test, replica1.example.test
-------------------------
Number of members added 1
-------------------------
</pre></div>
</div>
<p>Obviously the result of command <code class="docutils literal notranslate"><span class="pre">ipa</span> <span class="pre">hostgroup-find</span></code> should be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa hostgroup-find
-------------------
1 hostgroup matched
-------------------
  Host-group: ipaservers
  Description: IPA server hosts
  Member hosts: ipa-server.example.test, replica1.example.test
----------------------------
Number of entries returned 1
----------------------------
</pre></div>
</div>
<p>and result of <code class="docutils literal notranslate"><span class="pre">ipa</span> <span class="pre">host-find</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>---------------
2 hosts matched
---------------
  Host name: ipa-server.example.test
  Principal name: host/ipa-server.example.test@EXAMPLE.TEST
  Password: False
  Member of host-groups: ipaservers
  Keytab: True
  Managed by: ipa-server.example.test
  SSH public key fingerprint: 4B:F4:EB:0E:6E:03:45:EF:C6:13:4E:E3:2C:F0:0B:42 (ssh-ed25519), 2B:82:7E:2B:07:72:46:CA:7F:93:10:A0:F0:8B:1B:D1 (ecdsa-sha2-nistp256), DB:1B:67:E9:2D:D9:29:77:B2:33:A3:DD:8A:B3:A8:5A
                              (ssh-rsa)

  Host name: replica1.example.test
  Principal name: host/replica1.example.test@EXAMPLE.TEST
  Password: False
  Member of host-groups: ipaservers
  Keytab: True
  Managed by: replica1.example.test
  SSH public key fingerprint: 17:B0:CF:8E:02:E8:5E:F0:BE:7E:DC:4D:9F:7B:63:BB (ecdsa-sha2-nistp256), FE:33:03:48:F8:40:51:DD:30:29:BD:08:BF:81:1A:18 (ssh-ed25519), 70:D8:67:27:7E:7A:02:AA:83:61:D0:ED:2A:DF:84:A0
                              (ssh-rsa)
----------------------------
Number of entries returned 2
----------------------------
</pre></div>
</div>
<hr class="docutils" />
<p>If host <strong>replica1</strong> is successfully enrolled and in host group
ipaservers then we just run command <code class="docutils literal notranslate"><span class="pre">ipa-replica-install</span></code> and there is
no need for admin’s password as you can see:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa-replica-install
WARNING: conflicting time&amp;date synchronization service &#39;chronyd&#39; will
be disabled in favor of ntpd

ipa         : ERROR    Reverse DNS resolution of address 10.16.4.23 (ipa-server.example.test) failed. Clients may not function properly. Please check your DNS setup. (Note that this check queries IPA DNS directly and ignores /etc/hosts.)
Continue? [no]: yes
Run connection check to master
Connection check OK
Configuring NTP daemon (ntpd)
  [1/4]: stopping ntpd
  [2/4]: writing configuration
  [3/4]: configuring ntpd to start on boot
  [4/4]: starting ntpd
Done configuring NTP daemon (ntpd).
Configuring directory server (dirsrv). Estimated time: 1 minute
...
</pre></div>
</div>
<p>Now we have IPA replica and we have get it done only by adding this host
into <em>ipaservers</em> group. Hosts in this group automatically gets
credentials to become replica and when <code class="docutils literal notranslate"><span class="pre">ipa-replica-install</span></code> command
used, you do not need to use administrator password or other users
privileged to promote host into replica.</p>
<p>We can now <code class="docutils literal notranslate"><span class="pre">kinit</span></code> as admin on <strong>replica1</strong> and add new user:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> ipa user-add csantana --first=Carlos --last=Santana
---------------------
Added user &quot;csantana&quot;
---------------------
  User login: csantana
  First name: Carlos
  Last name: Santana
  Full name: Carlos Santana
  Display name: Carlos Santana
  Initials: CS
  Home directory: /home/csantana
  GECOS: Carlos Santana
  Login shell: /bin/sh
  Kerberos principal: csantana@EXAMPLE.TEST
  Email address: csantana@example.test
  UID: 1217300000
  GID: 1217300000
  Password: False
  Member of groups: ipausers
  Kerberos keys available: False
</pre></div>
</div>
<p>Now the <code class="docutils literal notranslate"><span class="pre">ipa</span> <span class="pre">user-find</span></code> command should display same output <strong>on both
ipa-server and replica1 machine</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa user-find
---------------
2 users matched
---------------
  User login: admin
  Last name: Administrator
  Home directory: /home/admin
  Login shell: /bin/bash
  UID: 1217200000
  GID: 1217200000
  Account disabled: False
  Password: True
  Kerberos keys available: True

  User login: csantana
  First name: Carlos
  Last name: Santana
  Home directory: /home/csantana
  Login shell: /bin/sh
  Email address: csantana@example.test
  UID: 1217300000
  GID: 1217300000
  Account disabled: False
  Password: False
  Kerberos keys available: False
----------------------------
Number of entries returned 2
----------------------------
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="ipa-client-enrolled-and-promoted-to-replica-with-one-time-password-in-one-step">
<h2>IPA client enrolled and promoted to replica with One Time Password in one step<a class="headerlink" href="#ipa-client-enrolled-and-promoted-to-replica-with-one-time-password-in-one-step" title="Link to this heading">#</a></h2>
<p><strong>On the IPA server</strong> we should add new host and copy <em>OTP</em> (Random
password):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa host-add replica2.example.test --random
----------------------------------------------
Added host &quot;replica2.example.test&quot;
----------------------------------------------
  Host name: replica2.example.test
  Random password: huN@Nk5k9vjg
  Password: True
  Keytab: False
  Managed by: replica2.example.test
</pre></div>
</div>
<p>Then we make him member of host group ipaservers:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa hostgroup-add-member ipaservers --hosts replica2.example.test
  Host-group: ipaservers
  Description: IPA server hosts
  Member hosts: ipa-server.example.test, replica1.example.test, replica2.example.test
-------------------------
Number of members added 1
-------------------------
</pre></div>
</div>
<hr class="docutils" />
<p>Now we have to install freeipa-server <strong>on replica2</strong>.example.test :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>dnf install -y freeipa-server
</pre></div>
</div>
<p>To configure replica on replica2.example.test machine just run:</p>
<ul class="simple">
<li><p>make sure that OTP is closed in quotes, there may be some special
characters which might be interpreted by shell</p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa-replica-install -p &#39;huN@Nk5k9vjg&#39; --server ipa-server.example.test --domain example.test --realm EXAMPLE.TEST
</pre></div>
</div>
<hr class="docutils" />
<p>After successful configuration on all three machines the output of
command <code class="docutils literal notranslate"><span class="pre">ipa-host-find</span></code> should be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa host-find
---------------
3 hosts matched
---------------
  Host name: ipa-server.example.test
  Principal name: host/ipa-server.example.test@EXAMPLE.TEST
  Password: False
  Member of host-groups: ipaservers
  Keytab: True
  Managed by: ipa-server.example.test
  SSH public key fingerprint: 4B:F4:EB:0E:6E:03:45:EF:C6:13:4E:E3:2C:F0:0B:42 (ssh-ed25519), 2B:82:7E:2B:07:72:46:CA:7F:93:10:A0:F0:8B:1B:D1 (ecdsa-sha2-nistp256), DB:1B:67:E9:2D:D9:29:77:B2:33:A3:DD:8A:B3:A8:5A
                              (ssh-rsa)

  Host name: replica1.example.test
  Principal name: host/replica1.example.test@EXAMPLE.TEST
  Password: False
  Member of host-groups: ipaservers
  Keytab: True
  Managed by: replica1.example.test
  SSH public key fingerprint: 17:B0:CF:8E:02:E8:5E:F0:BE:7E:DC:4D:9F:7B:63:BB (ecdsa-sha2-nistp256), FE:33:03:48:F8:40:51:DD:30:29:BD:08:BF:81:1A:18 (ssh-ed25519), 70:D8:67:27:7E:7A:02:AA:83:61:D0:ED:2A:DF:84:A0
                              (ssh-rsa)

  Host name: replica2.example.test
  Principal name: host/replica2.example.test@EXAMPLE.TEST
  Password: False
  Member of host-groups: ipaservers
  Keytab: True
  Managed by: replica2.example.test
  SSH public key fingerprint: 11:E6:02:AB:0D:BB:A4:28:BE:CB:0F:68:B1:4A:EB:B8 (ssh-ed25519), 82:78:5E:14:4C:B7:92:D1:F4:C1:6D:D1:8E:C0:87:84 (ssh-rsa), 46:FA:6A:03:BD:32:89:5B:58:A4:1B:C2:4A:C1:22:77 (ecdsa-
                              sha2-nistp256)
----------------------------
Number of entries returned 3
----------------------------
</pre></div>
</div>
<p>We just add one other user for example again <strong>on</strong> new
<strong>replica2</strong>.example.test to test functionality</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa user-add sclaus --first=Santa --last=Claus
-------------------
Added user &quot;sclaus&quot;
-------------------
  User login: sclaus
  First name: Santa
  Last name: Claus
  Full name: Santa Claus
  Display name: Santa Claus
  Initials: SC
  Home directory: /home/sclaus
  GECOS: Santa Claus
  Login shell: /bin/sh
  Kerberos principal: sclaus@EXAMPLE.TEST
  Email address: sclaus@example.test
  UID: 1217250000
  GID: 1217250000
  Password: False
  Member of groups: ipausers
  Kerberos keys available: False
</pre></div>
</div>
<p>And all ipaservers should display same info:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ipa user-find
---------------
3 users matched
---------------
  User login: admin
  Last name: Administrator
  Home directory: /home/admin
  Login shell: /bin/bash
  UID: 1217200000
  GID: 1217200000
  Account disabled: False
  Password: True
  Kerberos keys available: True

  User login: csantana
  First name: Carlos
  Last name: Santana
  Home directory: /home/csantana
  Login shell: /bin/sh
  Email address: csantana@example.test
  UID: 1217300000
  GID: 1217300000
  Account disabled: False
  Password: False
  Kerberos keys available: False

  User login: sclaus
  First name: Santa
  Last name: Claus
  Home directory: /home/sclaus
  Login shell: /bin/sh
  Email address: sclaus@example.test
  UID: 1217250000
  GID: 1217250000
  Account disabled: False
  Password: False
  Kerberos keys available: False
----------------------------
Number of entries returned 3
----------------------------
</pre></div>
</div>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-server-configuration">IPA server configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-replica-configuration">IPA replica configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-replica-server-in-ipaservers-group">IPA replica server in ipaservers group</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-client-enrolled-and-promoted-to-replica-with-one-time-password-in-one-step">IPA client enrolled and promoted to replica with One Time Password in one step</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>