
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>FreeIPA_demonstration_tools &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/FreeIPA_demonstration_tools';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="https://raw.githubusercontent.com/freeipa/freeipa.github.io/main/src/_static/freeipa-logo-small.png" class="logo__image" alt="Logo image" />
</a>
<div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Documentation.html">Documentation</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Troubleshooting.html">Troubleshooting</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/page/FreeIPA_demonstration_tools.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>FreeIPA_demonstration_tools</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="freeipa-demonstration-tools">
<h1>FreeIPA_demonstration_tools<a class="headerlink" href="#freeipa-demonstration-tools" title="Link to this heading">#</a></h1>
<p><strong>Introduction</strong></p>
<hr class="docutils" />
<p>These tools are offering opportunity to easily try out FreeIPA in
virtual machines environment. And it could be done within a few clicks.
Whole process is divided into two parts, each covered by one script.</p>
<p>First part - covered by <strong>ipa-base-prepare</strong> script - takes care of
preparing base images. The base image is common for all virtual machines
and thus reduce time needed to create whole testing environment.</p>
<p>Second part is covered by <strong>ipa-demo</strong> script. It takes base image,
creates the virtual machines and installs and configures the FreeIPA on
all machines.</p>
<p>The environment consists of three virtual machines (one server and two
clients) by default, but the number of clients could by set to higher
one.</p>
<p><strong>Requirements</strong></p>
<hr class="docutils" />
<p>Both scripts were tested on Fedora 15 x86_64 and RHEL 6.1 x86_64
systems. These packages are required:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">libvirt-0.8.8-7</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">qemu-0.14.0-8</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">qemu-system-0.14.0-8</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">qemu-kvm-0.14.0-8</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">qemu-img-0.14.0-8</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">python-virtinst-0.500.6-2</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">openssh-clients-5.6p1-34</span></code></div>
</div>
<p>(Optionally you can install virt-manager and/or virt-viewer)</p>
<p>Hardware (this configuration allowed us to run smoothly all three VMs as
well as use system):</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">10GB of disk free space</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">4 GB RAM</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">CPU dual-core with virtualization support</span></code></div>
</div>
<p>One virtual machine is supposed to use one CPU and 1GB RAM. Disk images
has growing size with maximum size set to 10GB.</p>
<p><strong>Get It</strong></p>
<hr class="docutils" />
<p>Both scripts with all necessary files are located in git repository
<a class="reference external" href="https://github.com/ohamada/demo">here</a>. You can download them
through web interface or using git:</p>
<p><code class="docutils literal notranslate"><span class="pre">git clone https://github.com/ohamada/demo.git</span></code></p>
<p><strong>Easiest way to try out</strong></p>
<hr class="docutils" />
<p>Now we’ll show the easiest way to try out FreeIPA:</p>
<ul class="simple">
<li><p>Get the scripts and extract them into a directory.</p></li>
</ul>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">git clone https://github.com/ohamada/demo.git</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">cd demo</span></code></div>
</div>
<ul class="simple">
<li><p>You must be root to run the scripts:</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">su</span></code></p>
<ul class="simple">
<li><p>Prepare base image. It’s strongly recommended to specify Fedora
repository. You should choose the repository from <a class="reference external" href="http://mirrors.fedoraproject.org/publiclist/Fedora/15/x86_64/">Fedora mirrors
list</a>
that is the nearest one to your current location. Just remember that
the selected repository address must end with ‘…/x86_64/os’
(example:
‘<a class="reference external" href="http://dl.fedoraproject.org/pub/fedora/linux/releases/15/Fedora/x86_64/os/">http://dl.fedoraproject.org/pub/fedora/linux/releases/15/Fedora/x86_64/os/</a>’):</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``./ipa-base-prepare.sh --createbase --repo $selected_repository ``
</pre></div>
</div>
<ul class="simple">
<li><p>Prepare installation image:</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">./ipa-base-prepare.sh --installipa</span></code></p>
<ul class="simple">
<li><p>Create virtual machines and prepare whole environment (disk images
will be saved in /var/lib/libvirt/images)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">./ipa-demo.sh</span></code></p>
<ul class="simple">
<li><p>When the installation finishes, it prints out all necessary
instruction on how to connect to virtual machines</p></li>
<li><p>As a next step you can try to set up MediaWiki to run against
FreeIPA. This tutorial should help you: <a class="reference external" href="Setting_up_MediaWiki_to_run_against_FreeIPA">Setting up MediaWiki to run
against FreeIPA</a>.</p></li>
</ul>
<p><strong>ipa-base-prepare</strong></p>
<hr class="docutils" />
<p>Ipa-base-prepare can create base image, update it and prepare image that
has freeipa-server installed and is ready to be used by ipa-demo script
for creating virtual machines. It generates own ssh key which is then
used in further steps for running commands on virtual machines. Created
base images are saved in directory called ‘archive’. File names of base
images are in this format ‘f15-ipa-demo-base.$date.qcow2’. $date is used
for discovering most actual base image. Base image ready for
installation is called ‘ipa-ready-image’. Script arguments:</p>
<p>Mandatory arguments:</p>
<ul class="simple">
<li><p><em>–createbase</em> - create base image</p></li>
<li><p><em>–updatebase</em> - update base image to contain actual packages</p></li>
<li><p><em>–installipa</em> - prepare base image with installed FreeIPA</p></li>
<li><p><em>–repo</em> - specify Fedora repository. Using this option is strongly
recommended because the default one is very slow. You should choose
the repository from <a class="reference external" href="http://mirrors.fedoraproject.org/publiclist/Fedora/15/x86_64/">Fedora mirrors
list</a>
that is the nearest one to your current location. Just remember that
the selected repository address must end with …/x86_64/os - for
example
` &lt;<a class="reference external" href="http://dl.fedoraproject.org/pub/fedora/linux/releases/15/Fedora/x86_64/os/">http://dl.fedoraproject.org/pub/fedora/linux/releases/15/Fedora/x86_64/os/</a>&gt;`__<a class="reference external" href="http://dl.fedoraproject.org/pub/fedora/linux/releases/15/Fedora/x86_64/os/">http://dl.fedoraproject.org/pub/fedora/linux/releases/15/Fedora/x86_64/os/</a></p></li>
</ul>
<p>Optional arguments:</p>
<ul class="simple">
<li><p><em>–imgdir</em> - specify different directory for lookup/storing of base
images</p></li>
<li><p><em>–sshkey</em> - specify ssh key to be used by script instead of newly
generated key</p></li>
<li><p><em>–base</em> - specify base image. If you want to update base image or
prepare installation base image from base image of your own choice.</p></li>
<li><p><em>-h, –help</em> - prints out help</p></li>
</ul>
<p>Usage:</p>
<ul class="simple">
<li><p>Create base image, use existing ssh key and other than default
repository</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">./ipa-base-prepare.sh --createbase --repo http://dl.fedoraproject.org/pub/fedora/linux/releases/15/Fedora/x86_64/os/ --sshkey /home/user/.ssh/key_rsa</span></code></p>
<p><strong>ipa-demo</strong></p>
<hr class="docutils" />
<p>Ipa-demo takes image called ‘ipa-ready-image.qcow2’ and uses it as a
base image for creating virtual machines. Images of virtual machines are
saved in ‘/var/lib/libvirt/images/’ directory by default, but user can
specify his own directory. Script also needs private ssh key to access
virtual machines in order to run necessary installation scripts. He
seeks for the key in ‘cert’ subdirectory of his working directory, but
user can specify which key to use. Script arguments are:</p>
<ul class="simple">
<li><p><em>–base</em> - specify base image. If you want to update base image or
prepare installation base image from base image of your own choice.</p></li>
<li><p><em>–sshkey</em> - specify ssh key to be used by script</p></li>
<li><p><em>–imgdir</em> - specify directory for storing disk images, directory
must exist (by default /var/lib/libvirt/images)</p></li>
<li><p><em>–clients</em> - specify number of clients (by default 2)</p></li>
<li><p><em>-h, –help</em> - prints out help</p></li>
</ul>
<p>Usage:</p>
<ul class="simple">
<li><p>Ipa-demo takes specified base image and ssh key and creates five
virtual machines (one server and four clients) whose disk images are
stored in ‘images’ subdirectory</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">./ipa-demo.sh --base /mnt/storage/ipa-ready-image.qcow2 --sshkey /home/user/.ssh/key_rsa --imgdir images --clients 4</span></code></p>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>