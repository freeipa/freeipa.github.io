
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Configuring AIX clients &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/ConfiguringAixClients';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="https://raw.githubusercontent.com/freeipa/freeipa.github.io/main/src/_static/freeipa-logo-small.png" class="logo__image" alt="Logo image" />
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Documentation.html">Documentation</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Troubleshooting.html">Troubleshooting</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/page/ConfiguringAixClients.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Configuring AIX clients</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Configuring AIX clients</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-prerequisites-on-aix-7-3">Installing prerequisites on AIX 7.3</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-gskit">Installing GSKit</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-kerberos">Installing Kerberos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-ldap-packages">Installing LDAP packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-sudo">Installing sudo</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-aix-7-3-as-ipa-client">Configuring AIX 7.3 as IPA client</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dns">DNS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nis">NIS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#openssl">OpenSSL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gskit">GSKit</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ldap-mapping-files">LDAP mapping files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ldap-client-configuration">LDAP client configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hbac-host-based-access-control">HBAC (Host-based access control)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#home-directories">Home directories</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#domainless-groups">Domainless groups</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kerberos-configuration">Kerberos configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sudo-configuration">sudo configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#authentication-methods">Authentication methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#existing-user-migration">Existing user migration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#enable-user-authentication-through-ipa-server">Enable user authentication through IPA server</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#start-ldap-client">Start LDAP client</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-the-ipa-client-on-aix-5-3">Configuring the IPA Client on AIX 5.3</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-kerberos-and-ldap">Configuring Kerberos and LDAP</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-client-ssh-access">Configuring Client SSH Access</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#system-login">System Login</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#netgroup">netgroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-help">Additional help</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="configuring-aix-clients">
<h1>Configuring AIX clients<a class="headerlink" href="#configuring-aix-clients" title="Link to this heading">#</a></h1>
</section>
<section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h1>
<p>This document describes the procedures required to configure AIX 7.3 as
an IPA client, hints for earlier AIX versions are also included below.</p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">#</a></h2>
<p>Before you begin the configuration phase, you need to ensure that the
following software is installed and up to date on your system.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Component</p></th>
<th class="head"><p>Where to find</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AIX 7.3</p></td>
<td><p><a class="reference external" href="https://www.ibm.com/servers/eserver/ess/index.wss">IBM Entitled Systems Support site</a></p></td>
</tr>
<tr class="row-odd"><td><p>IBM Network Authentication Service (Kerbreros 5)</p></td>
<td><p>AIX Expansion Pack DVD or <a class="reference external" href="https://www.ibm.com/resources/mrs/assets?source=aixbp">AIX Web Pack site</a></p></td>
</tr>
<tr class="row-even"><td><p>IBM Security Verify Directory</p></td>
<td><p>AIX media or <a class="reference external" href="https://www.ibm.com/resources/mrs/assets?source=aixbp">AIX Web Pack site</a></p></td>
</tr>
<tr class="row-odd"><td><p>GSKit</p></td>
<td><p>AIX Expansion Pack DVD or <a class="reference external" href="https://www.ibm.com/resources/mrs/assets?source=aixbp">AIX Web Pack site</a></p></td>
</tr>
<tr class="row-even"><td><p>sudo_ids RPM package</p></td>
<td><p><a class="reference external" href="https://www.ibm.com/support/pages/aix-toolbox-open-source-software-downloads-alpha#S">AIX Toolbox for Open source applications</a></p></td>
</tr>
</tbody>
</table>
</div>
<p>You must also obtain several parameters from your FreeIPA installation before proceeding further.</p>
<ul class="simple">
<li><p>FreeIPA server names and their IP addresses</p></li>
<li><p>FreeIPA DNS domain</p></li>
<li><p>FreeIPA Kerberos realm</p></li>
<li><p>FreeIPA LDAP base DN</p></li>
<li><p><abbr title="Host-based access control">HBAC</abbr> rule ID for access to your AIX server (<strong class="command">ipa hbacrule-show &lt;name&gt; --all | grep dn:</strong>), in case you use <a class="reference external" href="https://www.freeipa.org/page/Howto/HBAC_and_allow_all">Host-based access control</a> in your enviornment.</p></li>
</ul>
<p>Your AIX server must be registered in FreeIPA as a host and you must have Kerberos keytab generated for the host.</p>
<p>We use the following values as example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">IPA</span> <span class="n">server</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span> <span class="mf">10.0.0.1</span>
<span class="n">IPA</span> <span class="n">DNS</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">IPA</span> <span class="n">Kerberos</span> <span class="n">realm</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
<span class="n">IPA</span> <span class="n">LDAP</span> <span class="n">base</span> <span class="n">DN</span> <span class="o">=</span> <span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">HBAC</span> <span class="n">rule</span> <span class="n">ID</span> <span class="o">=</span> <span class="n">ipaUniqueID</span><span class="o">=</span><span class="mi">12345678</span><span class="o">-</span><span class="mi">1234</span><span class="o">-</span><span class="mi">1234</span><span class="o">-</span><span class="mi">1234567890</span><span class="n">ab</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">hbac</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">AIX</span> <span class="n">server</span> <span class="o">=</span> <span class="n">aix73</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span> <span class="mf">10.0.0.73</span>
<span class="n">AIX</span> <span class="n">Kerberos</span> <span class="n">principal</span> <span class="o">=</span> <span class="n">host</span><span class="o">/</span><span class="n">aix73</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="nd">@EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
</pre></div>
</div>
</section>
</section>
<section id="installing-prerequisites-on-aix-7-3">
<h1>Installing prerequisites on AIX 7.3<a class="headerlink" href="#installing-prerequisites-on-aix-7-3" title="Link to this heading">#</a></h1>
<section id="installing-gskit">
<h2>Installing GSKit<a class="headerlink" href="#installing-gskit" title="Link to this heading">#</a></h2>
<p>Install both 32- and 64-bit packages for GSKit8. If there are any updates for GSKit, install the latest updates.</p>
</section>
<section id="installing-kerberos">
<h2>Installing Kerberos<a class="headerlink" href="#installing-kerberos" title="Link to this heading">#</a></h2>
<p>You need only client packages - <code class="samp docutils literal notranslate"><span class="pre">krb5.client.rte</span></code> fileset.</p>
</section>
<section id="installing-ldap-packages">
<h2>Installing LDAP packages<a class="headerlink" href="#installing-ldap-packages" title="Link to this heading">#</a></h2>
<p>Mount AIX DVD image to your AIX server and accept Security Verify Directory license. In the example below the image is mounted under <code class="file docutils literal notranslate"><span class="pre">/mnt</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">license</span><span class="o">/</span><span class="n">idsLicense</span>
</pre></div>
</div>
<p>Press <kbd class="kbd docutils literal notranslate">1</kbd> to accept the license.</p>
<p>Install the following filesets and their dependencies:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Fileset</p></th>
</tr>
<tr class="row-even"></tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>idsldap.clt64bit100.rte</p></td>
</tr>
<tr class="row-even"><td><p>idsldap.clt32bit100.rte</p></td>
</tr>
<tr class="row-odd"><td><p>idsldap.clt_max_crypto32bit100.rte</p></td>
</tr>
<tr class="row-even"><td><p>idsldap.clt_max_crypto64bit100.rte</p></td>
</tr>
</tbody>
</table>
</div>
<p>After the installation create symlinks for the LDAP libraries and commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">IBM</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">V10</span><span class="mf">.0</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">idslink</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">l</span> <span class="mi">64</span> <span class="o">-</span><span class="n">s</span> <span class="n">base</span> <span class="o">-</span><span class="n">f</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">IBM</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">V10</span><span class="mf">.0</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">idslink</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">l</span> <span class="mi">32</span> <span class="o">-</span><span class="n">s</span> <span class="n">base</span> <span class="o">-</span><span class="n">f</span>
</pre></div>
</div>
<p>It is strongly recommended to install the latest fixpacks and updates for IBM Security Verify Directory.</p>
</section>
<section id="installing-sudo">
<h2>Installing sudo<a class="headerlink" href="#installing-sudo" title="Link to this heading">#</a></h2>
<p>If you still don’t have DNF on your AIX, install first DNF using <a class="reference external" href="https://public.dhe.ibm.com/aix/freeSoftware/aixtoolbox/ezinstall/ppc/dnf_aixtoolbox.sh">dnf_aixtoolbox.sh</a>.</p>
<p>Use <strong class="command">sudo_ids</strong> package instead of <strong class="command">sudo</strong> because it seamlessly works with IBM LDAP libraries. If you already installed <strong class="command">sudo</strong> package, remove it first.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">freeware</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">dnf</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">sudo_ids</span>
</pre></div>
</div>
<p>If during the installation you get an error like <code class="code docutils literal notranslate"><span class="pre">Nothing</span> <span class="pre">provides</span> <span class="pre">libibmldap.a</span></code>, recreate virtual RPM package definitions first and then install <strong class="command">sudo_ids</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">updtvpkg</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">freeware</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">dnf</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">sudo_ids</span>
</pre></div>
</div>
</section>
</section>
<section id="configuring-aix-7-3-as-ipa-client">
<h1>Configuring AIX 7.3 as IPA client<a class="headerlink" href="#configuring-aix-7-3-as-ipa-client" title="Link to this heading">#</a></h1>
<section id="dns">
<h2>DNS<a class="headerlink" href="#dns" title="Link to this heading">#</a></h2>
<p>Check that you correctly configured your DNS in <code class="file docutils literal notranslate"><span class="pre">/etc/resolv.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">options</span> <span class="n">rotate</span><span class="p">,</span><span class="n">timeout</span><span class="p">:</span><span class="mi">10</span>
<span class="n">domain</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">search</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">nameserver</span> <span class="mf">10.0.0.1</span>
</pre></div>
</div>
<p>You can also add your IPA server into <code class="file docutils literal notranslate"><span class="pre">/etc/hosts</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">10.0.0.1</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="n">ipaserver</span>
</pre></div>
</div>
</section>
<section id="nis">
<h2>NIS<a class="headerlink" href="#nis" title="Link to this heading">#</a></h2>
<p>Set up NIS domain name. You need it if you work with sudo and netgroups or user groups on IPA side:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chypdom</span> <span class="o">-</span><span class="n">B</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
</section>
<section id="openssl">
<h2>OpenSSL<a class="headerlink" href="#openssl" title="Link to this heading">#</a></h2>
<p>Download IPA server certificate and create a hash link to it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -o /var/ssl/certs/ipa.crt https://ipaserver.example.com/ipa/config/ca.crt
$ openssl x509 -in /var/ssl/certs/ipa.crt -noout -hash
01234567
$ ln -s /var/ssl/certs/ipa.crt /var/ssl/certs/01234567.0
</pre></div>
</div>
</section>
<section id="gskit">
<h2>GSKit<a class="headerlink" href="#gskit" title="Link to this heading">#</a></h2>
<p>Create a new certificate store and add IPA server certificate into it. Note the password of your certificate store. You will need it later during LDAP client configuration.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gsk8capicmd_64 -keydb -create -db /etc/security/ldap/key.kdb -pw MYPASSWORD -type cms -stashed
$ gsk8capicmd_64 -cert -add -file /var/ssl/certs/ipa.crt -label ipa -db /etc/security/ldap/key.kdb -stashed
</pre></div>
</div>
</section>
<section id="ldap-mapping-files">
<h2>LDAP mapping files<a class="headerlink" href="#ldap-mapping-files" title="Link to this heading">#</a></h2>
<p>These files define how to map LDAP information to AIX internal attributes.</p>
<p>Create <code class="file docutils literal notranslate"><span class="pre">/etc/security/ldap/ipagroup.map</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">keyobjectclass</span>  <span class="n">SEC_CHAR</span>    <span class="n">posixgroup</span>      <span class="n">s</span>   <span class="n">na</span>  <span class="n">yes</span>
<span class="n">groupname</span>       <span class="n">SEC_CHAR</span>    <span class="n">cn</span>              <span class="n">s</span>   <span class="n">na</span>  <span class="n">yes</span>
<span class="nb">id</span>              <span class="n">SEC_INT</span>     <span class="n">gidnumber</span>       <span class="n">s</span>   <span class="n">na</span>  <span class="n">yes</span>
<span class="n">users</span>           <span class="n">SEC_LIST</span>    <span class="n">member</span>          <span class="n">m</span>   <span class="n">na</span>  <span class="n">yes</span>
</pre></div>
</div>
<p>Create <code class="file docutils literal notranslate"><span class="pre">/etc/security/ldap/ipauser.map</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">keyobjectclass</span>  <span class="n">SEC_CHAR</span>    <span class="n">posixaccount</span>        <span class="n">s</span>   <span class="n">na</span>      <span class="n">yes</span>
<span class="n">username</span>        <span class="n">SEC_CHAR</span>    <span class="n">uid</span>                 <span class="n">s</span>   <span class="n">na</span>      <span class="n">yes</span>
<span class="nb">id</span>              <span class="n">SEC_INT</span>     <span class="n">uidnumber</span>           <span class="n">s</span>   <span class="n">na</span>      <span class="n">yes</span>
<span class="n">pgrp</span>            <span class="n">SEC_CHAR</span>    <span class="n">gidnumber</span>           <span class="n">s</span>   <span class="n">na</span>      <span class="n">yes</span>
<span class="n">home</span>            <span class="n">SEC_CHAR</span>    <span class="n">homedirectory</span>       <span class="n">s</span>   <span class="n">na</span>      <span class="n">yes</span>
<span class="n">shell</span>           <span class="n">SEC_CHAR</span>    <span class="n">loginshell</span>          <span class="n">s</span>   <span class="n">na</span>      <span class="n">yes</span>
<span class="n">gecos</span>           <span class="n">SEC_CHAR</span>    <span class="n">gecos</span>               <span class="n">s</span>   <span class="n">na</span>      <span class="n">yes</span>
<span class="n">spassword</span>       <span class="n">SEC_CHAR</span>    <span class="n">userpassword</span>        <span class="n">s</span>   <span class="n">na</span>      <span class="n">yes</span>
<span class="n">lastupdate</span>      <span class="n">SEC_INT</span>     <span class="n">nonexistingattr</span>     <span class="n">s</span>   <span class="n">days</span>    <span class="n">yes</span>
<span class="n">account_locked</span>  <span class="n">SEC_BOOL</span>    <span class="n">nsaccountlock</span>       <span class="n">s</span>   <span class="n">na</span>      <span class="n">yes</span>
<span class="n">auth_name</span>       <span class="n">SEC_CHAR</span>    <span class="n">krbprincipalname</span>    <span class="n">s</span>   <span class="n">na</span>      <span class="n">yes</span>
</pre></div>
</div>
</section>
<section id="ldap-client-configuration">
<h2>LDAP client configuration<a class="headerlink" href="#ldap-client-configuration" title="Link to this heading">#</a></h2>
<p>Create <code class="file docutils literal notranslate"><span class="pre">/etc/security/ldap/ldap.cfg</span></code>, <strong>note that you don’t want to allow locked users</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ldapservers:ipaserver.example.com
authtype:ldap_auth
useSSL:yes
verifyCertificate:yes
ldapsslkeyf:/etc/security/ldap/key.kdb
ldapsslkeypwd:MYPASSWORD
userattrmappath:/etc/security/ldap/ipauser.map
groupattrmappath:/etc/security/ldap/ipagroup.map
useKRB5:yes
krbcmddir:/usr/krb5/bin/
krbkeypath:/etc/krb5/krb5.keytab
krbprincipal:host/aix73.example.com@EXAMPLE.COM
defaultentrylocation:local
userbasedn:cn=users,cn=accounts,dc=example,dc=com??(!(nsaccountlock=TRUE))
groupbasedn:cn=groups,cn=accounts,dc=example,dc=com
netgroupbasedn:cn=ng,cn=compat,dc=example,dc=com
userclasses:posixaccount
groupclasses:posixgroup
searchmode:OS
enableutf8_xlation:no
serverschematype:rfc2307
memberfulldn:yes
resolveUserFromDN:yes
</pre></div>
</div>
<p>You need <cite>netgroupbasedn</cite> parameter only if you use sudo with netgroups. If you don’t use sudo with netgroups, you can drop the parameter.</p>
<p>The password to the GSKit certificate store (<cite>ldapsslkeypwd</cite>) can be encrypted using <strong class="command">secldapclntd -e</strong> command. But the option is not documented.</p>
</section>
<section id="hbac-host-based-access-control">
<h2>HBAC (Host-based access control)<a class="headerlink" href="#hbac-host-based-access-control" title="Link to this heading">#</a></h2>
<p>You can have <strong>true</strong> <abbr title="Host-based access control">HBAC</abbr> using <a class="reference external" href="https://github.com/rseabra/pam_ipahbac/">pam_ipahbac</a>.</p>
<p>After installation, place a <code class="file docutils literal notranslate"><span class="pre">/etc/ipahbac.conf</span></code> file with the pam module’s configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">k</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">ldap</span><span class="o">.</span><span class="n">kdb</span>
<span class="o">-</span><span class="n">U</span> <span class="n">bind</span><span class="o">.</span><span class="n">aix</span><span class="o">.</span><span class="n">user</span>
<span class="o">-</span><span class="n">b</span> <span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="o">-</span><span class="n">P</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ldap</span><span class="o">.</span><span class="n">secret</span>
<span class="o">-</span><span class="n">l</span> <span class="n">ipaserver1</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">ipaserver2</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="o">-</span><span class="n">D</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>And add the following to <code class="file docutils literal notranslate"><span class="pre">/etc/pam.cfg</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">sshd</span>    <span class="n">account</span>    <span class="n">requisite</span>       <span class="n">pam_ipahbac</span><span class="o">.</span><span class="n">so</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ipahbac</span><span class="o">.</span><span class="n">conf</span>
<span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">ipahbac_test</span>    <span class="n">account</span>    <span class="n">requisite</span>     <span class="n">pam_ipahbac</span><span class="o">.</span><span class="n">so</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ipahbac</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p><strong>Alternatively</strong>, if you don’t mind using a limited version of HBAC support, you can change your <em>userbasedn</em> field in <strong>ldap.cfg</strong> to check the user properties for being a member of a particular HBAC rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(...)
userbasedn:cn=users,cn=accounts,dc=example,dc=com??(&amp;(!(nsaccountlock=TRUE))(memberOf=ipaUniqeID=12345678-1234-1234-1234567890ab,cn=hbac,dc=example,dc=com))
(...)
</pre></div>
</div>
<p>Or… <strong>if you don’t want to use HBAC, or prevent locked users from logging in</strong>, your <cite>userbasedn</cite> parameter may be specified without any additional filters, like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">userbasedn</span><span class="p">:</span><span class="n">cn</span><span class="o">=</span><span class="n">users</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">accounts</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
</pre></div>
</div>
</section>
<section id="home-directories">
<h2>Home directories<a class="headerlink" href="#home-directories" title="Link to this heading">#</a></h2>
<p>Unless you use NFS or something else to host your users’ home directories, enable automatic creation of home directories:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chsec</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">login</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">s</span> <span class="n">usw</span> <span class="o">-</span><span class="n">a</span> <span class="n">mkhomeatlogin</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
</section>
<section id="domainless-groups">
<h2>Domainless groups<a class="headerlink" href="#domainless-groups" title="Link to this heading">#</a></h2>
<p>To enable LDAP users to be included into local AIX groups, enable domainless groups setting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chsec</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">secvars</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">s</span> <span class="n">groups</span> <span class="o">-</span><span class="n">a</span> <span class="n">domainlessgroups</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
</section>
<section id="kerberos-configuration">
<h2>Kerberos configuration<a class="headerlink" href="#kerberos-configuration" title="Link to this heading">#</a></h2>
<p>Copy your AIX server’s keytab into <code class="file docutils literal notranslate"><span class="pre">/etc/krb5/krb5.keytab</span></code> and create <code class="file docutils literal notranslate"><span class="pre">/etc/krb5/krb5.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">libdefaults</span><span class="p">]</span>
    <span class="n">default_realm</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
    <span class="n">default_keytab_name</span> <span class="o">=</span> <span class="n">FILE</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">krb5</span><span class="o">/</span><span class="n">krb5</span><span class="o">.</span><span class="n">keytab</span>
    <span class="n">permitted_enctypes</span> <span class="o">=</span> <span class="n">aes256</span><span class="o">-</span><span class="n">cts</span><span class="o">-</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha384</span><span class="o">-</span><span class="mi">192</span> <span class="n">aes128</span><span class="o">-</span><span class="n">cts</span><span class="o">-</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha256</span><span class="o">-</span><span class="mi">128</span> <span class="n">aes256</span><span class="o">-</span><span class="n">cts</span><span class="o">-</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha1</span><span class="o">-</span><span class="mi">96</span> <span class="n">aes128</span><span class="o">-</span><span class="n">cts</span><span class="o">-</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha1</span><span class="o">-</span><span class="mi">96</span>
    <span class="n">dns_lookup_realm</span> <span class="o">=</span> <span class="n">false</span>
    <span class="n">dns_lookup_kdc</span> <span class="o">=</span> <span class="n">false</span>
    <span class="n">rdns</span> <span class="o">=</span> <span class="n">false</span>
    <span class="n">forwardable</span> <span class="o">=</span> <span class="n">true</span>
    <span class="n">renewable</span> <span class="o">=</span> <span class="n">true</span>
    <span class="n">canonicalize</span> <span class="o">=</span> <span class="n">true</span>

<span class="p">[</span><span class="n">realms</span><span class="p">]</span>
    <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">kdc</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">88</span>
        <span class="n">admin_server</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">749</span>
        <span class="n">kpasswd_server</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">464</span>
        <span class="n">default_domain</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
    <span class="p">}</span>

<span class="p">[</span><span class="n">domain_realm</span><span class="p">]</span>
    <span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
    <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>

<span class="p">[</span><span class="n">logging</span><span class="p">]</span>
    <span class="n">default</span> <span class="o">=</span> <span class="n">FILE</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">krb5</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">krb5lib</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
</section>
<section id="sudo-configuration">
<h2>sudo configuration<a class="headerlink" href="#sudo-configuration" title="Link to this heading">#</a></h2>
<p>Create <code class="file docutils literal notranslate"><span class="pre">/etc/irs.conf</span></code> to enable searching through netgroups if you use netgroups:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">netgroup</span> <span class="n">nis_ldap</span>
</pre></div>
</div>
<p>Create <code class="file docutils literal notranslate"><span class="pre">/etc/sudo-ldap.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uri</span> <span class="n">ldaps</span><span class="p">:</span><span class="o">//</span><span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">ssl</span> <span class="n">start_tls</span>
<span class="n">tls_key</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">key</span><span class="o">.</span><span class="n">kdb</span>
<span class="n">tls_keypw</span> <span class="n">MYPASSWORD</span>
<span class="n">use_sasl</span> <span class="n">yes</span>
<span class="n">sasl_auth_id</span> <span class="n">host</span><span class="o">/</span><span class="n">aix73</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="nd">@EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
<span class="n">krb5_ccname</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">krb5cc_secldapclntd</span>
<span class="n">sudoers_base</span> <span class="n">ou</span><span class="o">=</span><span class="n">sudoers</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">netgroup_base</span> <span class="n">cn</span><span class="o">=</span><span class="n">ng</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">compat</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">netgroup_query</span> <span class="n">yes</span>
</pre></div>
</div>
<p>The file with Kerberos credentials cache is automatically created and updated by AIX LDAP client.</p>
<p>The password for GSKit certificate store (<cite>tls_keypw</cite>) must be in clear text.</p>
<p>If you don’t use netgroups, you can remove the last two lines of the configuration file (<cite>netgroup_base</cite> and <cite>netgroup_query</cite>).</p>
</section>
<section id="authentication-methods">
<h2>Authentication methods<a class="headerlink" href="#authentication-methods" title="Link to this heading">#</a></h2>
<p>Add the following lines into <code class="file docutils literal notranslate"><span class="pre">/usr/lib/security/methods.cfg</span></code> to enable LDAP and Kerberos on AIX:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LDAP</span><span class="p">:</span>
    <span class="n">program</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">LDAP</span>
    <span class="n">program_64</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">LDAP64</span>

<span class="n">KRB5</span><span class="p">:</span>
    <span class="n">program</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">KRB5</span>
    <span class="n">program_64</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">KRB5_64</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">authonly</span>

<span class="n">KRB5LDAP</span><span class="p">:</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">db</span><span class="o">=</span><span class="n">LDAP</span><span class="p">,</span><span class="n">auth</span><span class="o">=</span><span class="n">KRB5</span>
</pre></div>
</div>
</section>
<section id="existing-user-migration">
<h2>Existing user migration<a class="headerlink" href="#existing-user-migration" title="Link to this heading">#</a></h2>
<p>Set attributes <cite>registry</cite> and <cite>SYSTEM</cite> for local users, especially for system users like root, using <strong class="command">chsec</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chsec</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">user</span> <span class="o">-</span><span class="n">s</span> <span class="n">root</span> <span class="o">-</span><span class="n">a</span> <span class="n">registry</span><span class="o">=</span><span class="n">files</span> <span class="o">-</span><span class="n">a</span> <span class="n">SYSTEM</span><span class="o">=</span><span class="n">compat</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don’t use <strong class="command">chuser</strong> or <strong class="command">smitty</strong> to set the attributes in this case!</p>
</div>
</section>
<section id="enable-user-authentication-through-ipa-server">
<h2>Enable user authentication through IPA server<a class="headerlink" href="#enable-user-authentication-through-ipa-server" title="Link to this heading">#</a></h2>
<p>By default all users which are not defined in <code class="file docutils literal notranslate"><span class="pre">/etc/passwd</span></code> must be sought in LDAP and authenticated using Kerberos:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chsec</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">user</span> <span class="o">-</span><span class="n">s</span> <span class="n">default</span> <span class="o">-</span><span class="n">a</span> <span class="n">registry</span><span class="o">=</span><span class="n">KRB5LDAP</span> <span class="o">-</span><span class="n">a</span> <span class="n">SYSTEM</span><span class="o">=</span><span class="n">KRB5LDAP</span>
</pre></div>
</div>
</section>
<section id="start-ldap-client">
<h2>Start LDAP client<a class="headerlink" href="#start-ldap-client" title="Link to this heading">#</a></h2>
<p>Start LDAP client:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start</span><span class="o">-</span><span class="n">secldapclntd</span>
</pre></div>
</div>
<p>Add the start of LDAP client into boot process:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkitab</span> <span class="o">-</span><span class="n">i</span> <span class="n">rctpip</span> <span class="s2">&quot;ldapclntd:23456789:wait:/usr/sbin/start-secldapclntd 2&gt;&amp;1&quot;</span>
</pre></div>
</div>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">#</a></h2>
<p>Use <strong class="command">ls-secldapclntd</strong> to check if LDAP client is working and connected to the IPA server.</p>
<p>Use <strong class="command">lsldap</strong> to check which objects can be found in LDAP using the configuration.</p>
<p>To check Kerberos authentication, use <strong class="command">/usr/krb5/bin/kinit</strong>. Check that you use <strong class="command">kinit</strong> from <strong class="command">/usr/krb5/bin</strong>, because sometimes Java’s <strong class="command">kinit</strong> has precedence in <cite>PATH</cite> environment variable. Java’s <strong class="command">kinit</strong> will not work.</p>
</section>
</section>
<section id="configuring-the-ipa-client-on-aix-5-3">
<h1>Configuring the IPA Client on AIX 5.3<a class="headerlink" href="#configuring-the-ipa-client-on-aix-5-3" title="Link to this heading">#</a></h1>
<p>The following instructions describe how to configure AIX 5.3 as an IPA
client. The following hostnames are used as examples only; you need to
replace these with the hostnames that apply to your deployment.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REALM</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
<span class="n">IPA</span> <span class="n">server</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">IPA</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ipaclient</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<section id="configuring-kerberos-and-ldap">
<h2>Configuring Kerberos and LDAP<a class="headerlink" href="#configuring-kerberos-and-ldap" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Configure the krb5 client settings as follows:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mkkrb5clnt -r EXAMPLE.COM -d example.com -c ipaserver.example.com -s ipaserver.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Get a Kerberos ticket.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># kinit  admin</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Configure the LDAP client settings as follows:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mksecldap -c -h ipaserver.example.com -d cn=accounts,dc=example,dc=com -a uid=nss,cn=sysaccounts,cn=etc,dc=example,dc=com -p secret</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Add custom settings for the LDAP client.</p></li>
</ol>
<p>Under /etc/security/ldap create 2 new map files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#IPAuser.map file</span>
<span class="n">keyobjectclass</span>  <span class="n">SEC_CHAR</span>        <span class="n">posixaccount</span>            <span class="n">s</span>

<span class="c1"># The following attributes are required by AIX to be functional</span>
<span class="n">username</span>        <span class="n">SEC_CHAR</span>        <span class="n">uid</span>                     <span class="n">s</span>
<span class="nb">id</span>              <span class="n">SEC_INT</span>         <span class="n">uidnumber</span>               <span class="n">s</span>
<span class="n">pgrp</span>            <span class="n">SEC_CHAR</span>        <span class="n">gidnumber</span>               <span class="n">s</span>
<span class="n">home</span>            <span class="n">SEC_CHAR</span>        <span class="n">homedirectory</span>           <span class="n">s</span>
<span class="n">shell</span>           <span class="n">SEC_CHAR</span>        <span class="n">loginshell</span>              <span class="n">s</span>
<span class="n">gecos</span>           <span class="n">SEC_CHAR</span>        <span class="n">gecos</span>                   <span class="n">s</span>
<span class="n">spassword</span>       <span class="n">SEC_CHAR</span>        <span class="n">userpassword</span>            <span class="n">s</span>
<span class="n">lastupdate</span>      <span class="n">SEC_INT</span>         <span class="n">shadowlastchange</span>        <span class="n">s</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#IPAgroup.map file</span>
<span class="n">groupname</span>       <span class="n">SEC_CHAR</span>    <span class="n">cn</span>                    <span class="n">s</span>
<span class="nb">id</span>              <span class="n">SEC_INT</span>     <span class="n">gidNumber</span>             <span class="n">s</span>
<span class="n">users</span>           <span class="n">SEC_LIST</span>    <span class="n">member</span>                <span class="n">m</span>
</pre></div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line">Change the /etc/security/ldap/ldap.cfg file and set the relevant options as follow.</div>
<div class="line">In this example the REALM name is EXAMPLE.COM and the basedn is dc=example,dc=com</div>
<div class="line">Change all basedns values to conform to your installation realm name.</div>
</div>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">userbasedn</span><span class="p">:</span><span class="n">cn</span><span class="o">=</span><span class="n">users</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">accounts</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">groupbasedn</span><span class="p">:</span><span class="n">cn</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">accounts</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>

<span class="n">userattrmappath</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">IPAuser</span><span class="o">.</span><span class="n">map</span>
<span class="n">groupattrmappath</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">IPAgroup</span><span class="o">.</span><span class="n">map</span>

<span class="n">userclasses</span><span class="p">:</span><span class="n">posixaccount</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Start the ldap client daemon.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># start-secldapclntd</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Test the LDAP client connection to the IPA server.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># lsldap -a passwd</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Configure the system login to use Krberos and LDAP</p></li>
</ol>
<p>Add the following sections to the file /usr/lib/security/methods.cfg</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">KRB5A</span><span class="p">:</span>
        <span class="n">program</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">KRB5A</span>
        <span class="n">program_64</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">KRB5A_64</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">authonly</span>

<span class="n">KRB5ALDAP</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">auth</span><span class="o">=</span><span class="n">KRB5A</span><span class="p">,</span><span class="n">db</span><span class="o">=</span><span class="n">LDAP</span>
</pre></div>
</div>
<p>For AIX 6.1 the line</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="n">authonly</span>
</pre></div>
</div>
<p>should be changed into</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="n">authonly</span><span class="p">,</span><span class="n">kadmind</span><span class="o">=</span><span class="n">no</span>
</pre></div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line">Edit the file /etc/security/user</div>
<div class="line">In the default section change the options ‘SYSTEM’ and ‘registry’ to look like this:</div>
</div>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SYSTEM</span> <span class="o">=</span> <span class="s2">&quot;KRB5ALDAP&quot;</span>
<span class="n">regisrty</span> <span class="o">=</span> <span class="n">LDAP</span>
</pre></div>
</div>
<p>Please note: due to these changes to /etc/security/user LDAP is
configured, leading to local users with no individual entry not beeing
able to login. According to previous testing not setting registry to
LDAP is not preventing IPA users to login, but is preventing them to
change passwords.</p>
</section>
<section id="configuring-client-ssh-access">
<h2>Configuring Client SSH Access<a class="headerlink" href="#configuring-client-ssh-access" title="Link to this heading">#</a></h2>
<p>You can configure the IPA client to accept incoming SSH requests and
authenticate with the user’s Kerberos credentials. After configuring the
IPA client, use the following procedure to configure the IPA client for
SSH connections. Remember to replace the example host and domain names
with your own host and domain names:</p>
<ol class="arabic simple">
<li><p>SSH syslog Configuration</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auth</span><span class="o">.</span><span class="n">info</span>       <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">sshd</span><span class="o">.</span><span class="n">log</span>
<span class="n">auth</span><span class="o">.</span><span class="n">info</span>       <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">sshd</span><span class="o">.</span><span class="n">log</span>
<span class="n">auth</span><span class="o">.</span><span class="n">crit</span>       <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">sshd</span><span class="o">.</span><span class="n">log</span>
<span class="n">auth</span><span class="o">.</span><span class="n">warn</span>       <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">sshd</span><span class="o">.</span><span class="n">log</span>
<span class="n">auth</span><span class="o">.</span><span class="n">notice</span>     <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">sshd</span><span class="o">.</span><span class="n">log</span>
<span class="n">auth</span><span class="o">.</span><span class="n">err</span>        <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">sshd</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>SSH Logging Configuration</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SyslogFacility</span> <span class="n">AUTH</span>
<span class="n">LogLevel</span> <span class="n">INFO</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Configure sshd for GSSAPI (<code class="docutils literal notranslate"><span class="pre">/etc/ssh/sshd_config</span></code>)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># GSSAPI options</span>
<span class="n">GSSAPIAuthentication</span> <span class="n">yes</span>
<span class="c1">#GSSAPICleanupCredentials yes</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Restart sshd</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># stopsrc -s sshd</span>
<span class="c1"># startsrc -s sshd</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Restart syslogd</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># stopsrc -s syslogd</span>
<span class="c1"># startsrc -s syslogd</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>The <strong>ipa-admintools</strong> package is not available for AIX.
Consequently, you need to perform the following commands on the
IPA server.</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Add a host service principal on IPA v2:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa service-add host/ipaclient.example.com</span>
</pre></div>
</div>
<p>Please note: adding the service principal should no longer be required,
but host-add and a host-add-managedby should be enough:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa host-add ipaclient.example.com</span>
<span class="c1"># ipa host-add-managedby --hosts=ipaserver.example.com ipaclient.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Retrieve the host keytab.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-getkeytab -s ipaserver -p host/ipaclient.example.com -k /tmp/krb5.keytab</span>
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>Copy the keytab from the server to the client.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># scp /tmp/krb5.keytab root@ipaclient.example.com:/tmp/krb5.keytab</span>
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li><p>On the IPA client, use the <strong>ktutil</strong> command to import the keytab.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ktutil</span>
<span class="n">ktutil</span><span class="p">:</span> <span class="n">read_kt</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">krb5</span><span class="o">.</span><span class="n">keytab</span>
<span class="n">ktutil</span><span class="p">:</span> <span class="n">write_kt</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">krb5</span><span class="o">/</span><span class="n">krb5</span><span class="o">.</span><span class="n">keytab</span>
<span class="n">ktutil</span><span class="p">:</span> <span class="n">q</span>
</pre></div>
</div>
<p>10. Add a user that is only used for authentication. (This can be
substituted with krb5 authentication if that works from the ldap
client). Otherwise go to the IPA server and use <strong>ldapmodify</strong>, bind as
<strong>Directory Manager</strong> and create this user.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dn</span><span class="p">:</span> <span class="n">uid</span><span class="o">=</span><span class="n">nss</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">sysaccounts</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">etc</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">account</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">simplesecurityobject</span>
<span class="n">objectClass</span><span class="p">:</span> <span class="n">top</span>
<span class="n">uid</span><span class="p">:</span> <span class="n">nss</span>
<span class="n">userPassword</span><span class="p">:</span> <span class="n">Your</span> <span class="n">own</span> <span class="n">shared</span> <span class="n">password</span> <span class="n">here</span>
</pre></div>
</div>
<ol class="arabic simple" start="11">
<li><p>On the IPA server, get a ticket for the <strong>admin</strong> user.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># kinit admin</span>
</pre></div>
</div>
<p>You should be able to log in as <strong>admin</strong> using ssh without providing a
password.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ssh admin@ipaclient.example.com</span>
</pre></div>
</div>
</section>
<section id="system-login">
<h2>System Login<a class="headerlink" href="#system-login" title="Link to this heading">#</a></h2>
<p>On the AIX machine console, enter the admin username and password. You
should be able to log in.</p>
<p>Use the <strong>id</strong> command to verify user and group information.</p>
<blockquote>
<div><p><img alt="Note.png" src="../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>By default, <strong>admin</strong> is given <strong>/bin/bash</strong> as the shell to use
and <code class="docutils literal notranslate"><span class="pre">/home/admin</span></code> as the home directory. You may need to install
<strong>bash</strong> (or link <strong>sh</strong> to <strong>/bin/bash</strong> or modify <strong>admin</strong> to
use <strong>/bin/sh</strong> or a shell available in all of your systems) to be
able to log in.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="netgroup">
<h2>netgroup<a class="headerlink" href="#netgroup" title="Link to this heading">#</a></h2>
<p>Some words of caution. The comment-line in most of these files in * and
not # as is usual for *nix configuration files. I found that deleting
values rather than trying to comment then out was more helpful.</p>
<p>The order in some files seems to be important for some reason. Simply
moving SYSTEM and registry in <code class="docutils literal notranslate"><span class="pre">/etc/security/user</span></code> once solved getting
netgroup working. My advice would be to maintain the existing formatting
and order as much as possible.</p>
<p>This example assumes we are going to be granting access to the machine
to users in the netgroup mygroup. To add this group to IPA and allow the
user admin do the following on the IPA server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ kinit admin
$ ipa netgroup-add --desc=&#39;AIX users&#39; mygroup
$ ipa netgroup-add-member --users=admin mygroup
</pre></div>
</div>
<p>1. On the AIX client, add the netgroup basedn to
<code class="docutils literal notranslate"><span class="pre">/etc/security/ldap/ldap.cfg</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">netgroupbasedn</span><span class="p">:</span> <span class="n">cn</span><span class="o">=</span><span class="n">ng</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">compat</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Restart the LDAP client:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># /usr/sbin/restart-secldapclntd</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Test that a netgroup is visible</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># lsldap -a netgroup mygroup</span>
</pre></div>
</div>
<p>4. Add the netgroup option to LDAP and KRB5ALDAP in
/usr/lib/security/methods.cfg:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LDAP</span><span class="p">:</span>
        <span class="n">program</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">LDAP</span>
        <span class="n">program_64</span> <span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">LDAP64</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">netgroup</span>
        <span class="o">...</span>
<span class="n">KRB5ALDAP</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">auth</span><span class="o">=</span><span class="n">KRB5A</span><span class="p">,</span><span class="n">db</span><span class="o">=</span><span class="n">LDAP</span><span class="p">,</span><span class="n">netgroup</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Configure <code class="docutils literal notranslate"><span class="pre">/etc/irs.conf</span></code> for netgroups:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cat /etc/irs.conf</span>
<span class="n">netgroup</span> <span class="n">nis_ldap</span>
</pre></div>
</div>
<p>6. Either modify the default user in <code class="docutils literal notranslate"><span class="pre">/etc/security/user</span></code> to use
<code class="docutils literal notranslate"><span class="pre">SYSTEM</span> <span class="pre">=</span> <span class="pre">compat</span></code> and <code class="docutils literal notranslate"><span class="pre">registry</span> <span class="pre">=</span> <span class="pre">compat</span></code> or create a user <code class="docutils literal notranslate"><span class="pre">admin</span></code>
entry and configure that for compat:</p>
<p>This is what it looks like if you create a separate user:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span><span class="p">:</span>
<span class="o">...</span>
        <span class="n">SYSTEM</span> <span class="o">=</span> <span class="n">compat</span>
        <span class="n">registry</span> <span class="o">=</span> <span class="n">compat</span>
        <span class="o">...</span>
</pre></div>
</div>
</div></blockquote>
<p>OR</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">admin</span><span class="p">:</span>
    <span class="n">SYSTEM</span> <span class="o">=</span> <span class="n">compat</span>
    <span class="n">registry</span> <span class="o">=</span> <span class="n">compat</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Add our netgroup to <code class="docutils literal notranslate"><span class="pre">/etc/passwd</span></code>:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;+@mygroup&quot;</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>Configure <code class="docutils literal notranslate"><span class="pre">/etc/group</span></code> for netgroups:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># echo &quot;+:&quot; &gt;&gt; /etc/group</span>
</pre></div>
</div>
<ol class="arabic" start="9">
<li><p>Test the admin user:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># lsuser -R compat admin</span>
<span class="n">admin</span> <span class="nb">id</span><span class="o">=</span><span class="mi">155000000</span> <span class="n">pgrp</span><span class="o">=</span><span class="n">admins</span> <span class="n">groups</span><span class="o">=</span><span class="n">admins</span> <span class="n">home</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">admin</span><span class="o">...</span>
</pre></div>
</div>
</li>
<li><p>A full test is to su to the user or log in via ssh.</p></li>
</ol>
<p>For users not found in the netgroup you’ll get a log entry like this in
<code class="docutils literal notranslate"><span class="pre">/var/log/sshd.log</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Aug</span> <span class="pre">24</span> <span class="pre">10:38:29</span> <span class="pre">ipaaix</span> <span class="pre">auth|security:info</span> <span class="pre">sshd[348394]:</span> <span class="pre">Invalid</span> <span class="pre">user</span> <span class="pre">admin</span> <span class="pre">from</span> <span class="pre">x.x.x.x</span></code>
<code class="docutils literal notranslate"><span class="pre">Aug</span> <span class="pre">24</span> <span class="pre">10:38:30</span> <span class="pre">ipaaix</span> <span class="pre">auth|security:info</span> <span class="pre">syslog:</span> <span class="pre">ssh:</span> <span class="pre">failed</span> <span class="pre">login</span> <span class="pre">attempt</span> <span class="pre">for</span> <span class="pre">UNKNOWN_USER</span> <span class="pre">from</span> <span class="pre">x.x.x.x</span></code>
<code class="docutils literal notranslate"><span class="pre">Aug</span> <span class="pre">24</span> <span class="pre">10:38:30</span> <span class="pre">ipaaix</span> <span class="pre">auth|security:info</span> <span class="pre">sshd[348394]:</span> <span class="pre">Failed</span> <span class="pre">none</span> <span class="pre">for</span> <span class="pre">invalid</span> <span class="pre">user</span> <span class="pre">admin</span> <span class="pre">from</span> <span class="pre">x.x.x.x</span> <span class="pre">port</span> <span class="pre">34085</span> <span class="pre">ssh2</span></code></p>
</section>
<section id="additional-help">
<h2>Additional help<a class="headerlink" href="#additional-help" title="Link to this heading">#</a></h2>
<p>Some additional AIX configuration pages that may be relevant and
helpful.</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ibm.com/developerworks/aix/library/au-aixadsupport.html">http://www.ibm.com/developerworks/aix/library/au-aixadsupport.html</a></p></li>
<li><p><a class="reference external" href="http://www.ibm.com/developerworks/aix/library/au-netgroup/">http://www.ibm.com/developerworks/aix/library/au-netgroup/</a></p></li>
<li><p><a class="reference external" href="http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.security/doc/security/krb_bind_ldap_client.htm">http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.security/doc/security/krb_bind_ldap_client.htm</a></p></li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Configuring AIX clients</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-prerequisites-on-aix-7-3">Installing prerequisites on AIX 7.3</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-gskit">Installing GSKit</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-kerberos">Installing Kerberos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-ldap-packages">Installing LDAP packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-sudo">Installing sudo</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-aix-7-3-as-ipa-client">Configuring AIX 7.3 as IPA client</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dns">DNS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nis">NIS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#openssl">OpenSSL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gskit">GSKit</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ldap-mapping-files">LDAP mapping files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ldap-client-configuration">LDAP client configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hbac-host-based-access-control">HBAC (Host-based access control)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#home-directories">Home directories</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#domainless-groups">Domainless groups</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kerberos-configuration">Kerberos configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sudo-configuration">sudo configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#authentication-methods">Authentication methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#existing-user-migration">Existing user migration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#enable-user-authentication-through-ipa-server">Enable user authentication through IPA server</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#start-ldap-client">Start LDAP client</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-the-ipa-client-on-aix-5-3">Configuring the IPA Client on AIX 5.3</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-kerberos-and-ldap">Configuring Kerberos and LDAP</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-client-ssh-access">Configuring Client SSH Access</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#system-login">System Login</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#netgroup">netgroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-help">Additional help</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>