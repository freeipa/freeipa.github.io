
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>GroupDiscussion &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/GroupDiscussion';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="https://raw.githubusercontent.com/freeipa/freeipa.github.io/main/src/_static/freeipa-logo-small.png" class="logo__image" alt="Logo image" />
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Documentation.html">Documentation</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Troubleshooting.html">Troubleshooting</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/page/GroupDiscussion.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>GroupDiscussion</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">GroupDiscussion</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#primary-groups-proposals">Primary Groups Proposals</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-virtual-personal-groups-proposal">The Virtual Personal Groups Proposal</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#real-groups-proposal">Real Groups Proposal</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="groupdiscussion">
<h1>GroupDiscussion<a class="headerlink" href="#groupdiscussion" title="Link to this heading">#</a></h1>
</section>
<section id="primary-groups-proposals">
<h1>Primary Groups Proposals<a class="headerlink" href="#primary-groups-proposals" title="Link to this heading">#</a></h1>
<p>In UNIX permissions on files are always represented (at minimum) by the
triplet: user, group, others, and by default the user umask that control
default permissions on new file creation is set to 002. This means that,
usually, when a user creates a new file it is writable by the user’s
primary group. This design led many people to face a “default privacy”
problem, where in systems with many users sharing the same primary group
documents are accessible by default by all members of such group.</p>
<p>There are 2 ways to change configurations so that by default only the
user owner can access his files. One is to change the default umask to
022, the other one, is to create a group for each user and make it the
user’s primary group, so that in effect only the user can access the
file.</p>
<p>This second method has the advantage that even if one of many systems
has a umask not configured properly files are still created with a
reasonable access mode. Actually what this scheme reveals is a deep flaw
in the concept of security principals in UNIX. Unix still separate, at
the kernel level, the concept of users and groups using two different
name and number spaces, and forces each resource to have both a user and
a group owner. By creating “Personal Groups” (a group for each user with
the same user name and often also with a gid the matches the numeric
value of the user’s uid) what people actually unconsciously do is to
unify the group and user spaces into one space (the group space).</p>
<p>Since I think this is a beneficial side effect I think this scheme is
not actually bad, but it creates a problem, as it multiply the number
of, almost useless, groups on a system. When we start putting
users/groups on LDAP this is translated in higher latency when
enumerating groups. While we discourage enumeration of both users and
groups, unfortunately current clients like nss_ldap still implements it
and some OSs may even require it to function properly.</p>
<p>But our GUI/CLI tools does not need to necessarily pay this fee when
used, if we decide to make Personal Groups a very limited kind of group
we can think of a possibly better way to handle the problem and actually
really merge users and Personal Groups concepts in a single “Security
Principal” so to say.</p>
<section id="the-virtual-personal-groups-proposal">
<h2>The Virtual Personal Groups Proposal<a class="headerlink" href="#the-virtual-personal-groups-proposal" title="Link to this heading">#</a></h2>
<p>The proposal is to actually write a plugin that intercept searches for
posixGroup objectclasses and actually perform an additional search on
posixAccount Objectclasses, the search would ask only for the uid and
the gidNumber and would return a virtual object where the uid is the
group name, the gidNumber is unchanged and objectclass is transformed
into a posixGroup class, and the unique member of this group would be
the user itself (uid). This kind of personal groups would be denied any
other membership.</p>
<p>Our GUI/CLI would not list these Personal Groups by default unless
explicitly commanded to do so by not searching for posixGroup when
searching groups (This will require an additional auxiliary objectclass
to be installed on normal groups).</p>
<p>A very nice side effect of this scheme is that if the uid/gid number
space is unified by default, the “personal groups” plugin can be
activated/deactivated at will without causing too much trouble, letting
admins experiment with both schemes.</p>
<p>Problems/Concerns with this approach: 1. Concern is that this plugin may
slow down searches on groups. I think that if done carefully this may
not be a real problem, the translation required does not involve many
attributes, but tests are required to asses it’s impact. 2. The group
names name-space needs to be mergegd with the user names name-space
(this is a general problem with personal groups independent from the
implementation). A plugin that controls users creation need to assess
users and group names do not clash and deny the operation otherwise, and
viceversa. 3. The group gid number-space needs to be merged with the
user uid number-space. This will make it much simpler to assigned ids to
either users or groups, a single id counter will be used for both users
and groups uid/gid so that each users uid is guaranteed to also be the
personal group gid. This will guarantee that uid==gid always and if a
gid is free the corresponding uid is free as well. So when we need to
create users we can even decide to reuse the uid/gid of a deleted
user/group without problems.</p>
<p>One issue with older UNIX boxes is that on some OS the uid/gid number
space is limited to 16 bits, or a total maximum amount of ids around
65k. The nice side effect of this plugin is that it can be deactivated
(eventually based on which client connects) at will so that for this
older system an easy backup mode can be conceived. On these system
user’s are assigned a default primary group (“users” is generally a good
default), and personal groups are not created. At the same time the id
allocation algorithm is built so that id for real groups are allocated
starting for example at 2G so that for these older system real groups
are remapped using newgid=gid-2G This would keep compatibility with
these legacy systems without compromising the flexibility for newer and
more capable systems. The only limit would be the 65K users or groups
per installation which is a hard limit in these systems.</p>
</section>
<section id="real-groups-proposal">
<h2>Real Groups Proposal<a class="headerlink" href="#real-groups-proposal" title="Link to this heading">#</a></h2>
<p>Another approach to providing a group per user is to store a group per
user. In this scheme whenever a user is created a group is automatically
created at the same time and the group gid is used as the gid for the
user. Also when the user is deleted the group is also automatically
deleted. This group is “special” in that it is more restrictive than
other groups - it will allow only one member which must be a
posixAccount, deny the addition of any member that does not share the
same gid, and it will not allow itself to be nested in other groups.</p>
<p>Merging of the user and group numeric identifier space is still possible
with this scheme.</p>
<p>The advantages to such a scheme</p>
<ul class="simple">
<li><p>The groups are real and so scale with the directory just like any
other entry - no on the fly translation.</p>
<ul>
<li><p>This has implications for other directory features, such as access
control, just working with the scheme</p></li>
<li><p>The real problem with a group per user scheme is not that the
server must store the groups, but that the clients must sift
through them.</p></li>
</ul>
</li>
<li><p>Clients that do things that are not allowed are given reasonable
responses and can act appropriately (when virtualizing group entries
from user entries any subsequent group operation on a user may, for
example, fall foul of schema violations which would likely be
confusing to clients)</p></li>
<li><p>it is definitely possible to implement without DS modifications
beyond a plugin (it is not so clear that is possible for virtualized
search results)</p></li>
</ul>
<p>Disadvantages:</p>
<ul class="simple">
<li><p>The DIT becomes littered with groups. Though this might be mitigated
somewhat by segregating the automatically created groups so that at
least casual browsing is not encumbered by them.</p></li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">GroupDiscussion</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#primary-groups-proposals">Primary Groups Proposals</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-virtual-personal-groups-proposal">The Virtual Personal Groups Proposal</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#real-groups-proposal">Real Groups Proposal</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>