<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Introduction &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Configuring Windows as an IPA Client" href="ConfiguringWindowsClients.html" />
    <link rel="prev" title="Introduction" href="ConfiguringSolarisClients.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h1>
<p>The IPA team lacks expertise on configuring non-Linux systems. The
following instructions worked at one time to provide a basic roadmap on
how to configure different operating systems to authenticate against an
IPA server. For additional information and support we suggest contacting
the operating system vendor.</p>
</section>
<section id="solaris-8-9-10">
<span id="solaris-8910"></span><h1>Solaris 8/9/10<a class="headerlink" href="#solaris-8-9-10" title="Permalink to this heading">¶</a></h1>
<section id="configuring-client-authentication">
<span id="id1"></span><h2>Configuring Client Authentication<a class="headerlink" href="#configuring-client-authentication" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Apply the latest kernel and LDAP patches.</p>
<ol class="arabic simple">
<li><p>For Solaris8: kernel patch + 108993. The latest version (version
55) can be downloaded by entering 108993 at
<a class="reference external" href="http://sunsolve.sun.com/pub-cgi/show.pl?target=patches/patch-access">http://sunsolve.sun.com/pub-cgi/show.pl?target=patches/patch-access</a>.</p></li>
<li><p>For Solaris 9, the required patch is 112960 (version 37)</p></li>
<li><p>For Solaris 10, the required patch is 119073-3.</p></li>
</ol>
</li>
<li><p>Add the following files to the /var/ldap directory:</p>
<ol class="arabic simple">
<li><p>/var/ldap/ldap_client_file: The important parameters in this file
are the ldapservers and the name of the client profile. At
startup, the ldapclient extracts the profile from the server.</p></li>
<li><p>/var/ldap/ldap_client_cred: These are the proxy settings. You can
encrypt the password in the file by using an online web tool such
as <a class="reference external" href="http://jpirr.nic.ad.jp/crypt_gen_web.html">http://jpirr.nic.ad.jp/crypt_gen_web.html</a></p></li>
</ol>
<p>Sample files are available
<a class="reference external" href="ConfiguringUnixClients#Client_Configuration_Files">here</a>. These
files need to be configured specifically for each client.</p>
</li>
<li><p>Ensure that the above files have 0400 permissions.</p></li>
<li><p>Configure nsswitch.conf. A sample file is provided
<a class="reference external" href="SolarisNsswitchConf">here</a>. In this file, passwd, group and
automounts are set to be read from ldap.</p></li>
<li><p>Set the Solaris NIS domain name:</p>
<ol class="arabic simple">
<li><p>echo “example.com” &gt; /etc/defaultdomain</p></li>
<li><p>domainname `cat /etc/defaultdomain`</p></li>
</ol>
</li>
<li><p>Configure pam.conf. Solaris 10 uses the same pam.conf file as Solaris
8 and 9, except that certain lines for pam_unix_cred.so.1 have been
uncommented. Sample files are provided
<a class="reference external" href="ConfiguringUnixClients#Client_Configuration_Files">here</a>.</p></li>
<li><p>Restart the ldap_cachemgr and ncsd.</p></li>
</ol>
</section>
<section id="configuring-client-tls">
<span id="id2"></span><h2>Configuring Client TLS<a class="headerlink" href="#configuring-client-tls" title="Permalink to this heading">¶</a></h2>
<p>The SSL/TLS settings are only required if you want to use SSL between
the clients and the server when performing operations such as account
lookups.</p>
<p>The SUNWtlsu package is needed to provide /usr/sfw/bin/certutil.</p>
<p><strong>To set up TLS on the clients:</strong></p>
<p>1. Copy the cert7.db, key3.db and secmod.db databases to the /var/ldap
directory. Make sure these files have permissions 0444.</p>
<p>2. Change the profile reference in /var/ldap/ldap_client_file to the
correct TLS profile. The TLS profile should have:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">authenticationMethod</span><span class="p">:</span> <span class="n">tls</span><span class="p">:</span><span class="n">simple</span>
<span class="n">serviceAuthenticationMethod</span><span class="p">:</span><span class="n">pam_ldap</span><span class="p">:</span><span class="n">tls</span><span class="p">:</span><span class="n">simple</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Restart the client:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">ldap_cachemgr</span> <span class="o">-</span><span class="n">K</span>
<span class="n">mv</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">cachemgr</span><span class="o">.</span><span class="n">log</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">cachemgr</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">old</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">ldap_cachemgr</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">nscd</span> <span class="n">stop</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">nscd</span> <span class="n">start</span>
</pre></div>
</div>
</section>
<section id="additional-resources">
<span id="id3"></span><h2>Additional Resources<a class="headerlink" href="#additional-resources" title="Permalink to this heading">¶</a></h2>
<section id="freeipa-users-mailing-list-threads">
<span id="id4"></span><h3>freeipa-users mailing list threads<a class="headerlink" href="#freeipa-users-mailing-list-threads" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://www.redhat.com/archives/freeipa-users/2014-October/msg00132.html">Solaris 10 client configuration using
profile</a></p></li>
<li><p><a class="reference external" href="https://www.redhat.com/archives/freeipa-devel/2014-April/msg00286.html">Patch to update Solaris
documentation</a></p></li>
</ul>
</section>
<section id="documentation-bugs">
<span id="id5"></span><h3>Documentation bugs<a class="headerlink" href="#documentation-bugs" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://bugzilla.redhat.com/show_bug.cgi?id=815515">Update the DUA profile included in
IPA</a></p></li>
<li><p><a class="reference external" href="https://bugzilla.redhat.com/show_bug.cgi?id=815533">Update the Solaris 10 client
documentation</a></p></li>
</ul>
</section>
</section>
</section>
<section id="solaris-6-7">
<span id="solaris-67"></span><h1>Solaris 6/7<a class="headerlink" href="#solaris-6-7" title="Permalink to this heading">¶</a></h1>
<section id="building-nss-ldap-openldap-and-pam-ldap">
<span id="id6"></span><h2>Building nss_ldap, OpenLDAP, and pam_ldap<a class="headerlink" href="#building-nss-ldap-openldap-and-pam-ldap" title="Permalink to this heading">¶</a></h2>
<p>Solaris 6 does not have a native LDAP client. Therefore, it is necessary
to provide a solution using nss_ldap.so. The following steps describe
how to compile nss_ldap.so on a Solaris 6 machine. This module is binary
compatible with Solaris 7.</p>
<p>1. Download and install the following packages from
<a class="reference external" href="http://sunfreeware.com/indexsparc26.html">http://sunfreeware.com/indexsparc26.html</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openssl</span><span class="mf">.0.9.8</span><span class="n">a</span><span class="o">.</span><span class="n">SPARC</span><span class="o">.</span><span class="n">Solaris</span><span class="mf">.2.6</span><span class="o">.</span><span class="n">pkg</span><span class="o">.</span><span class="n">tgz</span>
<span class="n">make</span><span class="o">-</span><span class="mf">3.80</span><span class="o">-</span><span class="n">sol26</span><span class="o">-</span><span class="n">sparc</span><span class="o">-</span><span class="n">local</span><span class="o">.</span><span class="n">gz</span>
<span class="n">gzip</span><span class="o">-</span><span class="mf">1.3.5</span><span class="o">-</span><span class="n">sol26</span><span class="o">-</span><span class="n">sparc</span><span class="o">-</span><span class="n">local</span>
<span class="n">gcc</span><span class="o">-</span><span class="mf">3.4.2</span><span class="o">-</span><span class="n">sol26</span><span class="o">-</span><span class="n">sparc</span><span class="o">-</span><span class="n">local</span>

<span class="n">pkgadd</span> <span class="o">-</span><span class="n">d</span> <span class="n">gzip</span><span class="o">-</span><span class="mf">1.3.5</span><span class="o">-</span><span class="n">sol26</span><span class="o">-</span><span class="n">sparc</span><span class="o">-</span><span class="n">local</span>
<span class="n">pkgadd</span> <span class="o">-</span><span class="n">d</span> <span class="n">gcc</span><span class="o">-</span><span class="mf">3.4.2</span><span class="o">-</span><span class="n">sol26</span><span class="o">-</span><span class="n">sparc</span><span class="o">-</span><span class="n">local</span>
<span class="n">gunzip</span> <span class="n">make</span><span class="o">-</span><span class="mf">3.80</span><span class="o">-</span><span class="n">sol26</span><span class="o">-</span><span class="n">sparc</span><span class="o">-</span><span class="n">local</span><span class="o">.</span><span class="n">gz</span>
<span class="n">pkgadd</span> <span class="o">-</span><span class="n">d</span> <span class="n">make</span><span class="o">-</span><span class="mf">3.80</span><span class="o">-</span><span class="n">sol26</span><span class="o">-</span><span class="n">sparc</span><span class="o">-</span><span class="n">local</span>
<span class="n">gunzip</span> <span class="n">openssl</span><span class="mf">.0.9.8</span><span class="n">a</span><span class="o">.</span><span class="n">SPARC</span><span class="o">.</span><span class="n">Solaris</span><span class="mf">.2.6</span><span class="o">.</span><span class="n">pkg</span><span class="o">.</span><span class="n">tgz</span> <span class="o">|</span><span class="n">tar</span> <span class="o">-</span><span class="n">xvf</span> <span class="o">-</span><span class="n">pkgadd</span> <span class="o">-</span><span class="n">d</span><span class="o">.</span> <span class="n">openssl</span>
</pre></div>
</div>
<p>There will be messages about conflicting files. Ignore them and proceed
with the installation.</p>
<p>2. Download openldap-stable-20060127.tar from the openldap site, and
extract as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">xvf</span> <span class="n">openldap</span><span class="o">-</span><span class="n">stable</span><span class="o">-</span><span class="mf">20060127.</span><span class="n">tar</span>
<span class="n">cd</span> <span class="n">openldap</span><span class="o">-</span><span class="mf">2.3.19</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Compile openldap:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldap</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">syslog</span> <span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">slapd</span> <span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">tls</span> <span class="n">CC</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">gcc</span>
<span class="n">make</span> <span class="n">depends</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Download pam_ldap from the padl site, and configure as follows:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>tar -xvf pam_ldap.tar
cd pam_ldap-180
./configure --prefix=/opt/ldap –with-ldap-dir=/opt/ldap
</pre></div>
</div>
<p>5. Modify the Makefile and add -L/usr/local/lib to the LD_FLAGS, and
then run make and make install:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pam_ldap_so_LDFLAGS = -B dynamic -M $(srcdir)/exports.solaris -G -B group -lc\ -L/opt/ldap/lib -L/usr/local/lib -R/opt/ldap/lib

make
make install

make[1]: Entering directory `/export/pam_ldap-180&#39;
/bin/sh ./mkinstalldirs /opt/ldap/lib/security
mkdir /opt/ldap/lib/security
./install-sh -c  -o root -g root pam_ldap.so
/opt/ldap/lib/security/pam_ldap.so.1
(cd /opt/ldap/lib/security; rm -f pam_ldap.so; ln -s pam_ldap.so.1
pam_ldap.so)
make  install-man5
make[2]: Entering directory `/export/pam_ldap-180&#39;
/bin/sh ./mkinstalldirs /opt/ldap/man/man5
 ./install-sh -c -m 644 ./pam_ldap.5 /opt/ldap/man/man5/pam_ldap.5
make[2]: Leaving directory `/export/pam_ldap-180&#39;
make[1]: Leaving directory `/export/pam_ldap-180&#39;
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Download nss_ldap from the padl.com site, and extract as follows:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">xvf</span> <span class="n">nss_ldap</span><span class="o">.</span><span class="n">tar</span>
<span class="n">cd</span> <span class="n">nss_ldap</span><span class="o">-</span><span class="mi">248</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Compile nss_ldap</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldap</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">ldap</span><span class="o">-</span><span class="nb">dir</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldap</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">rfc2307bis</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">make</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</section>
<section id="installing-pam-ldap-and-nss-ldap">
<span id="id7"></span><h2>Installing pam_ldap and nss_ldap<a class="headerlink" href="#installing-pam-ldap-and-nss-ldap" title="Permalink to this heading">¶</a></h2>
<p>This procedure describes how to install the nss_ldap and pam_ldap
binaries on Solaris 6 and Solaris 7. The binaries have been delivered as
a tar file that extract into /opt/ldap.</p>
<ol class="arabic simple">
<li><p>Copy the tar file to the root directory and untar.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">nss_ldap_solaris_6_7</span><span class="o">.</span><span class="n">tar</span> <span class="o">/</span><span class="p">;</span> <span class="n">tar</span> <span class="o">-</span><span class="n">xvf</span> <span class="n">nss_ldap_compiled</span><span class="o">.</span><span class="n">tar</span>
</pre></div>
</div>
<p>2. Install openssl 0.9.8 on the system. You may get messages about
conflicting files; ignore these and continue with the installation.</p>
<p>3. Copy /opt/ldap/lib/security/pam_ldap.so to
/usr/lib/security/pam_ldap.so.</p>
<ol class="arabic simple" start="4">
<li><p>Create an appropriate symlink as follows:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span>  <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="p">;</span> <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="n">pam_ldap</span><span class="o">.</span><span class="n">so</span> <span class="o">./</span><span class="n">pam_ldap</span><span class="o">.</span><span class="n">so</span><span class="mf">.1</span>
</pre></div>
</div>
<p>5. For Solaris 7, save the version of pam_unix.so, and copy over the
Solaris 6 version from /opt/ldap/lib/security/pam_unix.so.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">pam_unix</span><span class="o">.</span><span class="n">so</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">pam_unix</span><span class="o">.</span><span class="n">so</span><span class="o">.</span><span class="n">sol7</span>
<span class="n">cp</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">pam_unix</span><span class="o">.</span><span class="n">so</span>  <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">pam_unix</span><span class="o">.</span><span class="n">so</span>
</pre></div>
</div>
<p>6. Check if the pam module can be loaded. That is, see if the dynamic
linker can resolve all the dependencies by running ldd.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ldd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">pam_ldap</span><span class="o">.</span><span class="n">so</span>
</pre></div>
</div>
<p>7. Check that all the libraries can be found. The libraries under
/usr/local/lib may not be found. To put them in the search path, create
symbolic links. You may have to make the following links:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libssl</span><span class="o">.</span><span class="n">so</span><span class="mf">.0.9.8</span> <span class="o">=&gt;</span>       <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libssl</span><span class="o">.</span><span class="n">so</span><span class="mf">.0.9.8</span>
<span class="n">libcrypto</span><span class="o">.</span><span class="n">so</span><span class="mf">.0.9.8</span> <span class="o">=&gt;</span>    <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libcrypto</span><span class="o">.</span><span class="n">so</span><span class="mf">.0.9.8</span>
<span class="n">libgcc_s</span><span class="o">.</span><span class="n">so</span><span class="mf">.1</span> <span class="o">=&gt;</span>         <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libgcc_s</span><span class="o">.</span><span class="n">so</span><span class="mf">.1</span>
</pre></div>
</div>
<p>For example: ln -s /usr/local/lib/libssl.so.0.9.8
/usr/lib/libssl.so.0.9.8</p>
<p>For Solaris 7, the openssl libraries can be found in the
/usr/local/lib/ssl directory.</p>
<p>8. Copy nss_ldap from /opt/ldap/lib/nss_ldap.so to /usr/lib/nss_ldap.so
and then create the following link:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">nss_ldap</span><span class="o">.</span><span class="n">so</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">nss_ldap</span><span class="o">.</span><span class="n">so</span><span class="mf">.1</span>
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li><p>Check if all dynamic libraries are resolved, as follows:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ldd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">nss_ldap</span><span class="o">.</span><span class="n">so</span>
</pre></div>
</div>
<p>10. Copy over nsswitch.conf and pam.conf (refer to <a class="reference external" href="ConfiguringUnixClients#Client_Configuration_Files">Client Configuration
files</a>). These
files are same as the ones used for Solaris 8+.</p>
</section>
<section id="configuring-client-authentication-1">
<span id="id8"></span><h2>Configuring Client Authentication<a class="headerlink" href="#configuring-client-authentication-1" title="Permalink to this heading">¶</a></h2>
<p>The following files need to be configured correctly. Sample files are
provided in the client directories:</p>
<ul class="simple">
<li><p>/etc/ldap.conf</p></li>
<li><p>/etc/pam.conf</p></li>
<li><p>/etc/nsswitch.conf</p></li>
</ul>
</section>
<section id="configuring-client-tls-1">
<span id="id9"></span><h2>Configuring Client TLS<a class="headerlink" href="#configuring-client-tls-1" title="Permalink to this heading">¶</a></h2>
<p>The SSL/TLS settings are only required if you want to use SSL between
the clients and the server when performing operations such as account
lookups.</p>
<p>Because nss_ldap and pam_ldap have been compiled with TLS, it is
possible to do authentication with these clients using TLS. Due to time
constraints, this implementation is untested.</p>
</section>
</section>
<section id="hp-ux-11-0">
<span id="id10"></span><h1>HP-UX 11.0<a class="headerlink" href="#hp-ux-11-0" title="Permalink to this heading">¶</a></h1>
<p>The HP-UX clients are configured to read a profile from the Directory
Server. While this profile is of the same object class as that used by
the Solaris servers, its attributes have slightly different content and
usage. It is therefore necessary to create a separate profile for HP-UX
machines. This profile is automatically created when the first HP-UX
client on a domain is created. Subsequent machines on that domain are
configured by copying over the relevant configuration files.</p>
<p>Example profiles are provided
<a class="reference external" href="ConfiguringUnixClients#Sample_Profiles">here</a>.</p>
<blockquote>
<div><p><strong>Note:</strong> The client uses a proxy user to connect to the Directory
Server. In this case, the proxy user is
uid=proxyagent,ou=profile,dc=example,dc=com. This user needs to exist
on the Directory Server.</p>
</div></blockquote>
<section id="configuring-client-authentication-2">
<span id="id11"></span><h2>Configuring Client Authentication<a class="headerlink" href="#configuring-client-authentication-2" title="Permalink to this heading">¶</a></h2>
<p><strong>To create a new profile:</strong> Ensure that all clients have the following
software installed:</p>
<ul class="simple">
<li><p>LDAP-UX Integration version. You can obtain B03.30.02 from
<a class="reference external" href="https://h20293.www2.hp.com/portal/swdepot/try.do?productNumber=J4269AA">https://h20293.www2.hp.com/portal/swdepot/try.do?productNumber=J4269AA</a></p></li>
</ul>
<p>The following steps are required to complete the installation of the
first HP-UX 11.0 client. Subsequent clients can (and should) be
configured by copying over the relevant files.</p>
<ol class="arabic simple">
<li><p>Create the /etc/ldap.conf file if it does not exist.</p></li>
</ol>
<p>2. Configure a proxy user on the client. This user must exist on the
Directory Server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span><span class="o">/</span><span class="n">config</span>
<span class="o">./</span><span class="n">ldap_proxy_config</span> <span class="o">-</span><span class="n">i</span> <span class="n">uid</span><span class="o">=</span><span class="n">proxyagent</span><span class="p">,</span><span class="n">ou</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span> <span class="n">redhat123</span>
</pre></div>
</div>
<p>3. Run the setup program /opt/ldapux/config/setup. Detailed,
step-by-step instructions for this program are provided in the HP-UX
Client Configuration Guide on p. 30. The prompts are self-explanatory
and all schema elements should already have been installed on the
Directory Server. Note that the option to select SSL will only be
available if the cert7.db and key3.db files already exist on the system.
See the next section for details.</p>
<p>4. When prompted to accept the default options, select “no”. Then, enter
the options for the proxy user. Also, enter 0 for the ProfileTTL.
Profile refreshes will be configured manually as a cron job.</p>
<p>5. At the prompt, “Do you want to remap RFC2307 attributes?”, specify
“No.”</p>
<p>6. At the prompt, “Do you want to specify custom search descriptors?”,
specify “No.”</p>
<p>7. Select the option to restart the LDAPUX client services. The profile
is written to /etc/opt/ldadux/ldap_client_file, as well as to the
Directory Server. In addition, the proxy user’s credentials are written
to the /etc/opt/ldapux/cred file.</p>
<ol class="arabic simple" start="8">
<li><p>Modify pam.conf and nsswitch.conf. Sample files are provided here.</p></li>
<li><p>Verify the configuration by running the following commands:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pwget</span> <span class="o">-</span><span class="n">n</span> <span class="n">username</span>
<span class="n">grget</span> <span class="o">-</span><span class="n">n</span> <span class="n">groupname</span>
<span class="n">nsquery</span> <span class="n">passwd</span> <span class="n">username</span> <span class="n">ldap</span>
</pre></div>
</div>
<p>10. Set up a cron job to periodically refresh the profile. Instructions
on how to do this are in the HP-UX Client Configuration Guide on p.65.</p>
<p><strong>To configure further clients with the same profile:</strong></p>
<ol class="arabic simple">
<li><p>Copy the following files to the new server:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span><span class="o">/</span><span class="n">pcred</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span><span class="o">/</span><span class="n">ldapux_client</span><span class="o">.</span><span class="n">conf</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">pam</span><span class="o">.</span><span class="n">conf</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nsswitch</span><span class="o">.</span><span class="n">conf</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span><span class="o">/</span><span class="n">key3</span><span class="o">.</span><span class="n">db</span> <span class="p">(</span><span class="k">if</span> <span class="n">SSL</span> <span class="ow">is</span> <span class="n">enabled</span><span class="p">)</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span><span class="o">/</span><span class="n">cert7</span><span class="o">.</span><span class="n">db</span> <span class="p">(</span><span class="k">if</span> <span class="n">SSL</span> <span class="ow">is</span> <span class="n">enabled</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Make sure the file permissions are the same as the first server.</p></li>
<li><p>Download the profile:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">get_profile_entry</span> <span class="o">-</span><span class="n">s</span> <span class="n">nss</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Configure the proxy user:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">ldap_proxy_config</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Configure the cron job to refresh the profile.</p></li>
</ol>
</section>
<section id="configuring-client-tls-2">
<span id="id12"></span><h2>Configuring Client TLS<a class="headerlink" href="#configuring-client-tls-2" title="Permalink to this heading">¶</a></h2>
<p>The SSL/TLS settings are only required if you want to use SSL between
the clients and the server when performing operations such as account
lookups.</p>
<p><strong>To set up TLS on the clients:</strong></p>
<p>1. Copy the cert7.db and key3.db files into /etc/opt/ldapux. The
following instructions (steps 2 and 3) describe how to generate the
cert7.db files using certutil (which is actually delivered in
/opt/ldapux/contrib/bin/certutil). For subsequent boxes, it is necessary
only to copy the generated cert7.db and key3.db files to
/etc/opt/ldapux.</p>
<p>2. To create the cert, change directory to /etc/opt/ldapux. Create a new
database as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span><span class="o">/</span><span class="n">contrib</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">certutil</span> <span class="o">-</span><span class="n">N</span> <span class="o">-</span><span class="n">d</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span>
</pre></div>
</div>
<p>This generates empty cert7.db and key3.db databases.</p>
<p>3. Install the cacert into the cert7.db and key3.db databases from the
cacert.asc file (previously exported from ldap01.example.com using
certutil according to the instructions in Appendix A).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span><span class="o">/</span><span class="n">contrib</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">certutil</span> <span class="o">-</span><span class="n">A</span> <span class="o">-</span><span class="n">n</span> <span class="n">ldap08</span><span class="o">-</span><span class="n">ca</span><span class="o">-</span><span class="n">cert</span> <span class="o">-</span><span class="n">t</span> <span class="s2">&quot;C,,&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ldapux</span><span class="o">/</span><span class="n">cacert</span><span class="o">.</span><span class="n">asc</span>
</pre></div>
</div>
<p>4. Once the cert7.db and key3.db files are in place in /etc/opt/ldapux,
run the setup program “/opt/ldapux/config/setup” as described above, and
select SSL/Simple. This option will not show up if the db files are not
in /etc/opt/ldapux. This generates a new profile for TLS/Simple access
on the server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cn</span><span class="o">=</span><span class="n">hpux_11</span><span class="mf">.0</span><span class="n">_tls</span><span class="p">,</span><span class="n">ou</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
</pre></div>
</div>
</section>
</section>
<section id="hp-ux-11i-v-1-and-2">
<span id="id13"></span><h1>HP-UX 11i v.1 and 2<a class="headerlink" href="#hp-ux-11i-v-1-and-2" title="Permalink to this heading">¶</a></h1>
<p>No special setup is required for HP-UX 11i. As with HP-UX11.0, the
client retrieves a profile from the Directory Server. The profile used
is almost the same as the HP-UX 11.0. The only difference is that the
automount services is LDAP-enabled in HP-UX-11i, and is therefore
configured in the HP-UX 11i client profile.</p>
<section id="configuring-client-authentication-3">
<span id="id14"></span><h2>Configuring Client Authentication<a class="headerlink" href="#configuring-client-authentication-3" title="Permalink to this heading">¶</a></h2>
<p>1. Download the LDAP-UX Integration software version B.04.00.03 from the
following URL:
<a class="reference external" href="https://h20293.www2.hp.com/portal/swdepot/try.do?productNumber=J4269AA">https://h20293.www2.hp.com/portal/swdepot/try.do?productNumber=J4269AA</a></p>
<p>2. The configuration steps for HP-UX11i are identical to those for 11.0
except for step 6 (search descriptor configuration). For this step,
specify “yes” at the prompt, “Do you want to specify custom search
descriptors?” The only search descriptor that is required to be
specified is the one for automounts. Enter the following search
descriptor for automounts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">searchBase</span><span class="p">:</span> <span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">searchScope</span><span class="p">:</span> <span class="n">sub</span>
<span class="n">searchFilter</span><span class="p">:</span> <span class="p">(</span><span class="n">objectclass</span><span class="o">=</span><span class="n">automount</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Create the /etc/ldap.conf file if it does not exist.</p></li>
</ol>
</section>
<section id="configuring-client-tls-3">
<span id="id15"></span><h2>Configuring Client TLS<a class="headerlink" href="#configuring-client-tls-3" title="Permalink to this heading">¶</a></h2>
<p>The SSL/TLS settings are only required if you want to use SSL between
the clients and the server when performing operations such as account
lookups.</p>
<p><strong>To set up TLS on the clients:</strong></p>
<p>1. Obtain the cert8.db and key.db for the CAcert. This can be obtained
from the CA by following the steps on p.42 of the HP-UX Client Setup
Guide, or using certutil as described on p.43. The cert8.db and key.db
tested at example were obtained from Mozilla as described on p.43.</p>
<ol class="arabic simple" start="2">
<li><p>Copy key.db and cert8.db into /etc/opt/ldapux</p></li>
</ol>
<p>3. Run the client setup program /opt/ldapux/config/setup as described
above. This only needs to be done for the first client. Be sure to
specify SSL and SSL/simple authentication.</p>
<p>At example, running the setup program resulted in the following profile
being created:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cn</span><span class="o">=</span><span class="n">ldapuxprofile</span><span class="o">-</span><span class="n">tls</span><span class="p">,</span><span class="n">ou</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
</pre></div>
</div>
<p>4. For subsequent clients, the following files need to be copied into
/etc/opt/ldapux:</p>
<ul class="simple">
<li><p>cert8.db</p></li>
<li><p>ldapux_client.conf</p></li>
<li><p>key3.db</p></li>
<li><p>pcred</p></li>
</ul>
<p>The simple instructions on how to set up the machine using these files
are detailed on p.63 of the HP-UX Client Configuration Guide.</p>
</section>
</section>
<section id="aix-5-1">
<span id="id16"></span><h1>AIX 5.1<a class="headerlink" href="#aix-5-1" title="Permalink to this heading">¶</a></h1>
<section id="building-nss-ldap">
<span id="id17"></span><h2>Building nss_ldap<a class="headerlink" href="#building-nss-ldap" title="Permalink to this heading">¶</a></h2>
<p>AIX 5.1 does not deliver a native LDAP client. For these clients, the
nss_ldap module from padl.com must be compiled and installed.</p>
<p><strong>To build nss_ldap:</strong></p>
<ol class="arabic simple">
<li><p>Install the following install package: bos.adt.syscalls</p></li>
<li><p>Install the following rpms from the IBM toolkit:</p></li>
</ol>
<ul class="simple">
<li><p>libgcc-3.3.2-5</p></li>
<li><p>gcc-3.3.2-5</p></li>
<li><p>openldap-2.0.21-3</p></li>
<li><p>openldap-devel-2.0.21-3</p></li>
</ul>
<p>3. Obtain and install the nss_ldap_226 source RPM from the Red Hat
source rpms. At the time this compilation was done, the latest version
available from padl.com was not stable.</p>
<p>4. Untar the nss_ldap source tarball and configure using the following
command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LDFLAGS=&quot;-L/opt/freeware/lib&quot; LIBS=-lc \
        CPPFLAGS=&quot;-I/opt/freeware/include  -D_LINUX_SOURCE_COMPAT
        -DPAM_EXTERN=&quot; ./configure --with-ldap-lib=openldap
        --with-ldap-conf-file=/etc/pam_ldap.conf –enable-ssl
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Modify the following lines in the Makefile:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>nss_ldap_so_LDFLAGS = -bM:SRE -bnoentry -bE:$(srcdir)/exports.aix -brtl -lc
         -L/opt/freeware/lib
NSS_LDAP_LDFLAGS = -bM:SRE -enss_ldap_initialize -brtl -lc -L/opt/freeware/lib
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Run gmake</p></li>
</ol>
<p>We have configured the compilation to use the /etc/pam_ldap.conf
configuration file, because IBM SecureWay uses /etc/pam.conf. The
compilation should have created the following files:</p>
<ul class="simple">
<li><p>nss_ldap.so</p></li>
<li><p>NSS_LDAP</p></li>
<li><p>nsswitch.ldap</p></li>
<li><p>ldap.conf</p></li>
</ul>
<ol class="arabic simple" start="7">
<li><p>Rename ldap.conf to pam_ldap.conf</p></li>
</ol>
<p>These are the files that need to be installed on each client.</p>
</section>
<section id="installing-and-configuring-nss-ldap">
<span id="id18"></span><h2>Installing and Configuring nss_ldap<a class="headerlink" href="#installing-and-configuring-nss-ldap" title="Permalink to this heading">¶</a></h2>
<p>1. The compiled NSS_LDAP module has been delivered as a tarball. Extract
the tarball.</p>
<p>2. Copy nss_ldap.so to /usr/lib/netsvc/dynload/nss_ldap.so. Create the
directory if it does not exist.</p>
<ol class="arabic simple" start="3">
<li><p>Copy NSS_LDAP to /usr/lib/security.</p></li>
<li><p>Make sure the two files have executable permissions.</p></li>
</ol>
<p>5. If irs.conf exists, modify it to use nss_ldap (as appropriate).
Create this file if it does not exist. A sample file is given below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hosts</span> <span class="n">dns</span> <span class="k">continue</span>
<span class="n">hosts</span> <span class="n">nis</span> <span class="k">continue</span>
<span class="n">hosts</span> <span class="n">local</span>
<span class="n">services</span> <span class="n">nss_ldap</span> <span class="k">continue</span>
<span class="n">services</span> <span class="n">nis</span> <span class="k">continue</span>
<span class="n">services</span> <span class="n">local</span>
<span class="n">networks</span> <span class="n">dns</span> <span class="k">continue</span>
<span class="n">networks</span> <span class="n">nss_ldap</span> <span class="k">continue</span>
<span class="n">networks</span> <span class="n">nis</span> <span class="k">continue</span>
<span class="n">networks</span> <span class="n">local</span>
<span class="n">netgroup</span> <span class="n">nss_ldap</span> <span class="k">continue</span>
<span class="n">netgroup</span> <span class="n">nis</span> <span class="k">continue</span>
<span class="n">netgroup</span> <span class="n">local</span>
<span class="n">protocols</span> <span class="n">nss_ldap</span> <span class="k">continue</span>
<span class="n">protocols</span> <span class="n">nis</span> <span class="k">continue</span>
<span class="n">protocols</span> <span class="n">local</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Add the following stanza to /lib/security/methods.cfg:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LDAP</span><span class="p">:</span>
    <span class="n">program</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">NSS_LDAP</span>
</pre></div>
</div>
<p>7. Comment out any references to LDAP, because these are for the IBM
SecureWay product.</p>
<p>8. Edit /etc/security/user. Modify the “SYSTEM” attribute of the
“default” entry to “compat OR LDAP”</p>
<p>9. Modify ldap.conf to add the server name and other attributes. A
sample ldap.conf is provided in the Appendix. Copy this file to
/etc/pam_ldap.conf</p>
<ol class="arabic simple" start="10">
<li><p>Modify /etc/nsswitch.conf to add ldap as appropriate.</p></li>
</ol>
</section>
<section id="configuring-client-tls-4">
<span id="id19"></span><h2>Configuring Client TLS<a class="headerlink" href="#configuring-client-tls-4" title="Permalink to this heading">¶</a></h2>
<p>Because nss_ldap has been compiled with SSL and TLS support, it is
likely the following steps result in a working TLS enabled system. Due
to time constraints, these steps are untested.</p>
<p><strong>The following steps? Nothing provided here.</strong></p>
</section>
</section>
<section id="aix-5-2">
<span id="id20"></span><h1>AIX 5.2<a class="headerlink" href="#aix-5-2" title="Permalink to this heading">¶</a></h1>
<section id="configuring-client-authentication-4">
<span id="id21"></span><h2>Configuring Client Authentication<a class="headerlink" href="#configuring-client-authentication-4" title="Permalink to this heading">¶</a></h2>
<p>1. Client authentication is performed using IBM’s native LDAP client.
Client configuration is performed using the mksecldap command, as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mksecldap</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">h</span> <span class="n">ldap03</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">a</span> <span class="s2">&quot;cn=Directory Manager” </span><span class="se">\</span>
<span class="s2">        -p mysecret -d &quot;</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span><span class="s2">&quot; -u NONE</span>
</pre></div>
</div>
<p>2. The mksecldap command modifies the /etc/security/ldap/ldap.cfg
configuration file based on the mappings it was able to find in the
Directory Server. These mappings are likely to be incorrect, however,
and should be modified to reflect the correct information as in the
sample below. Full configuration files are found in the Appendix.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Base DN where the user and group data are stored in the LDAP server.</span>
<span class="c1"># e.g., if user foo&#39;s DN is: username=foo,ou=aixuser,cn=aixsecdb</span>
<span class="c1"># then the user base DN is: ou=aixuser,cn=aixsecdb</span>
<span class="n">userbasedn</span><span class="p">:</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">groupbasedn</span><span class="p">:</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">idbasedn</span><span class="p">:</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">hostbasedn</span><span class="p">:</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">servicebasedn</span><span class="p">:</span><span class="n">ou</span><span class="o">=</span><span class="n">services</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">protocolbasedn</span><span class="p">:</span><span class="n">ou</span><span class="o">=</span><span class="n">protocols</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">networkbasedn</span><span class="p">:</span><span class="n">ou</span><span class="o">=</span><span class="n">networks</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">netgroupbasedn</span><span class="p">:</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">rpcbasedn</span><span class="p">:</span><span class="n">ou</span><span class="o">=</span><span class="n">rpc</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
</pre></div>
</div>
<p>3. If NIS maps are present, the mksecldap command also modifies the
/etc/irs.conf file. Make sure that the information in this file is
correct. An example is shown below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hosts</span> <span class="n">dns</span> <span class="k">continue</span>
<span class="n">hosts</span> <span class="n">nis</span> <span class="k">continue</span>
<span class="n">hosts</span> <span class="n">local</span>
<span class="n">services</span> <span class="n">nis_ldap</span> <span class="k">continue</span>
<span class="n">services</span> <span class="n">nis</span> <span class="k">continue</span>
<span class="n">services</span> <span class="n">local</span>
<span class="n">networks</span> <span class="n">nis_ldap</span> <span class="k">continue</span>
<span class="n">networks</span> <span class="n">dns</span> <span class="k">continue</span>
<span class="n">networks</span> <span class="n">nis</span> <span class="k">continue</span>
<span class="n">networks</span> <span class="n">local</span>
<span class="n">netgroup</span> <span class="n">nis_ldap</span> <span class="k">continue</span>
<span class="n">netgroup</span> <span class="n">nis</span> <span class="k">continue</span>
<span class="n">netgroup</span> <span class="n">local</span>
<span class="n">protocols</span> <span class="n">nis_ldap</span> <span class="k">continue</span>
<span class="n">protocols</span> <span class="n">nis</span> <span class="k">continue</span>
<span class="n">protocols</span> <span class="n">local</span>
</pre></div>
</div>
<p>4. If NIS maps are present, the mksecldap command modifies the
/etc/netsvc.conf file. Make sure these settings are correct, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hosts</span> <span class="o">=</span> <span class="n">nis_ldap</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">nis</span><span class="p">,</span> <span class="n">local</span>
</pre></div>
</div>
</section>
<section id="configuring-client-tls-5">
<span id="id22"></span><h2>Configuring Client TLS<a class="headerlink" href="#configuring-client-tls-5" title="Permalink to this heading">¶</a></h2>
<p>The SSL/TLS settings are only required if you want to use SSL between
the clients and the server when performing operations such as account
lookups. It is possible to set up TLS for AIX 5.2. A full set of
instructions will be provided at a later date.</p>
</section>
</section>
<section id="aix-5-3">
<span id="id23"></span><h1>AIX 5.3<a class="headerlink" href="#aix-5-3" title="Permalink to this heading">¶</a></h1>
<section id="configuring-client-authentication-5">
<span id="id24"></span><h2>Configuring Client Authentication<a class="headerlink" href="#configuring-client-authentication-5" title="Permalink to this heading">¶</a></h2>
<p>Use the same configuration as for AIX 5.2.</p>
</section>
<section id="configuring-client-tls-6">
<span id="id25"></span><h2>Configuring Client TLS<a class="headerlink" href="#configuring-client-tls-6" title="Permalink to this heading">¶</a></h2>
<p>The SSL/TLS settings are only required if you want to use SSL between
the clients and the server when performing operations such as account
lookups.</p>
<p><strong>To set up TLS on the clients:</strong></p>
<p>1. Install the GSK kit. You should have the following filesets
installed:</p>
<ul class="simple">
<li><p>gskak.rte 6.0.5.41 C F AIX Certificate and SSL Base</p></li>
<li><p>gsksa.rte 7.0.3.3 C F AIX Certificate and SSL Base</p></li>
<li><p>gskta.rte 7.0.3.3 C F AIX Certificate and SSL Base</p></li>
</ul>
<p>2. Install the ldap.max_crypto_client filesets. These are found on the
expansion pack CD:</p>
<ul class="simple">
<li><p>ldap.max_crypto_client.adt</p></li>
<li><p>ldap.max_crypto_client.rte</p></li>
</ul>
<p>3.Create the key DB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gsk7cmd</span> <span class="o">-</span><span class="n">keydb</span> <span class="o">-</span><span class="n">create</span> <span class="o">-</span><span class="n">db</span> <span class="n">key</span><span class="o">.</span><span class="n">kdb</span> <span class="o">-</span><span class="n">pw</span> <span class="n">redhat123</span> <span class="o">-</span><span class="nb">type</span> <span class="n">cms</span>
</pre></div>
</div>
<p>4. Copy over the DER binary CA Cert file. This is obtained by running
the following commands on the ldap01 server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">redhat</span><span class="o">-</span><span class="n">ds</span><span class="o">/</span><span class="n">alias</span>
 <span class="o">../</span><span class="n">shared</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">certutil</span> <span class="o">-</span><span class="n">L</span> <span class="o">-</span><span class="n">d</span> <span class="o">.</span> <span class="o">-</span><span class="n">P</span> <span class="n">slapd</span><span class="o">-</span><span class="n">ldap01</span><span class="o">-</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;Certificate Manager&quot;</span> \
<span class="o">-</span><span class="n">r</span> <span class="o">&gt;</span> <span class="n">cacert</span><span class="o">.</span><span class="n">der</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Install the CA cert and make it trusted:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gsk7cmd</span> <span class="o">-</span><span class="n">cert</span> <span class="o">-</span><span class="n">add</span> <span class="o">-</span><span class="n">db</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">key</span><span class="o">.</span><span class="n">kdb</span> <span class="o">-</span><span class="n">pw</span> <span class="n">redhat123</span>  <span class="o">-</span><span class="n">label</span> <span class="s2">&quot;ldap08 CA Cert&quot;</span> <span class="o">-</span><span class="n">trust</span> <span class="n">enable</span> <span class="o">-</span><span class="nb">format</span> <span class="n">binary</span> <span class="o">-</span><span class="n">file</span> <span class="n">cacert</span><span class="o">.</span><span class="n">der</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Now configure the ldap client:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mksecldap</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">h</span> <span class="n">ldap01</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">a</span> <span class="s2">&quot;cn=Directory Manager&quot;</span> \
<span class="o">-</span><span class="n">p</span> <span class="n">redhat123</span> <span class="o">-</span><span class="n">k</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">ldap</span><span class="o">/</span><span class="n">key</span><span class="o">.</span><span class="n">kdb</span> <span class="o">-</span><span class="n">w</span> <span class="n">redhat123</span> <span class="o">-</span><span class="n">d</span> <span class="s2">&quot;dc=example,dc=com&quot;</span>
</pre></div>
</div>
<p>7. Modify the userbasedn, groupbasedn etc., in
/etc/security/ldap/ldap.conf as appropriate.</p>
<ol class="arabic simple" start="8">
<li><p>Restart the ldap client:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stop</span><span class="o">-</span><span class="n">secldapclntd</span>
<span class="n">flush</span><span class="o">-</span><span class="n">secldapclntd</span>
<span class="n">start</span><span class="o">-</span><span class="n">secldapclntd</span>
</pre></div>
</div>
</section>
</section>
<section id="aix-sudo">
<span id="id26"></span><h1>AIX Sudo<a class="headerlink" href="#aix-sudo" title="Permalink to this heading">¶</a></h1>
<p>Sudo on AIX can be configured to retrieve its rules from the IPA server
the same way Linux clients do, although it needs a little more effort to
get it working. For further details on how to setup this functionality
on AIX see: <a class="reference external" href="SUDO_Integration_for_AIX">SUDO Integration for AIX</a>.</p>
</section>
<section id="aix-enabling-password-change-on-client">
<span id="id27"></span><h1>AIX : Enabling password change on client<a class="headerlink" href="#aix-enabling-password-change-on-client" title="Permalink to this heading">¶</a></h1>
<p>To enable users to change their password through the AIX Client, it’s
very simple.</p>
<ol class="arabic simple">
<li><p>Edit the /etc/security/ldap/ldap.cfg</p></li>
<li><p>Change the value of authtype parameter from unix_auth to ldap_auth</p></li>
</ol>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">-</span> <span class="n">PROD</span><span class="c1"># grep authtype /etc/security/ldap/ldap.cfg</span>
<span class="c1">#authtype:unix_auth</span>
<span class="n">authtype</span><span class="p">:</span><span class="n">ldap_auth</span>
<span class="n">root</span><span class="nd">@localhost</span><span class="o">-</span> <span class="n">PROD</span><span class="c1">#</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Restart LDAP client, and try to change a user password.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">-</span> <span class="n">PROD</span><span class="c1"># stop-secldapclntd &amp;&amp; sleep 3 &amp;&amp; start-secldapclntd</span>
<span class="n">The</span> <span class="n">secldapclntd</span> <span class="n">daemon</span> <span class="n">terminated</span> <span class="n">successfully</span><span class="o">.</span>
<span class="n">Starting</span> <span class="n">the</span> <span class="n">secldapclntd</span> <span class="n">daemon</span><span class="o">.</span>
<span class="n">The</span> <span class="n">secldapclntd</span> <span class="n">daemon</span> <span class="n">started</span> <span class="n">successfully</span><span class="o">.</span>
<span class="n">root</span><span class="nd">@localhost</span> <span class="o">-</span> <span class="n">PROD</span><span class="c1">#</span>
</pre></div>
</div>
</section>
<section id="client-configuration-files">
<span id="id28"></span><h1>Client Configuration Files<a class="headerlink" href="#client-configuration-files" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="SolarisNsswitchConf">nsswitch.conf</a></p></li>
<li><p><a class="reference external" href="SolarisPamConf89">pam.conf</a> for Solaris 8/9</p></li>
<li><p><a class="reference external" href="SolarisPamConf10">pam.conf</a> for Solaris 10</p></li>
<li><p><a class="reference external" href="SolarisLdapClientFile">ldap_client_file</a></p></li>
<li><p><a class="reference external" href="SolarisLdapClientCred">ldap_client_cred</a></p></li>
</ul>
</section>
<section id="sample-profiles">
<span id="id29"></span><h1>Sample Profiles<a class="headerlink" href="#sample-profiles" title="Permalink to this heading">¶</a></h1>
<section id="solaris">
<h2>Solaris<a class="headerlink" href="#solaris" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="SolarisNonTlsProfile">Sample Non-TLS Profile for Solaris</a></p></li>
<li><p><a class="reference external" href="SolarisTlsProfile">Sample TLS Profile for Solaris</a></p></li>
</ul>
</section>
<section id="hp-ux">
<span id="id30"></span><h2>HP-UX<a class="headerlink" href="#hp-ux" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="HpuxNonTlsProfile">Sample Non-TLS Profile for HP-UX</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/archive/pages/ConfiguringUnixClients.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>