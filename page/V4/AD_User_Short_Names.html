
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>AD_User_Short_Names &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/V4/AD_User_Short_Names';</script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="https://raw.githubusercontent.com/freeipa/freeipa.github.io/main/src/_static/freeipa-logo-small.png" class="logo__image" alt="Logo image" />
</a>
<div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Documentation.html">Documentation</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Troubleshooting.html">Troubleshooting</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/page/V4/AD_User_Short_Names.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>AD_User_Short_Names</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-cases">Use Cases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#design">Design</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#domain-resolution-order-storage-and-interpretation">Domain resolution order storage and interpretation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#global-vs-local-domain-resolution-order-settings">Global vs. local domain resolution order settings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#domain-resolution-order-management">Domain resolution order management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#domain-resolution-order-validation">Domain resolution order validation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-management">Feature Management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration">Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade">Upgrade</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-use">How to Use</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-create-a-global-resolution-order">Example 1: Create a global resolution order</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-more-conductive-to-automation">Example 1 more conductive to automation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-2-creating-local-override-of-global-resolution-order">Example 2: creating local override of global resolution order</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-plan">Test Plan</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="ad-user-short-names">
<h1>AD_User_Short_Names<a class="headerlink" href="#ad-user-short-names" title="Link to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>Currently the ability of FreeIPA/SSSD to resolve and authenticate AD
users by their short names is quite limited. While
<code class="docutils literal notranslate"><span class="pre">default_domain_suffix</span></code> option in <code class="docutils literal notranslate"><span class="pre">sssd.conf</span></code> can be used to resolve
short names incoming from single AD domain, it quickly becomes unusable
if the same functionality is desired for users from multiple trusted
forests. Moreover, being a local setting, each node has to be configured
manually which does not scale in larger deployments.</p>
<p>In order to further improve the integration with Active
Directory-managed deployments, this design proposes a centrally managed
mechanism that can be used by clients (SSSD) to resolve short names to
fully-qualified identifiers, use them to authenticate users and cache
the results.</p>
</section>
<section id="use-cases">
<h2>Use Cases<a class="headerlink" href="#use-cases" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>FreeIPA Administrator manages access to Unix resources for AD users
coming from multiple forests/domains. In order to improve UX for
these users he wishes to have a mechanism that permits them to log
into FreeIPA-enrolled machines using their short name only</p></li>
<li><p>The administrator also wishes to have the ability to manually set the
trusted forest/domain priority during user lookup so that the AD
forest whose users are accessing IPA-managed machines most often is
resolved first thus increasing performance</p></li>
<li><p>The administrator also wishes to manage the domain list centrally on
FreeIPA masters. The changes should be immediately seen and consumed
by all SSSD clients in the topology which have the capability to
resolve AD users by short name.</p></li>
<li><p>the administrator wishes to have both a global settings and a local
overrides applicable to selected hosts/hostgroups when a more
fine-grained short name resolution is required</p></li>
</ul>
</section>
<section id="design">
<h2>Design<a class="headerlink" href="#design" title="Link to this heading">#</a></h2>
<p>NOTE: This design concerns mostly the server-side implementation and
management of data consumable by SSSD client.</p>
<p>The ordered list of domains used for resolution of user short name to
the full-qualified form will be referred to as domain resolution order
in the rest of this document.</p>
</section>
<section id="domain-resolution-order-storage-and-interpretation">
<h2>Domain resolution order storage and interpretation<a class="headerlink" href="#domain-resolution-order-storage-and-interpretation" title="Link to this heading">#</a></h2>
<p>The domain resolution order will be stored as a part of Global
configuration object. If the attribute exists and is not empty ( i.e.
contains at least one domain) the client shall extract the ordered list
of domains from it and used them to resolve an incoming short name
iteratively until a matching user is found. If the short name occurs in
multiple forests/domains (e.g. Administrator), the first matching entry
is used during authentication. If such behavior is undesired, the
affected user must specify his fully-qualified name upon login.</p>
<p>Any domain which is not contained in domain resolution order will not be
used in short name resolution. Any user belonging to such domain has to
use his fully-qualified name to login to IPA domain.</p>
<p>By the extension of the previous rule, empty domain resolution order can
imply that all users (even those in FreeIPA domain) have to use
fully-qualified names to log into enrolled machines. The exact
interpretation of these rule can, however, be left on the client
application.</p>
</section>
<section id="global-vs-local-domain-resolution-order-settings">
<h2>Global vs. local domain resolution order settings<a class="headerlink" href="#global-vs-local-domain-resolution-order-settings" title="Link to this heading">#</a></h2>
<p>There will be a means to manage a global domain resolution order
applicable for all enrolled hosts in the IPA domain. The global settings
can be overriden for selected hosts/hostgroups by attaching a local
configuration to a specific ID view object. The override can be created
also when no global definition is set so that the feature can first be
tested on selected hostgroup and then applied globally when desired.</p>
</section>
<section id="domain-resolution-order-management">
<h2>Domain resolution order management<a class="headerlink" href="#domain-resolution-order-management" title="Link to this heading">#</a></h2>
<p>The feature will provide a simple API for the management of the domain
resolution order. More sophisticated API may be provided later if demand
for better user experience arises. For example, the following high-level
operations may be considered in the future:</p>
<ul class="simple">
<li><p>prepending and appending selected domains to the list</p></li>
<li><p>inserting the domains before and after other domain which is already
in the list</p></li>
<li><p>moving the domains at the beginning and the end of the list</p></li>
<li><p>moving the domains before another domain already in the list</p></li>
<li><p>removing domain names present in the list</p></li>
<li><p>refreshing the domain list: this operation will check whether all
domains present are active or exist in the trust objects and remove
stale entries</p></li>
</ul>
<p>Additionally, the commands that retrieve trusted domain information
(<code class="docutils literal notranslate"><span class="pre">trust-fetch-domains</span></code>) and manipulate trusted domains
(<code class="docutils literal notranslate"><span class="pre">trustdomain-disable</span></code>, <code class="docutils literal notranslate"><span class="pre">trustdomain-del</span></code>) may query domain
resolution order and remove stale domains from it when the trusted
domain was removed or disabled.</p>
</section>
<section id="domain-resolution-order-validation">
<h2>Domain resolution order validation<a class="headerlink" href="#domain-resolution-order-validation" title="Link to this heading">#</a></h2>
<p>Finally, any modification of the domain resolution order must ensure
that each of the specified domain names corresponds either to that of
FreeIPA domain or to one of the trusted AD domains stored in LDAP
backend. In the case of trusted domains, the domain must not be marked
as disabled.</p>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Link to this heading">#</a></h2>
<p>The LDAP schema of the global config object
(<code class="docutils literal notranslate"><span class="pre">cn=ipaConfig,cn=etc,$SUFFIX</span></code>) and ID view objects will be extended
by a new objectclass providing the attribute which stores the domain
resolution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">objectclasses</span><span class="p">:</span> <span class="p">(</span> <span class="mf">2.16.840.1.113730.3.8.12.39</span>  <span class="n">NAME</span> <span class="s1">&#39;ipaNameResolutionData&#39;</span> <span class="n">DESC</span> <span class="s1">&#39;Data used to resolve short names</span>
<span class="n">to</span> <span class="n">fully</span><span class="o">-</span><span class="n">qualified</span> <span class="n">form</span><span class="s1">&#39; SUP top AUXILIARY MAY ( ipaDomainResolutionOrder ) X-ORIGIN &#39;</span><span class="n">IPA</span> <span class="n">v4</span><span class="mf">.5</span><span class="s1">&#39; )</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">attributeTypes</span><span class="p">:</span> <span class="p">(</span> <span class="mf">2.16.840.1.113730.3.8.11.77</span> <span class="n">NAME</span> <span class="s1">&#39;ipaDomainResolutionOrder&#39;</span> <span class="n">DESC</span> <span class="s1">&#39;List of domains used to resolve</span>
<span class="n">a</span> <span class="n">short</span> <span class="n">name</span><span class="s1">&#39; EQUALITY caseIgnoreIA5Match SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE X-ORIGIN &#39;</span><span class="n">IPA</span> <span class="n">v4</span><span class="mf">.5</span><span class="s1">&#39; )</span>
</pre></div>
</div>
<p>The value of the <code class="docutils literal notranslate"><span class="pre">ipaDomainResolutionOrder</span></code> consist of a
colon-separated list of domain names (e.g
<code class="docutils literal notranslate"><span class="pre">domain1.test:ad.domain2.test:ad.domain3.test</span></code>. The client is
responsible to retrieve and parse this value in order to decode the list
of domains it should consult for short name resolution.</p>
</section>
<section id="feature-management">
<h2>Feature Management<a class="headerlink" href="#feature-management" title="Link to this heading">#</a></h2>
<p>UI</p>
<p>The WebUI should provide a way to view and manipulate the domain
resolution order under the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> tab.</p>
<p>CLI</p>
<p>The <code class="docutils literal notranslate"><span class="pre">config</span></code> object will gain <code class="docutils literal notranslate"><span class="pre">domain-resolution-order</span></code> option which
contains the raw attribute value which can be displayed by
<code class="docutils literal notranslate"><span class="pre">config-show</span></code> and (re-)set by <code class="docutils literal notranslate"><span class="pre">config-mod</span></code>.</p>
<p>Higher level commands may be considered in the future if there is a
demand for better user experience.</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">#</a></h2>
<p>The feature is considered disabled if the domain resolution order is
absent in the configuration and applied ID view. In this case the client
shall retain the default behavior when handling incoming users.</p>
<p>If the domain resolution order (or its override) is present and empty,
then the client may either keep the default behavior or force all users
to use fully qualified names to access resources in FreeIPA domain.</p>
</section>
<section id="upgrade">
<h2>Upgrade<a class="headerlink" href="#upgrade" title="Link to this heading">#</a></h2>
<p>Upon upgrade the LDAP schema will be updated and the ipaConfig object
will be augmented by the new objectclass.</p>
<p>Since updating the objectclasses of all ID View objects can potentially
be costly, the existing ID views will be updated on-demand by the
framework code. ID views created after the upgrade will include the new
objectclass automatically.</p>
<p>The feature is considered backwards compatible since the old client
which do not understand domain resolution order will simply ignore it
and keep original behavior.</p>
</section>
<section id="how-to-use">
<h2>How to Use<a class="headerlink" href="#how-to-use" title="Link to this heading">#</a></h2>
<p>Consider the following scenario as an example:</p>
<p>FreeIPA domain ‘ipa.test’ is trusting a forest ‘ad.forest.test’ which
has two child domains (‘child1.ad.forest.test’,
‘child2.ad.forest.test’).</p>
<p>To allow users from both FreeIPA domain and from the trusted AD forest
log in using short name, we may do the following:</p>
</section>
<section id="example-1-create-a-global-resolution-order">
<h2>Example 1: Create a global resolution order<a class="headerlink" href="#example-1-create-a-global-resolution-order" title="Link to this heading">#</a></h2>
<p>just directly set the value of <code class="docutils literal notranslate"><span class="pre">--domain-resolution-order</span></code> attribute
to the desired value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipa config-mod --domain-resolution-order=&#39;ipa.test:ad.forest.test:child1.ad.forest.test:child2.ad.forest.test&#39;
  Maximum username length: 32
  Home directory base: /home
  ...
  Domain Resolution Order: ipa.test:ad.forest.test:child1.ad.forest.test:child2.ad.forest.test
  ...
</pre></div>
</div>
</section>
<section id="example-1-more-conductive-to-automation">
<h2>Example 1 more conductive to automation<a class="headerlink" href="#example-1-more-conductive-to-automation" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>store to FreeIPA domain name in the temporary file which will store
the entries of interest:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipa env domain | awk &#39;{print $2}&#39; &gt; domain_list.txt
</pre></div>
</div>
<ul class="simple">
<li><p>append the list of trusted domains to the file:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipa trustdomain-find ad.forest.test --pkey-only --raw | grep &#39;cn:&#39; | awk &#39;{ print $2}&#39; &gt;&gt; domain_list.txt
</pre></div>
</div>
<p>NOTE: if you wish the AD users to be resolved first you can just reverse
the order of operations.</p>
<ul class="simple">
<li><p>now set the <code class="docutils literal notranslate"><span class="pre">domain-resolution-order</span></code> attribute value:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipa config-mod --domain-resolution-order=$(cat domain_list.txt | tr &#39;\n &#39;:&#39;)
  Maximum username length: 32
  Home directory base: /home
  ...
  Domain Resolution Order: ipa.test:ad.forest.test:child1.ad.forest.test:child2.ad.forest.test
  ...
</pre></div>
</div>
</section>
<section id="example-2-creating-local-override-of-global-resolution-order">
<h2>Example 2: creating local override of global resolution order<a class="headerlink" href="#example-2-creating-local-override-of-global-resolution-order" title="Link to this heading">#</a></h2>
<p>Let’s say that we have a machine named ‘special.ipa.test’ and we wish
that just users coming from the child domains of trusted forest
(‘child1.ad.forest.test’, ‘child2.ad.forest.test’). Since we observe
much more logins from the latter than from the former, we wish to have
this one tried out first when resolving short names.</p>
<ul class="simple">
<li><p>first we create an ID view which will hold the modified resolution
order:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipa idview-add special_host_view --desc &#39;ID view for custom shortname resolution on special hosts&#39; --domain-resolution-order &#39;child2.ad.forest:test:child1.ad.forest&#39;
---------------------------------
Added ID View &quot;special_host_view&quot;
---------------------------------
  ID View Name: special_host_view
  Description: ID view for custom shortname resolution on special hosts
  Domain Resolution Order: child2.ad.forest:test:child1.ad.forest
</pre></div>
</div>
<ul class="simple">
<li><p>then we apply the view on the host</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipa idview-apply special_host_view --hosts special.ipa.test
-----------------------------------
Applied ID View &quot;special_host_view&quot;
-----------------------------------
  hosts: special.ipa.test
---------------------------------------------
Number of hosts the ID View was applied to: 1
---------------------------------------------
</pre></div>
</div>
</section>
<section id="test-plan">
<h2>Test Plan<a class="headerlink" href="#test-plan" title="Link to this heading">#</a></h2>
<p>Test scenarios that will be transformed to test cases for FreeIPA
<a class="reference external" href="V3/Integration_testing">Continuous Integration</a> during
implementation or review phase. This can be also link to <a class="reference external" href="https://git.fedorahosted.org/cgit/freeipa.git/">source in
cgit</a> with the test,
if appropriate.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-cases">Use Cases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#design">Design</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#domain-resolution-order-storage-and-interpretation">Domain resolution order storage and interpretation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#global-vs-local-domain-resolution-order-settings">Global vs. local domain resolution order settings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#domain-resolution-order-management">Domain resolution order management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#domain-resolution-order-validation">Domain resolution order validation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-management">Feature Management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration">Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade">Upgrade</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-use">How to Use</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-create-a-global-resolution-order">Example 1: Create a global resolution order</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-more-conductive-to-automation">Example 1 more conductive to automation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-2-creating-local-override-of-global-resolution-order">Example 2: creating local override of global resolution order</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-plan">Test Plan</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>