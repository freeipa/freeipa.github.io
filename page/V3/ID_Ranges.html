
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ID_Ranges &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/V3/ID_Ranges';</script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="https://raw.githubusercontent.com/freeipa/freeipa.github.io/main/src/_static/freeipa-logo-small.png" class="logo__image" alt="Logo image" />
</a>
<div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Documentation.html">Documentation</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/page/Troubleshooting.html">Troubleshooting</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/page/V3/ID_Ranges.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>ID_Ranges</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-are-rids-and-rid-ranges">What are RIDs and RID ranges</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-purpose-of-primary-and-secondary-rid-range">The purpose of primary and secondary RID range</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#constraints-on-id-ranges">Constraints on ID ranges</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#any-domain">Any domain</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ranges-from-the-same-domain">Ranges from the same domain</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-ad-trust-ranges">ipa-ad-trust ranges</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-ad-trust-posix-ranges">ipa-ad-trust-posix ranges:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#local-ranges">Local ranges</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="id-ranges">
<h1>ID_Ranges<a class="headerlink" href="#id-ranges" title="Link to this heading">#</a></h1>
<section id="what-are-rids-and-rid-ranges">
<h2>What are RIDs and RID ranges<a class="headerlink" href="#what-are-rids-and-rid-ranges" title="Link to this heading">#</a></h2>
<p>RIDs are unique 32-bit identifiers of the user/group objects in the
scope one Active Directory domain. The RID is the last part of the SID,
e.g. for SID S-1-5-21-123-456-789-1010, the last segment, that is 1010
is the RID. RID range is the analog of the ID range.</p>
</section>
<section id="the-purpose-of-primary-and-secondary-rid-range">
<h2>The purpose of primary and secondary RID range<a class="headerlink" href="#the-purpose-of-primary-and-secondary-rid-range" title="Link to this heading">#</a></h2>
<p>If we want to export user / group objects from IPA to the Active
Directory, we need to generate SIDs for them. The whole SID but the last
segment (which is above mentioned RID) is an unique string to the
domain. To keep SIDs of the objects unique, we need to generate an
unique RID for each object in the IPA domain. RID range (or an RID
space) is then an interval of natural numbers, where we expect our RIDs
to be generated. RIDs are generated from the object IDs (UID for users,
GID for groups). Their generation from the IDs is completely
deterministic, and in the simple terms it’s just a shift of the
interval:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ID</span>       <span class="o">|</span>   <span class="n">RID</span>
<span class="mi">10000</span>   <span class="o">-&gt;</span>    <span class="mi">0</span>
<span class="mi">10001</span>   <span class="o">-&gt;</span>    <span class="mi">1</span>
<span class="mi">10002</span>   <span class="o">-&gt;</span>    <span class="mi">2</span>
<span class="mi">10003</span>   <span class="o">-&gt;</span>    <span class="mi">3</span>
<span class="mi">10004</span>   <span class="o">-&gt;</span>    <span class="mi">4</span>
<span class="o">....</span>
</pre></div>
</div>
<p>However, the UID and GID spaces in UNIX are independent. It’s completely
okay to have an user with UID 10002 and a group with GID 10002.
Following the example above, we would end up with RID 2 for both these
objects. To avoid that, we define secondary RID range for local ranges.
This new interval serves as a backup interval where we shift the object
if corresponding RID in the primary range is already taken:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">UID</span>    <span class="o">|</span>    <span class="n">GID</span>      <span class="o">|</span>     <span class="n">RID</span>
<span class="mi">10000</span>                 <span class="o">-&gt;</span>      <span class="mi">0</span>
<span class="mi">10001</span>                 <span class="o">-&gt;</span>      <span class="mi">1</span>
             <span class="mi">10001</span>    <span class="o">-&gt;</span>      <span class="mi">10001</span>
             <span class="mi">10002</span>    <span class="o">-&gt;</span>      <span class="mi">2</span>
<span class="mi">10003</span>                 <span class="o">-&gt;</span>      <span class="mi">3</span>
</pre></div>
</div>
<p>(secondary RID range starts at 10000 in this example)</p>
<p>Please note that objects created by IPA by default have non-conflicting
UIDs and GIDs, since they are assigned by DNA Directory Server plugin,
which assigns to a newly created user/group a new ID which is unique
across UID/GID space. However, admin can manually create specify UID or
GID at the object creation and create conflicts, or any data imported
from other LDAP/NIS systems might.</p>
</section>
<section id="constraints-on-id-ranges">
<h2>Constraints on ID ranges<a class="headerlink" href="#constraints-on-id-ranges" title="Link to this heading">#</a></h2>
<section id="any-domain">
<h3>Any domain<a class="headerlink" href="#any-domain" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Base range space should not overlap for any range combination (of any
type)</p>
<ul>
<li><p>Reasoning: Base ID range space is the ID range space as seen in
the IPA world. Overlapping base ID range space could cause
conflicts on UIDs/GIDs.</p></li>
<li><p>Exception: Base ranges with type ipa-ad-trust-posix may overlap if
the domains are coming from the same forest, they might even be
the same.</p>
<ul>
<li><p>Reasoning: with type ipa-ad-trust-posix we do not have to do
any mapping at all but all data (Posix IDs and SIDs/RIDs) are
coming from AD and we have to trust AD here that the values are
choosen wisely and do not overlap. By default in this case only
one idrange will be created for the forest root and SSSD
automatically takes the same ID range for any member domain in
the forest which does not have an specific idrange set.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>``   Q: So why would anyone set up a new ID range of ipa-ad-trust-posix type for subdomain? Is it the case that user/group entries from subdomain are not replicated to the forest root?``</p>
<p>``   A: E.g. if the POSIX IDs are not managed centrally for the whole forest, but domain admins do it on a per domain basis, seperate ipa-ad-trust-posix ranges with disjunct base idrange would help to avoid collisions. This happens by assigining each domain range a specific reserved ID range space, which is non-overlapping with any other ID range space, thus if any two objects from two different domains collide on UID/GID, only one of them can be resolved in IPA since only one of them would be in ID range space of its own particular domain.``</p>
</section>
<section id="ranges-from-the-same-domain">
<h3>Ranges from the same domain<a class="headerlink" href="#ranges-from-the-same-domain" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>If there are multiple ranges for a single domain, all must have the
same type.</p></li>
</ul>
<section id="ipa-ad-trust-ranges">
<h4>ipa-ad-trust ranges<a class="headerlink" href="#ipa-ad-trust-ranges" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Primary RID ranges should not overlap</p>
<ul>
<li><p>Reasoning: RIDs need to be unique inside one AD domain.</p></li>
</ul>
</li>
</ul>
</section>
<section id="ipa-ad-trust-posix-ranges">
<h4>ipa-ad-trust-posix ranges:<a class="headerlink" href="#ipa-ad-trust-posix-ranges" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>since we do not do any RID -&gt; UID/GID mapping for this ranges the RID
range is of no use here, hence no checking needed, attribute should
not be set at all.</p></li>
<li><p><a class="reference external" href="https://fedorahosted.org/freeipa/ticket/4221">https://fedorahosted.org/freeipa/ticket/4221</a></p></li>
</ul>
</section>
<section id="local-ranges">
<h4>Local ranges<a class="headerlink" href="#local-ranges" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>RID ranges of any type (primary or secondary) should not overlap</p>
<ul>
<li><p>Reasoning: RIDs need to be unique inside one AD domain.</p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-are-rids-and-rid-ranges">What are RIDs and RID ranges</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-purpose-of-primary-and-secondary-rid-range">The purpose of primary and secondary RID range</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#constraints-on-id-ranges">Constraints on ID ranges</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#any-domain">Any domain</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ranges-from-the-same-domain">Ranges from the same domain</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-ad-trust-ranges">ipa-ad-trust ranges</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ipa-ad-trust-posix-ranges">ipa-ad-trust-posix ranges:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#local-ranges">Local ranges</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>