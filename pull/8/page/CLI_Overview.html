

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>CLI_Overview &#8212; FreeIPA  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'page/CLI_Overview';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><a class="navbar-brand logo" href="/">
    <img src="/_static/freeipa-logo-small.png" class="logo__image only-light" alt="Logo image" />
</a>
<div class="sidebar-primary-item">
    <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
        <div class="bd-toc-item navbar-nav active">
            <ul class="nav bd-sidenav">
                <li class="toctree-l1"><a class="reference internal" href="/About.html">About</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Contribute.html">Contribute</a></li>
                <li class="toctree-l1"><a class="reference internal" href="/Downloads.html">Downloads</a></li>
            </ul>
        </div>
    </nav>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/page/CLI_Overview.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>CLI_Overview</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">CLI_Overview</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#command-conventions">Command conventions</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#command-output">Command output</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#plugin-modules">Plugin modules</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aci">aci</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#automount">automount</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-new-locations">Creating new locations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-all-locations">Listing all locations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-locations">Searching for locations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exporting-automount-data-for-locations">Exporting automount data for locations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deleting-locations">Deleting locations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-maps">Creating maps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-indirect-maps">Creating indirect maps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-all-maps-in-a-location">Listing all maps in a location</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#displaying-maps">Displaying maps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deleting-maps">Deleting maps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-keys">Creating keys</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-all-keys-in-a-specific-map">Listing all keys in a specific map</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deleting-keys">Deleting keys</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-automount-information-from-ldap-on-clients">Using automount information from LDAP on clients</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert">cert</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert-get">cert-get</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert-remove-hold">cert-remove-hold</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert-request">cert-request</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert-revoke">cert-revoke</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert-status">cert-status</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#config">config</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dns">dns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#group">group</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hbac">hbac</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#host">host</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hostgroup">hostgroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#misc">misc</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#netgroup">netgroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#passwd">passwd</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#password-policy-pwpolicy">Password Policy: pwpolicy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-new-policy">Add new policy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#delete-policy">Delete policy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modify-policy">Modify policy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#show-policy">Show policy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rolegroup">rolegroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#service">service</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#taskgroup">taskgroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#user">user</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lock-a-user-account">Lock a user account</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unlock-user-account">Unlock user account</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="cli-overview">
<h1>CLI_Overview<a class="headerlink" href="#cli-overview" title="Permalink to this heading">#</a></h1>
<p>__TOC__</p>
</section>
<section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h1>
<p>The IPA v1 toolset consisted of a slew of separate python programs which
called into an XML-RPC backend. This worked fine but was tedious to
maintain, often requiring the same fix to be applied to all of them.</p>
<p>IPA v2 uses a plugin system where the same plugin is used both for the
XML-RPC server-side interface and for the command-line interface. This
results in a consistent, unified interface that is easy to maintain.</p>
<p>From the user’s perspective, plugins are more or less interchangeable
with commands. Most plugins implement commands used to manage IPA and
its data. With the exception of two build-ins (<cite>help` and `console</cite>)
all commands are introduced by plugins.</p>
<p>Commands are invoked like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa [global-options] COMMAND [command-parameters-that-is-options-and-arguments]</span></code></p>
<p>A list of global options can be displayed using:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa --help</span></code></p>
<p>The plugins are organized by type of objects they manage. This type can
also be used to get an overview of the available commands. To display
all commands in a specific module, use the `help` command as follows:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa help TOPIC</span></code></p>
<p>Parameters available for a specific command are displayed with:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa COMMAND --help</span></code></p>
<p>If a list of parameter isn’t enough, more information about specific
commands is available through the `help` command:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa help COMMAND</span></code></p>
</section>
<section id="command-conventions">
<h1>Command conventions<a class="headerlink" href="#command-conventions" title="Permalink to this heading">#</a></h1>
</section>
<section id="command-output">
<h1>Command output<a class="headerlink" href="#command-output" title="Permalink to this heading">#</a></h1>
<p>All commands used to manipulate LDAP entries (which is currently a
majority of all plugins) automatically transform attributes as they are
stored in LDAP into a more user-friendly form and most of the time, some
less relevant attributes are hidden by default. Since this behaviour
isn’t always desirable, all such commands accept the following options:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">--all     display all attributes</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">--raw     display attributes as they are stored in LDAP</span></code></div>
</div>
<p>–all makes the command retrieve all attributes and display them, this
doesn’t apply to explicitly hidden attributes.</p>
<p>–raw makes the command display all retrieved attributes as stored in
LDAP. Explicitly hidden attributes (if retrieved) are displayed as well.</p>
<p>Note: These options might make it into the global options in the future.</p>
</section>
<section id="plugin-modules">
<h1>Plugin modules<a class="headerlink" href="#plugin-modules" title="Permalink to this heading">#</a></h1>
<p>This section describes all plugin modules and use-cases for the commands
they implement.</p>
<section id="aci">
<h2>aci<a class="headerlink" href="#aci" title="Permalink to this heading">#</a></h2>
<p>Used to create tasks for the <a class="reference external" href="Delegation">Delegation</a> system. To be
used with extreme caution as it can be used to grant write, add and
delete permissions.</p>
</section>
<section id="automount">
<h2>automount<a class="headerlink" href="#automount" title="Permalink to this heading">#</a></h2>
<p>The automount module implements commands used to manage automount
(autofs) maps and keys.</p>
<p>Recently, it was decided that we need to support different automount
maps per location. In other words, allow automount maps to be divided
into one or more groups, so that each client can use a different set.
EVERY AUTOMOUNT MAP AND KEY NEED TO BE PART OF AN AUTOMOUNT LOCATION.
After a clean IPA installation, there is no automount location defined.</p>
</section>
<section id="creating-new-locations">
<h2>Creating new locations<a class="headerlink" href="#creating-new-locations" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountlocation-add LOCATION_NAME</span></code></p>
<p>LOCATION_NAME is a unique string used to identify location being
created.</p>
<p>If successful the new location is automatically populated with an
auto.master map.</p>
</section>
<section id="listing-all-locations">
<h2>Listing all locations<a class="headerlink" href="#listing-all-locations" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountlocation-find</span></code></p>
</section>
<section id="searching-for-locations">
<h2>Searching for locations<a class="headerlink" href="#searching-for-locations" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountlocation-find SEARCH_STRING</span></code></p>
<p>All locations with SEARCH_STRING in their name will be listed.</p>
</section>
<section id="exporting-automount-data-for-locations">
<h2>Exporting automount data for locations<a class="headerlink" href="#exporting-automount-data-for-locations" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountlocation-tofiles LOCATION_NAME</span></code></p>
<p>This command might be useful, if (for whatever reason) some clients
can’t connect to LDAP to retrieve the automount data.</p>
</section>
<section id="deleting-locations">
<h2>Deleting locations<a class="headerlink" href="#deleting-locations" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountlocation-del LOCATION_NAME</span></code></p>
<p>This command deletes a location and EVERYTHING IN IT (ALL maps and
keys).</p>
</section>
<section id="creating-maps">
<h2>Creating maps<a class="headerlink" href="#creating-maps" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountmap-add LOCATION_NAME MAP_NAME</span></code></p>
<p>LOCATION_NAME is the name of the location the map being created is to be
part of.</p>
<p>MAP_NAME is the name of the new indirect map.</p>
</section>
<section id="creating-indirect-maps">
<h2>Creating indirect maps<a class="headerlink" href="#creating-indirect-maps" title="Permalink to this heading">#</a></h2>
<p>An indirect map represents a common mountpoint for specific keys. An
indirect map is equivalent to an automount file listed in
/etc/auto.master.</p>
<p>There are 2 ways of creating them; the simple way:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountmap-add-indirect LOCATION_NAME MAP_NAME --mount=MOUNT_POINT</span></code></p>
<p>and the hard(er) way:</p>
<div class="line-block">
<div class="line">`` ipa automountmap-add LOCATION_NAME MAP_NAME``</div>
<div class="line">`` ipa automountkey-add LOCATION_NAME auto.master MOUNT_POINT –info=MAP_NAME``</div>
</div>
<p>MOUNT_POINT is the mount point such as “/mnt”.</p>
</section>
<section id="listing-all-maps-in-a-location">
<h2>Listing all maps in a location<a class="headerlink" href="#listing-all-maps-in-a-location" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountmap-find LOCATION_NAME</span></code></p>
</section>
<section id="displaying-maps">
<h2>Displaying maps<a class="headerlink" href="#displaying-maps" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountmap-show LOCATION_NAME MAP_NAME</span></code></p>
</section>
<section id="deleting-maps">
<h2>Deleting maps<a class="headerlink" href="#deleting-maps" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountmap-del LOCATION_NAME MAP_NAME</span></code></p>
<p>This command deletes the map and EVERYTHING IN IT (ALL keys). Keys that
link to this map ARE NOT deleted, because they are stored in another map
(usually auto.master).</p>
</section>
<section id="creating-keys">
<h2>Creating keys<a class="headerlink" href="#creating-keys" title="Permalink to this heading">#</a></h2>
<p>Keys in automount have 2 roles:</p>
<ul class="simple">
<li><p>In the auto.master map, they link other maps with mount points.</p></li>
<li><p>In any other map, they represent a specific device to be mounted and
it’s mount options.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountkey-add LOCATION_NAME MAP_NAME KEY_NAME --info=MOUNT_INFO</span></code></p>
<p>If addind a key to auto.master, KEY_NAME should be the mount point and
MOUNT_INFO the name of a map. Otherwise, KEY_NAME should be the
directory name we want the device to be mounted to and MOUNT_INFO should
contain a path to this device along with mount options.</p>
</section>
<section id="listing-all-keys-in-a-specific-map">
<h2>Listing all keys in a specific map<a class="headerlink" href="#listing-all-keys-in-a-specific-map" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountkey-find LOCATION_NAME MAP_NAME</span></code></p>
</section>
<section id="deleting-keys">
<h2>Deleting keys<a class="headerlink" href="#deleting-keys" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountkey-del LOCATION_NAME MAP_NAME KEY_NAME</span></code></p>
</section>
<section id="using-automount-information-from-ldap-on-clients">
<h2>Using automount information from LDAP on clients<a class="headerlink" href="#using-automount-information-from-ldap-on-clients" title="Permalink to this heading">#</a></h2>
<p>Assumptions:</p>
<ul class="simple">
<li><p>IPA server is reachable at $SERVER_HOSTNAME, LDAP base DN is
$LDAP_BASE_DN</p></li>
<li><p>Client being configured has autofs installed and its location of
choise is $AUTOMOUNT_LOCATION.</p></li>
</ul>
<p>In file /etc/nsswitch change this line:</p>
<p><code class="docutils literal notranslate"><span class="pre">automount file</span></code></p>
<p>to</p>
<p><code class="docutils literal notranslate"><span class="pre">automount ldap</span></code></p>
<p>In file /etc/sysconfig/autofs add the following lines at its end:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">LDAP_URI=&quot;</span></code><code class="docutils literal notranslate"><span class="pre">`ldap://$SERVER_HOSTNAME</span></code> &lt;<a class="reference external" href="ldap://$SERVER_HOSTNAME">ldap://$SERVER_HOSTNAME</a>&gt;`__<code class="docutils literal notranslate"><span class="pre">&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">SEARCH_BASE=&quot;cn=$AUTOMOUNT_LOCATION,cn=automount,$LDAP_BASE_DN&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">MAP_OBJECT_CLASS=&quot;automountMap&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ENTRY_OBJECT_CLASS=&quot;automount&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">MAP_ATTRIBUTE=&quot;automountMapName&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ENTRY_ATTRIBUTE=&quot;automountKey&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">VALUE_ATTRIBUTE=&quot;automountInformation&quot;</span></code></div>
</div>
<p>If unsure about what to put into the SEARCH_BASE line, issue this
command to retrieve the correct DN:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa automountlocation-find --name=$AUTOMOUNT_LOCATION --raw</span></code></p>
<p>Restart autofs and we’re done.</p>
</section>
<section id="cert">
<h2>cert<a class="headerlink" href="#cert" title="Permalink to this heading">#</a></h2>
<p>Manage certificates that are issued by the IPA CA server. This command
should not be confused with the certmonger <code class="docutils literal notranslate"><span class="pre">ipa-getcert</span></code> command.</p>
</section>
<section id="cert-get">
<h2>cert-get<a class="headerlink" href="#cert-get" title="Permalink to this heading">#</a></h2>
<p>Retrieve an issued certificate. This is not implemented in the selfsign
CA.</p>
</section>
<section id="cert-remove-hold">
<h2>cert-remove-hold<a class="headerlink" href="#cert-remove-hold" title="Permalink to this heading">#</a></h2>
<p>Removes a certificate hold put on hold using the <code class="docutils literal notranslate"><span class="pre">cert-revoke</span></code>. This
is not implemented in the selfsign CA.</p>
</section>
<section id="cert-request">
<h2>cert-request<a class="headerlink" href="#cert-request" title="Permalink to this heading">#</a></h2>
<p>Provide a Certificate Signing Request (CSR) and receive back a server
certificate.</p>
<p>If the CA backend is a dogtag CA then the subject in the CSR will be
ignored except for the CN component (which should be the FQDN of the
server you are generating the certificate for).</p>
<p>If the CA backend is the selfsign CA then the subject needs to exactly
match the subject format IPA was configured with at install time (by
default CN=&lt;fqdn, o=IPA). CSRs not matching this format will be
rejected.</p>
</section>
<section id="cert-revoke">
<h2>cert-revoke<a class="headerlink" href="#cert-revoke" title="Permalink to this heading">#</a></h2>
<p>Revoke a certificate and add it to the CRL. This is not implemented in
the selfsign CA. The revocation reasons, as defined by RFC 5280, are:</p>
<ul class="simple">
<li><p>0 - unspecified</p></li>
<li><p>1 - keyCompromise</p></li>
<li><p>2 - cACompromise</p></li>
<li><p>3 - affiliationChanged</p></li>
<li><p>4 - superseded</p></li>
<li><p>5 - cessationOfOperation</p></li>
<li><p>6 - certificateHold</p></li>
<li><p>8 - removeFromCRL</p></li>
<li><p>9 - privilegeWithdrawn</p></li>
<li><p>10 - aACompromise</p></li>
</ul>
</section>
<section id="cert-status">
<h2>cert-status<a class="headerlink" href="#cert-status" title="Permalink to this heading">#</a></h2>
<p>Return the status of a certificate request. The dogtag CA issues
certificates immediately so generally this will always be issued. This
is not implemented in the selfsign CA.</p>
</section>
<section id="config">
<h2>config<a class="headerlink" href="#config" title="Permalink to this heading">#</a></h2>
<p>Manage IPA configuration information such as:</p>
<ul class="simple">
<li><p>default login shell</p></li>
<li><p>default primary group</p></li>
<li><p>root of home directories</p></li>
<li><p>maximum username length</p></li>
<li><p>LDAP search limits</p></li>
<li><p>Attributes used in searches</p></li>
</ul>
</section>
<section id="dns">
<h2>dns<a class="headerlink" href="#dns" title="Permalink to this heading">#</a></h2>
<p>Domain Name System (DNS) management.</p>
<p>Implements a set of commands useful for manipulating DNS records used by
the BIND LDAP plugin.</p>
<p>EXAMPLES:</p>
<p>Add new zone;</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa dns-create example.com nameserver.example.com admin&#64;example.com</span></code></p>
<p>Add second nameserver for example.com:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa dns-add-rr example.com &#64; NS nameserver2.example.com</span></code></p>
<p>Delete previously added nameserver from example.com:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa dns-del-rr example.com &#64; NS nameserver2.example.com</span></code></p>
<p>Add new A record for www.example.com: (random IP)</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa dns-add-rr example.com www A 80.142.15.2</span></code></p>
<p>Show zone example.com:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa dns-show example.com</span></code></p>
<p>Find zone with ‘example’ in it’s domain name:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa dns-find example</span></code></p>
<p>Find records for resources with ‘www’ in their name in zone example.com:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa dns-find-rr example.com www</span></code></p>
<p>Find A records for resource www in zone example.com</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa dns-find-rr example.com --resource www --type A</span></code></p>
<p>Show records for resource www in zone example.com</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa dns-show-rr example.com www</span></code></p>
<p>Delete zone example.com with all resource records:</p>
<p><code class="docutils literal notranslate"><span class="pre">ipa dns-delete example.com</span></code></p>
</section>
<section id="group">
<h2>group<a class="headerlink" href="#group" title="Permalink to this heading">#</a></h2>
<p>Groups of users.</p>
<p>A notable change in v2 is that it allows non-Posix groups (the default).
To create a posix group add the –posix flag. If you forget to create
the group as posix at creation you can promote it with group-mod.</p>
<p>A posix group cannot be made into a non-posix group.</p>
</section>
<section id="hbac">
<h2>hbac<a class="headerlink" href="#hbac" title="Permalink to this heading">#</a></h2>
<p>Managed Host-Based Access Control is used to control who can log into
what machines, when and from where.</p>
<p>There are 4 components to an HBAC:</p>
<ul class="simple">
<li><p>host: hosts and hostgroups affected by HBAC rule (the target host)</p></li>
<li><p>sourcehost: hosts and hostgroups affected by HBAC rule (the source
host)</p></li>
<li><p>user: users and groups affected by HBAC rule (the who)</p></li>
<li><p>accesstime: when the rule is active. There can be more than one.</p></li>
</ul>
<p>A simple example: Allow the user admin to ssh into the host tiger from
the host lion.</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ ipa hbac-add --type=allow --service=sshd tiger_sshd</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ ipa hbac-add-host tiger_sshd --hosts=tiger.example.com</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ ipa hbac-add-sourcehost tiger_sshd --hosts=lion.example.com</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ ipa hbac-add-user --users=admin tiger_sshd</span></code></div>
</div>
<p>There is no access time associated with this rule so it is is always
available.</p>
</section>
<section id="host">
<h2>host<a class="headerlink" href="#host" title="Permalink to this heading">#</a></h2>
<p>A host represents a computer. Certain information can be maintained with
the host but this isn’t meant to serve as an inventory system. The
following pieces of information can be stored:</p>
<ul class="simple">
<li><p>Description</p></li>
<li><p>Locality (broadly where it is, e.g. Baltimore)</p></li>
<li><p>Location (specifically where it is, Lab 2)</p></li>
<li><p>Platform</p></li>
<li><p>OS</p></li>
</ul>
<p>A password can be set on the host to be used by the ipa-join command.
This allows the host to enroll into the IPA realm and obtain a keytab.
This password is a one-use password and is removed when a keytab is
retrieved.</p>
</section>
<section id="hostgroup">
<h2>hostgroup<a class="headerlink" href="#hostgroup" title="Permalink to this heading">#</a></h2>
<p>Groups of hosts.</p>
</section>
<section id="misc">
<h2>misc<a class="headerlink" href="#misc" title="Permalink to this heading">#</a></h2>
</section>
<section id="netgroup">
<h2>netgroup<a class="headerlink" href="#netgroup" title="Permalink to this heading">#</a></h2>
</section>
<section id="passwd">
<h2>passwd<a class="headerlink" href="#passwd" title="Permalink to this heading">#</a></h2>
<p>Used to set or reset a user’s password.</p>
<p>Any password not set by the user will require a reset the first time the
user logs in.</p>
</section>
<section id="password-policy-pwpolicy">
<h2>Password Policy: pwpolicy<a class="headerlink" href="#password-policy-pwpolicy" title="Permalink to this heading">#</a></h2>
<p>This plugin provides group-based password policy. A global policy is
defined but can be overridden with a group-based policy.</p>
<p>Each policy has a priority value set, an integer from 1-maxint. The
higher the value, the higher the priority. What this means is that if a
user is in multiple groups with password policies set then the one with
the highest priority wins.</p>
</section>
<section id="add-new-policy">
<h2>Add new policy<a class="headerlink" href="#add-new-policy" title="Permalink to this heading">#</a></h2>
<p>Not all aspects of the policy are required but policies are not
additive. So if your global policy sets maxlife to 99 days and you don’t
set one in your group policy this does not default to 99 days, it
defaults to no policy set on max life.</p>
</section>
<section id="delete-policy">
<h2>Delete policy<a class="headerlink" href="#delete-policy" title="Permalink to this heading">#</a></h2>
<p>This allows you to remove the password policy from a given group. Any
users that were in that group will use the next highest policy or the
global policy. The global policy cannot be removed.</p>
</section>
<section id="modify-policy">
<h2>Modify policy<a class="headerlink" href="#modify-policy" title="Permalink to this heading">#</a></h2>
<p>This is used both for modifying per-group policy and the global policy.
If no –group option is passed in then the global policy is modified.</p>
</section>
<section id="show-policy">
<h2>Show policy<a class="headerlink" href="#show-policy" title="Permalink to this heading">#</a></h2>
<p>There are 3 options with this plugin:</p>
<ul class="simple">
<li><p>Pass no arguments to see the global policy</p></li>
<li><p>Pass in –group to show the policy associated with that group</p></li>
<li><p>Pass in –user to show the policy that applies to the user</p></li>
</ul>
<p>This last option is useful to see how the priorities impact the policy
that will apply to a given user.</p>
</section>
<section id="rolegroup">
<h2>rolegroup<a class="headerlink" href="#rolegroup" title="Permalink to this heading">#</a></h2>
<p>Used in the delegation system. A rolegroup is a high-level concept that
logically groups tasks together.</p>
<p>See <a class="reference external" href="Delegation">Delegation</a> for more information</p>
</section>
<section id="service">
<h2>service<a class="headerlink" href="#service" title="Permalink to this heading">#</a></h2>
<p>A service represents a kerberos or system service on a host. The format
is <a class="reference external" href="mailto:SERVICE/FQDN&#37;&#52;&#48;REALM">SERVICE/FQDN<span>&#64;</span>REALM</a>. The service string is generally a convention
appropriate to the service. Some examples are:</p>
<ul class="simple">
<li><p>host - used for ssh</p></li>
<li><p>HTTP - used with mod_auth_kerb</p></li>
</ul>
<p>Service names in kerberos are case-sensitive.</p>
<p>Services may also store certificates.</p>
<p>The ipa-getkeytab command can be used to obtain a keytab for a service.</p>
</section>
<section id="taskgroup">
<h2>taskgroup<a class="headerlink" href="#taskgroup" title="Permalink to this heading">#</a></h2>
<p>A group that is granted access by a specific ACI. The idea is that one
or more ACIs to complete a task grant permission to a taskgroup. A
rolegroup can then be made a member of a taskgroup. Members of a group
inherit ACI permissions.</p>
<p>So users of a rolegroup are granted permissions.</p>
<p>See <a class="reference external" href="Delegation">Delegation</a> for more information</p>
</section>
<section id="user">
<h2>user<a class="headerlink" href="#user" title="Permalink to this heading">#</a></h2>
<p>Manage users.</p>
</section>
<section id="lock-a-user-account">
<h2>Lock a user account<a class="headerlink" href="#lock-a-user-account" title="Permalink to this heading">#</a></h2>
<p>user-lock will lock a user account, preventing them from logging in.</p>
</section>
<section id="unlock-user-account">
<h2>Unlock user account<a class="headerlink" href="#unlock-user-account" title="Permalink to this heading">#</a></h2>
<p>user-unlock will unlock a user account.</p>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">CLI_Overview</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#command-conventions">Command conventions</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#command-output">Command output</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#plugin-modules">Plugin modules</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aci">aci</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#automount">automount</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-new-locations">Creating new locations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-all-locations">Listing all locations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-locations">Searching for locations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exporting-automount-data-for-locations">Exporting automount data for locations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deleting-locations">Deleting locations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-maps">Creating maps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-indirect-maps">Creating indirect maps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-all-maps-in-a-location">Listing all maps in a location</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#displaying-maps">Displaying maps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deleting-maps">Deleting maps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-keys">Creating keys</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-all-keys-in-a-specific-map">Listing all keys in a specific map</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deleting-keys">Deleting keys</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-automount-information-from-ldap-on-clients">Using automount information from LDAP on clients</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert">cert</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert-get">cert-get</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert-remove-hold">cert-remove-hold</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert-request">cert-request</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert-revoke">cert-revoke</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cert-status">cert-status</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#config">config</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dns">dns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#group">group</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hbac">hbac</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#host">host</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hostgroup">hostgroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#misc">misc</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#netgroup">netgroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#passwd">passwd</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#password-policy-pwpolicy">Password Policy: pwpolicy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-new-policy">Add new policy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#delete-policy">Delete policy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modify-policy">Modify policy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#show-policy">Show policy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rolegroup">rolegroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#service">service</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#taskgroup">taskgroup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#user">user</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lock-a-user-account">Lock a user account</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unlock-user-account">Unlock user account</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FreeIPA Team
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, FreeIPA Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>